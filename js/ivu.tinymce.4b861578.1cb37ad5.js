(window.webpackJsonp=window.webpackJsonp||[]).push([["ivu.tinymce.4b861578"],{"0335":function(t,n,e){e("0f58")},"07d1":function(t,n,e){e("94ce")},"080b":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),e=function(t){return t.getParam("pagebreak_split_block",!1)},r="mce-pagebreak",o=function(t){var e='<img src="'+n.transparentSrc+'" class="'+r+'" data-mce-resize="false" data-mce-placeholder />';return t?"<p>"+e+"</p>":e};t.add("pagebreak",(function(t){(function(t){t.addCommand("mcePageBreak",(function(){t.insertContent(o(e(t)))}))})(t),function(t){var n=function(){return t.execCommand("mcePageBreak")};t.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:n}),t.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:n})}(t),function(t){var n=function(t){return t.getParam("pagebreak_separator","\x3c!-- pagebreak --\x3e")}(t),i=function(){return e(t)},u=new RegExp(n.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,(function(t){return"\\"+t})),"gi");t.on("BeforeSetContent",(function(t){t.content=t.content.replace(u,o(i()))})),t.on("PreInit",(function(){t.serializer.addNodeFilter("img",(function(e){for(var o,u,a=e.length;a--;)if((u=(o=e[a]).attr("class"))&&-1!==u.indexOf(r)){var c=o.parent;if(t.schema.getBlockElements()[c.name]&&i()){c.type=3,c.value=n,c.raw=!0,o.remove();continue}o.type=3,o.value=n,o.raw=!0}}))}))}(t),function(t){t.on("ResolveName",(function(n){"IMG"===n.target.nodeName&&t.dom.hasClass(n.target,r)&&(n.name="pagebreak")}))}(t)}))}()},"09cf":function(t,n){!function(){"use strict";tinymce.util.Tools.resolve("tinymce.PluginManager").add("textcolor",(function(){}))}()},"0a9d":function(t,n,e){e("69a4")},"0d68":function(t,n,e){e("030f")},"0efa":function(t,n,e){e("4bdc")},"0f58":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}("string"),e=function(t){return function(n){return typeof n===t}}("function"),r=function(){},o=function(t){return function(){return t}},i=function(t){return t};var u=o(!1),a=o(!0),c=tinymce.util.Tools.resolve("tinymce.util.Tools"),l=tinymce.util.Tools.resolve("tinymce.util.XHR"),f=function(t){return t.getParam("template_mdate_classes","mdate")},s=function(t){return t.getParam("template_replace_values")},d=function(t){return t.getParam("template_mdate_format",t.translate("%Y-%m-%d"))},m=function(t,n){if((t=""+t).length<n)for(var e=0;e<n-t.length;e++)t="0"+t;return t},g=function(t,n,e){void 0===e&&(e=new Date);var r="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),o="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),i="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),u="January February March April May June July August September October November December".split(" ");return n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+e.getFullYear())).replace("%y",""+e.getYear())).replace("%m",m(e.getMonth()+1,2))).replace("%d",m(e.getDate(),2))).replace("%H",""+m(e.getHours(),2))).replace("%M",""+m(e.getMinutes(),2))).replace("%S",""+m(e.getSeconds(),2))).replace("%I",""+((e.getHours()+11)%12+1))).replace("%p",e.getHours()<12?"AM":"PM")).replace("%B",""+t.translate(u[e.getMonth()]))).replace("%b",""+t.translate(i[e.getMonth()]))).replace("%A",""+t.translate(o[e.getDay()]))).replace("%a",""+t.translate(r[e.getDay()]))).replace("%%","%")},p=function(t,n){return c.each(n,(function(n,r){e(n)&&(n=n(r)),t=t.replace(new RegExp("\\{\\$"+r+"\\}","g"),n)})),t},h=function(t,n){var r=t.dom,o=s(t);c.each(r.select("*",n),(function(t){c.each(o,(function(n,o){r.hasClass(t,o)&&e(n)&&n(t)}))}))},v=function(t,n){return new RegExp("\\b"+n+"\\b","g").test(t.className)},b=function(t,n,e){var r=t.dom,o=t.selection.getContent();e=p(e,s(t));var i=r.create("div",null,e),u=r.select(".mceTmpl",i);u&&u.length>0&&(i=r.create("div",null)).appendChild(u[0].cloneNode(!0)),c.each(r.select("*",i),(function(n){v(n,function(t){return t.getParam("template_cdate_classes","cdate")}(t).replace(/\s+/g,"|"))&&(n.innerHTML=g(t,function(t){return t.getParam("template_cdate_format",t.translate("%Y-%m-%d"))}(t))),v(n,f(t).replace(/\s+/g,"|"))&&(n.innerHTML=g(t,d(t))),v(n,function(t){return t.getParam("template_selected_content_classes","selcontent")}(t).replace(/\s+/g,"|"))&&(n.innerHTML=o)})),h(t,i),t.execCommand("mceInsertContent",!1,i.innerHTML),t.addVisual()},y=function(){return w},w=function(){var t=function(t){return t()},n=i;return{fold:function(t,n){return t()},isSome:u,isNone:a,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:o(null),getOrUndefined:o(void 0),or:n,orThunk:t,map:y,each:r,bind:y,exists:u,forall:a,filter:function(){return y()},toArray:function(){return[]},toString:o("none()")}}(),x=function(t){var n=o(t),e=function(){return i},r=function(n){return n(t)},i={fold:function(n,e){return e(t)},isSome:a,isNone:u,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return x(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?i:w},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return i},C={some:x,none:y,from:function(t){return null==t?w:x(t)}},S=function(t,n){return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return C.some(i);if(e(i,r))break}return C.none()}(t,n,u)},T=tinymce.util.Tools.resolve("tinymce.Env"),k=tinymce.util.Tools.resolve("tinymce.util.Promise"),O=Object.hasOwnProperty,D=function(t,n){return O.call(t,n)},A={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},R=function(t){return t.replace(/["'<>&]/g,(function(t){return function(t,n){return D(t,n)?C.from(t[n]):C.none()}(A,t).getOr(t)}))},P=function(t,n){var e=function(t){return function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,(function(t){return{text:t.text,value:t.text}}))},r=function(t,n){return S(t,(function(t){return t.text===n}))},o=function(n){t.windowManager.alert("Could not load the specified template.",(function(){return n.focus("template")}))},i=function(t){return new k((function(n,e){t.value.url.fold((function(){return n(t.value.content.getOr(""))}),(function(t){return l.send({url:t,success:function(t){n(t)},error:function(t){e(t)}})}))}))},u=function(t,n){return function(e,u){if("template"===u.name){var a=e.getData().template;r(t,a).each((function(t){e.block("Loading..."),i(t).then((function(r){n(e,t,r)})).catch((function(){n(e,t,""),e.disable("save"),o(e)}))}))}}},a=function(n){return function(e){var u=e.getData();r(n,u.template).each((function(n){i(n).then((function(n){t.execCommand("mceInsertTemplate",!1,n),e.close()})).catch((function(){e.disable("save"),o(e)}))}))}};(function(){if(!n||0===n.length){var e=t.translate("No templates defined.");return t.notificationManager.open({text:e,type:"info"}),C.none()}return C.from(c.map(n,(function(t,n){var e=function(t){return void 0!==t.url};return{selected:0===n,text:t.title,value:{url:e(t)?C.from(t.url):C.none(),content:e(t)?C.none():C.from(t.content),description:t.description}}})))})().each((function(n){var r=e(n),l=function(t,e){return{title:"Insert Template",size:"large",body:{type:"panel",items:t},initialData:e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:a(n),onChange:u(n,f)}},f=function(n,e,o){var i=function(t,n){if(-1===n.indexOf("<html>")){var e="",r=function(t){return t.getParam("content_style","","string")}(t),o=function(t){return t.getParam("content_css_cors",!1,"boolean")}(t)?' crossorigin="anonymous"':"";c.each(t.contentCSS,(function(n){e+='<link type="text/css" rel="stylesheet" href="'+t.documentBaseURI.toAbsolute(n)+'"'+o+">"})),r&&(e+='<style type="text/css">'+r+"</style>");var i=function(t){var n=t.getParam("body_class","","string");return-1===n.indexOf("=")?n:function(t){return t.getParam("body_class","","hash")[t.id]||""}(t)}(t),u=t.dom.encode,a='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(T.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",l=t.getBody().dir,f=l?' dir="'+u(l)+'"':"";n='<!DOCTYPE html><html><head><base href="'+u(t.documentBaseURI.getURI())+'">'+e+a+'</head><body class="'+u(i)+'"'+f+">"+n+"</body></html>"}return p(n,function(t){return t.getParam("template_preview_replace_values")}(t))}(t,o),u=[{type:"selectbox",name:"template",label:"Templates",items:r},{type:"htmlpanel",html:'<p aria-live="polite">'+R(e.value.description)+"</p>"},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1}],a={template:e.text,preview:i};n.unblock(),n.redial(l(u,a)),n.focus("template")},s=t.windowManager.open(l([],{template:"",preview:""}));s.block("Loading..."),i(n[0]).then((function(t){f(s,n[0],t)})).catch((function(){f(s,n[0],""),s.disable("save"),o(s)}))}))},N=function(t){t.addCommand("mceInsertTemplate",function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=n.concat(e);return t.apply(null,o)}}(b,t)),t.addCommand("mceTemplate",function(t,r){return function(){var o=function(t){return t.getParam("templates")}(t);e(o)?o(r):n(o)?l.send({url:o,success:function(t){r(JSON.parse(t))}}):r(o)}}(t,function(t){return function(n){P(t,n)}}(t)))};t.add("template",(function(t){(function(t){var n=function(){return t.execCommand("mceTemplate")};t.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:n}),t.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:n})})(t),N(t),function(t){t.on("PreProcess",(function(n){var e=t.dom,r=d(t);c.each(e.select("div",n.node),(function(n){e.hasClass(n,"mceTmpl")&&(c.each(e.select("*",n),(function(n){e.hasClass(n,f(t).replace(/\s+/g,"|"))&&(n.innerHTML=g(t,r))})),h(t,n))}))}))}(t)}))}()},2401:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},e=function(t){return function(n){return typeof n===t}},r=n("string"),o=n("object"),i=n("array"),u=e("boolean"),a=e("function"),c=e("number"),l=function(){},f=function(t){return function(){return t}},s=function(t){return t},d=function(t,n){return t===n},m=function(t){return function(n){return!t(n)}},g=f(!1),p=f(!0),h=function(){return v},v=function(){var t=function(t){return t()},n=s;return{fold:function(t,n){return t()},isSome:g,isNone:p,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:t,map:h,each:l,bind:h,exists:g,forall:p,filter:function(){return h()},toArray:function(){return[]},toString:f("none()")}}(),b=function(t){var n=f(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:p,isNone:g,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return b(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:v},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},y={some:b,none:h,from:function(t){return null==t?v:b(t)}},w=Array.prototype.slice,x=Array.prototype.push,C=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},S=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},T=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e},k=function(t,n,e){return S(t,(function(t,r){e=n(e,t,r)})),e},O=function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return y.some(i);if(e(i,r))break}return y.none()},D=function(t,n){return O(t,n,g)},A=function(t,n){return function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!i(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);x.apply(n,t[e])}return n}(C(t,n))},R=function(t){var n=w.call(t,0);return n.reverse(),n},P=function(t,n){return n>=0&&n<t.length?y.some(t[n]):y.none()},N=function(t){return P(t,0)},E=function(t){return P(t,t.length-1)},M=function(){return(M=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};var I=function(){return _(0,0)},_=function(t,n){return{major:t,minor:n}},B={nu:_,detect:function(t,n){var e=String(n).toLowerCase();return 0===t.length?I():function(t,n){var e=function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(r.test(n))return r}}(t,n);if(!e)return{major:0,minor:0};var r=function(t){return Number(n.replace(e,"$"+t))};return _(r(1),r(2))}(t,e)},unknown:I},L=function(t,n){return function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return y.none()}(n.brands,(function(n){var e=n.brand.toLowerCase();return D(t,(function(t){var n;return e===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(t){return{current:t.name,version:B.nu(parseInt(n.version,10),0)}}))}))},j=function(t,n){var e=String(n).toLowerCase();return D(t,(function(t){return t.search(e)}))},F=function(t,n){return-1!==t.indexOf(n)},U=function(t){return function(n){return n.replace(t,"")}}(/^\s+|\s+$/g),z=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,H=function(t){return function(n){return F(n,t)}},W=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return F(t,"edge/")&&F(t,"chrome")&&F(t,"safari")&&F(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,z],search:function(t){return F(t,"chrome")&&!F(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return F(t,"msie")||F(t,"trident")}},{name:"Opera",versionRegexes:[z,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:H("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:H("firefox")},{name:"Safari",versionRegexes:[z,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(F(t,"safari")||F(t,"mobile/"))&&F(t,"applewebkit")}}],V=[{name:"Windows",search:H("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return F(t,"iphone")||F(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:H("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:H("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:H("linux"),versionRegexes:[]},{name:"Solaris",search:H("sunos"),versionRegexes:[]},{name:"FreeBSD",search:H("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:H("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],$={browsers:f(W),oses:f(V)},q="Firefox",K=function(t){var n=t.current,e=t.version,r=function(t){return function(){return n===t}};return{current:n,version:e,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(q),isSafari:r("Safari")}},G={unknown:function(){return K({current:void 0,version:B.unknown()})},nu:K,edge:f("Edge"),chrome:f("Chrome"),ie:f("IE"),opera:f("Opera"),firefox:f(q),safari:f("Safari")},Y="Windows",J="Android",X="Solaris",Q="FreeBSD",Z="ChromeOS",tt=function(t){var n=t.current,e=t.version,r=function(t){return function(){return n===t}};return{current:n,version:e,isWindows:r(Y),isiOS:r("iOS"),isAndroid:r(J),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r(X),isFreeBSD:r(Q),isChromeOS:r(Z)}},nt={unknown:function(){return tt({current:void 0,version:B.unknown()})},nu:tt,windows:f(Y),ios:f("iOS"),android:f(J),linux:f("Linux"),osx:f("OSX"),solaris:f(X),freebsd:f(Q),chromeos:f(Z)},et=function(t,n,e){var r=$.browsers(),o=$.oses(),i=n.bind((function(t){return L(r,t)})).orThunk((function(){return function(t,n){return j(t,n).map((function(t){var e=B.detect(t.versionRegexes,n);return{current:t.name,version:e}}))}(r,t)})).fold(G.unknown,G.nu),u=function(t,n){return j(t,n).map((function(t){var e=B.detect(t.versionRegexes,n);return{current:t.name,version:e}}))}(o,t).fold(nt.unknown,nt.nu);return{browser:i,os:u,deviceType:function(t,n,e,r){var o=t.isiOS()&&!0===/ipad/i.test(e),i=t.isiOS()&&!o,u=t.isiOS()||t.isAndroid(),a=u||r("(pointer:coarse)"),c=o||!i&&u&&r("(min-device-width:768px)"),l=i||u&&!c,s=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e),d=!l&&!c&&!s;return{isiPad:f(o),isiPhone:f(i),isTablet:f(c),isPhone:f(l),isTouch:f(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:f(s),isDesktop:f(d)}}(u,i,t,e)}},rt=function(t){return window.matchMedia(t).matches},ot=function(t){var n,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,n=t.apply(null,r)),n}}((function(){return et(navigator.userAgent,y.from(navigator.userAgentData),rt)})),it=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},ut={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return it(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return it(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return it(e)},fromDom:it,fromPoint:function(t,n,e){return y.from(t.dom.elementFromPoint(n,e)).map(it)}},at=function(t,n){return t.dom===n.dom},ct=function(t,n){return function(t,n){return function(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)}(t,n,Node.DOCUMENT_POSITION_CONTAINED_BY)}(t.dom,n.dom)},lt=function(t,n){return ot().browser.isIE()?ct(t,n):function(t,n){var e=t.dom,r=n.dom;return e!==r&&e.contains(r)}(t,n)},ft=function(t,n){var e=t.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},st=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),dt=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),mt=tinymce.util.Tools.resolve("tinymce.util.VK"),gt=Object.keys,pt=function(t,n){for(var e=gt(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}},ht=function(t,n){var e={};return function(t,n,e,r){pt(t,(function(t,o){(n(t,o)?e:r)(t,o)}))}(t,n,function(t){return function(n,e){t[e]=n}}(e),l),e};"undefined"!=typeof window?window:Function("return this;")();var vt=function(t){return t.dom.nodeName.toLowerCase()},bt=function(t){return function(n){return function(t){return t.dom.nodeType}(n)===t}}(1),yt=function(t){return function(n){return bt(n)&&vt(n)===t}},wt=function(t,n){var e=t.dom;pt(n,(function(t,n){!function(t,n,e){if(!(r(e)||u(e)||c(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}(e,n,t)}))},xt=function(t){return k(t.dom.attributes,(function(t,n){return t[n.name]=n.value,t}),{})},Ct=function(t){return y.from(t.dom.parentNode).map(ut.fromDom)},St=function(t){return C(t.dom.childNodes,ut.fromDom)},Tt=function(t,n){var e=t.dom.childNodes;return y.from(e[n]).map(ut.fromDom)},kt=function(t){return Tt(t,0)},Ot=function(t){return Tt(t,t.dom.childNodes.length-1)},Dt=function(t,n){Ct(t).each((function(e){e.dom.insertBefore(n.dom,t.dom)}))},At=function(t,n){t.dom.appendChild(n.dom)},Rt=function(t,n){S(n,(function(n){At(t,n)}))},Pt=function(t){var n=t.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},Nt=function(t){return function(t,n){return ut.fromDom(t.dom.cloneNode(n))}(t,!0)},Et=function(t,n){var e=function(t,n){var e=ut.fromTag(n),r=xt(t);return wt(e,r),e}(t,n);Dt(t,e);var r=St(t);return Rt(e,r),Pt(t),e},Mt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),It=tinymce.util.Tools.resolve("tinymce.util.Tools"),_t=function(t){return function(n){return n&&n.nodeName.toLowerCase()===t}},Bt=function(t){return function(n){return n&&t.test(n.nodeName)}},Lt=function(t){return t&&3===t.nodeType},jt=Bt(/^(OL|UL|DL)$/),Ft=Bt(/^(OL|UL)$/),Ut=_t("ol"),zt=Bt(/^(LI|DT|DD)$/),Ht=Bt(/^(DT|DD)$/),Wt=Bt(/^(TH|TD)$/),Vt=_t("br"),$t=function(t,n){return n&&!!t.schema.getTextBlockElements()[n.nodeName]},qt=function(t,n){return t&&t.nodeName in n},Kt=function(t,n,e){var r=t.isEmpty(n);return!(e&&t.select("span[data-mce-type=bookmark]",n).length>0)&&r},Gt=function(t,n){return t.isChildOf(n,t.getRoot())},Yt=function(t,n){var e,r,o,i=t.dom,u=t.schema.getBlockElements(),a=i.createFragment(),c=function(t){var n=t.getParam("forced_root_block","p");return!1===n?"":!0===n?"p":n}(t);if(c&&((r=i.create(c)).tagName===c.toUpperCase()&&i.setAttribs(r,function(t){return t.getParam("forced_root_block_attrs",{})}(t)),qt(n.firstChild,u)||a.appendChild(r)),n)for(;e=n.firstChild;){var l=e.nodeName;o||"SPAN"===l&&"bookmark"===e.getAttribute("data-mce-type")||(o=!0),qt(e,u)?(a.appendChild(e),r=null):c?(r||(r=i.create(c),a.appendChild(r)),r.appendChild(e)):a.appendChild(e)}return c?o||r.appendChild(i.create("br",{"data-mce-bogus":"1"})):a.appendChild(i.create("br")),a},Jt=Mt.DOM,Xt=yt("dd"),Qt=yt("dt"),Zt=function(t,n){Xt(n)?Et(n,"dt"):Qt(n)&&Ct(n).each((function(e){return function(t,n,e){var r=Jt.select('span[data-mce-type="bookmark"]',n),o=Yt(t,e),i=Jt.createRng();i.setStartAfter(e),i.setEndAfter(n);for(var u=i.extractContents(),a=u.firstChild;a;a=a.firstChild)if("LI"===a.nodeName&&t.dom.isEmpty(a)){Jt.remove(a);break}t.dom.isEmpty(u)||Jt.insertAfter(u,n),Jt.insertAfter(o,n),Kt(t.dom,e.parentNode)&&function(t){It.each(r,(function(n){t.parentNode.insertBefore(n,e.parentNode)})),Jt.remove(t)}(e.parentNode),Jt.remove(e),Kt(t.dom,n)&&Jt.remove(n)}(t,e.dom,n.dom)}))},tn=function(t){Qt(t)&&Et(t,"dd")},nn=function(t,n){if(Lt(t))return{container:t,offset:n};var e=st.getNode(t,n);return Lt(e)?{container:e,offset:n>=t.childNodes.length?e.data.length:0}:e.previousSibling&&Lt(e.previousSibling)?{container:e.previousSibling,offset:e.previousSibling.data.length}:e.nextSibling&&Lt(e.nextSibling)?{container:e.nextSibling,offset:0}:{container:t,offset:n}},en=function(t){var n=t.cloneRange(),e=nn(t.startContainer,t.startOffset);n.setStart(e.container,e.offset);var r=nn(t.endContainer,t.endOffset);return n.setEnd(r.container,r.offset),n},rn=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),on=function(t,n){var e=n||t.selection.getStart(!0);return t.dom.getParent(e,"OL,UL,DL",cn(t,e))},un=function(t){var n=on(t),e=t.selection.getSelectedBlocks();return function(t,n){return t&&1===n.length&&n[0]===t}(n,e)?function(t){return T(t.querySelectorAll("ol,ul,dl"),jt)}(n):T(e,(function(t){return jt(t)&&n!==t}))},an=function(t){var n=t.selection.getSelectedBlocks();return T(function(t,n){var e=It.map(n,(function(n){return t.dom.getParent(n,"li,dd,dt",cn(t,n))||n}));return rn.unique(e)}(t,n),zt)},cn=function(t,n){var e=t.dom.getParents(n,"TD,TH");return e.length>0?e[0]:t.getBody()},ln=function(t,n){var e=t.dom.getParents(n,"ol,ul",cn(t,n));return E(e)},fn=function(t){var n=function(t){var n=ln(t,t.selection.getStart()),e=T(t.selection.getSelectedBlocks(),Ft);return n.toArray().concat(e)}(t);return sn(t,n)},sn=function(t,n){var e=C(n,(function(n){return ln(t,n).getOr(n)}));return rn.unique(e)},dn=function(t,n,e){return void 0===e&&(e=d),t.exists((function(t){return e(t,n)}))},mn=function(t,n,e){return t.isSome()&&n.isSome()?y.some(e(t.getOrDie(),n.getOrDie())):y.none()},gn=function(t,n,e){return t.fire("ListMutation",{action:n,element:e})},pn=function(t,n,e){if(!r(e))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);(function(t){return void 0!==t.style&&a(t.style.getPropertyValue)})(t)&&t.style.setProperty(n,e)},hn=function(t,n,e){var r=t.dom;pn(r,n,e)},vn=function(t,n){At(t.item,n.list)},bn=function(t,n){var e={list:ut.fromTag(n,t),item:ut.fromTag("li",t)};return At(e.list,e.item),e},yn=function(t,n,e){var r=n.slice(0,e.depth);return E(r).each((function(n){(function(t,n){At(t.list,n),t.item=n})(n,function(t,n,e){var r=ut.fromTag("li",t);return wt(r,n),Rt(r,e),r}(t,e.itemAttributes,e.content)),function(t,n){vt(t.list)!==n.listType&&(t.list=Et(t.list,n.listType)),wt(t.list,n.listAttributes)}(n,e)})),r},wn=function(t,n,e){var r=function(t,n,e){for(var r=[],o=0;o<e;o++)r.push(bn(t,n.listType));return r}(t,e,e.depth-n.length);return function(t){for(var n=1;n<t.length;n++)vn(t[n-1],t[n])}(r),function(t,n){for(var e=0;e<t.length-1;e++)hn(t[e].item,"list-style-type","none");E(t).each((function(t){wt(t.list,n.listAttributes),wt(t.item,n.itemAttributes),Rt(t.item,n.content)}))}(r,e),function(t,n){mn(E(t),N(n),vn)}(n,r),n.concat(r)},xn=function(t){return ft(t,"OL,UL")},Cn=function(t){return kt(t).exists(xn)},Sn=function(t){return t.depth>0},Tn=function(t){return t.isSelected},kn=function(t){var n=St(t),e=function(t){return Ot(t).exists(xn)}(t)?n.slice(0,-1):n;return C(e,Nt)},On=function(t){return S(t,(function(n,e){(function(t,n){var e=t[n].depth,r=function(t){return t.depth===e&&!t.dirty},o=function(t){return t.depth<e};return O(R(t.slice(0,n)),r,o).orThunk((function(){return O(t.slice(n+1),r,o)}))})(t,e).fold((function(){n.dirty&&function(t){t.listAttributes=ht(t.listAttributes,(function(t,n){return"start"!==n}))}(n)}),(function(t){return function(t,n){t.listType=n.listType,t.listAttributes=M({},n.listAttributes)}(n,t)}))})),t},Dn=function(t,n,e,r){return kt(r).filter(xn).fold((function(){n.each((function(t){at(t.start,r)&&e.set(!0)}));var o=function(t,n,e){return Ct(t).filter(bt).map((function(r){return{depth:n,dirty:!1,isSelected:e,content:kn(t),itemAttributes:xt(t),listAttributes:xt(r),listType:vt(r)}}))}(r,t,e.get());n.each((function(t){at(t.end,r)&&e.set(!1)}));var i=Ot(r).filter(xn).map((function(r){return An(t,n,e,r)})).getOr([]);return o.toArray().concat(i)}),(function(r){return An(t,n,e,r)}))},An=function(t,n,e,r){return A(St(r),(function(r){return(xn(r)?An:Dn)(t+1,n,e,r)}))},Rn=function(t,n){var e=On(n);return C(e,(function(n){var e=function(t,n){var e=(n||document).createDocumentFragment();return S(t,(function(t){e.appendChild(t.dom)})),ut.fromDom(e)}(n.content);return ut.fromDom(Yt(t,e.dom))}))},Pn=function(t,n){var e=On(n);return function(t,n){var e=k(n,(function(n,e){return e.depth>n.length?wn(t,n,e):yn(t,n,e)}),[]);return N(e).map((function(t){return t.list}))}(t.contentDocument,e).toArray()},Nn=function(t,n,e){var r=function(t,n){var e=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}}(!1);return C(t,(function(t){return{sourceList:t,entries:An(0,n,e,t)}}))}(n,function(t){var n=C(an(t),ut.fromDom);return mn(D(n,m(Cn)),D(R(n),m(Cn)),(function(t,n){return{start:t,end:n}}))}(t));S(r,(function(n){!function(t,n){S(T(t,Tn),(function(t){return function(t,n){switch(t){case"Indent":n.depth++;break;case"Outdent":n.depth--;break;case"Flatten":n.depth=0}n.dirty=!0}(n,t)}))}(n.entries,e);var r=function(t,n){return A(function(t,n){if(0===t.length)return[];for(var e=n(t[0]),r=[],o=[],i=0,u=t.length;i<u;i++){var a=t[i],c=n(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r}(n,Sn),(function(n){return N(n).exists(Sn)?Pn(t,n):Rn(t,n)}))}(t,n.entries);S(r,(function(n){gn(t,"Indent"===e?"IndentList":"OutdentList",n.dom)})),function(t,n){S(n,(function(n){Dt(t,n)}))}(n.sourceList,r),Pt(n.sourceList)}))},En=function(t,n){var e=C(fn(t),ut.fromDom),r=C(function(t){return T(an(t),Ht)}(t),ut.fromDom),o=!1;if(e.length||r.length){var i=t.selection.getBookmark();Nn(t,e,n),function(t,n,e){S(e,"Indent"===n?tn:function(n){return Zt(t,n)})}(t,n,r),t.selection.moveToBookmark(i),t.selection.setRng(en(t.selection.getRng())),t.nodeChanged(),o=!0}return o},Mn=function(t){return En(t,"Indent")},In=function(t){return En(t,"Outdent")},_n=function(t){return En(t,"Flatten")},Bn=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),Ln=Mt.DOM,jn=function(t){var n={},e=function(e){var r=t[e?"startContainer":"endContainer"],o=t[e?"startOffset":"endOffset"];if(1===r.nodeType){var i=Ln.create("span",{"data-mce-type":"bookmark"});r.hasChildNodes()?(o=Math.min(o,r.childNodes.length-1),e?r.insertBefore(i,r.childNodes[o]):Ln.insertAfter(i,r.childNodes[o])):r.appendChild(i),r=i,o=0}n[e?"startContainer":"endContainer"]=r,n[e?"startOffset":"endOffset"]=o};return e(!0),t.collapsed||e(),n},Fn=function(t){var n=function(n){var e,r=e=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];r&&(1===r.nodeType&&(o=function(t){for(var n=t.parentNode.firstChild,e=0;n;){if(n===t)return e;1===n.nodeType&&"bookmark"===n.getAttribute("data-mce-type")||e++,n=n.nextSibling}return-1}(r),r=r.parentNode,Ln.remove(e),!r.hasChildNodes()&&Ln.isBlock(r)&&r.appendChild(Ln.create("br"))),t[n?"startContainer":"endContainer"]=r,t[n?"startOffset":"endOffset"]=o)};n(!0),n();var e=Ln.createRng();return e.setStart(t.startContainer,t.startOffset),t.endContainer&&e.setEnd(t.endContainer,t.endOffset),en(e)},Un=function(t){switch(t){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},zn=function(t){return/\btox\-/.test(t.className)},Hn=function(t,n,e){var r=function(t){var r=O(t.parents,jt,Wt).filter((function(t){return t.nodeName===n&&!zn(t)})).isSome();e(r)},o=t.dom.getParents(t.selection.getNode());return r({parents:o}),t.on("NodeChange",r),function(){return t.off("NodeChange",r)}},Wn=function(t,n){It.each(n,(function(n,e){t.setAttribute(e,n)}))},Vn=function(t,n,e){(function(t,n,e){var r=e["list-style-type"]?e["list-style-type"]:null;t.setStyle(n,"list-style-type",r)})(t,n,e),function(t,n,e){Wn(n,e["list-attributes"]),It.each(t.select("li",n),(function(t){Wn(t,e["list-item-attributes"])}))}(t,n,e)},$n=function(t,n,e,r){var o=n[e?"startContainer":"endContainer"],i=n[e?"startOffset":"endOffset"];for(1===o.nodeType&&(o=o.childNodes[Math.min(i,o.childNodes.length-1)]||o),!e&&Vt(o.nextSibling)&&(o=o.nextSibling);o.parentNode!==r;){if($t(t,o))return o;if(/^(TD|TH)$/.test(o.parentNode.nodeName))return o;o=o.parentNode}return o},qn=function(t,n,e){var r=t.selection.getRng(),o="LI",i=cn(t,t.selection.getStart(!0)),u=t.dom;if("false"!==u.getContentEditable(t.selection.getNode())){"DL"===(n=n.toUpperCase())&&(o="DT");var a=jn(r),c=function(t,n,e){for(var r,o=[],i=t.dom,u=$n(t,n,!0,e),a=$n(t,n,!1,e),c=[],l=u;l&&(c.push(l),l!==a);l=l.nextSibling);return It.each(c,(function(n){if($t(t,n))return o.push(n),void(r=null);if(i.isBlock(n)||Vt(n))return Vt(n)&&i.remove(n),void(r=null);var u=n.nextSibling;Bn.isBookmarkNode(n)&&(jt(u)||$t(t,u)||!u&&n.parentNode===e)?r=null:(r||(r=i.create("p"),n.parentNode.insertBefore(r,n),o.push(r)),r.appendChild(n))})),o}(t,r,i);It.each(c,(function(r){var i,a=r.previousSibling,c=r.parentNode;zt(c)||(a&&jt(a)&&a.nodeName===n&&function(t,n,e){var r=t.getStyle(n,"list-style-type"),o=e?e["list-style-type"]:"";return r===(o=null===o?"":o)}(u,a,e)?(i=a,r=u.rename(r,o),a.appendChild(r)):(i=u.create(n),r.parentNode.insertBefore(i,r),i.appendChild(r),r=u.rename(r,o)),function(t,n,e){It.each(e,(function(e){var r;return t.setStyle(n,((r={})[e]="",r))}))}(u,r,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),Vn(u,i,e),Gn(t.dom,i))})),t.selection.setRng(Fn(a))}},Kn=function(t,n,e){return function(t,n){return t&&n&&jt(t)&&t.nodeName===n.nodeName}(n,e)&&function(t,n,e){return t.getStyle(n,"list-style-type",!0)===t.getStyle(e,"list-style-type",!0)}(t,n,e)&&function(t,n){return t.className===n.className}(n,e)},Gn=function(t,n){var e,r;if(e=n.nextSibling,Kn(t,n,e)){for(;r=e.firstChild;)n.appendChild(r);t.remove(e)}if(e=n.previousSibling,Kn(t,n,e)){for(;r=e.lastChild;)n.insertBefore(r,n.firstChild);t.remove(e)}},Yn=function(t,n,e,r,o){var i=jt(n);if(i&&n.nodeName===r&&!Jn(o))_n(t);else{qn(t,r,o);var u=jn(t.selection.getRng()),a=i?function(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}([n],e,!0):e;It.each(a,(function(n){!function(t,n,e,r){if(n.nodeName!==e){var o=t.dom.rename(n,e);Vn(t.dom,o,r),gn(t,Un(e),o)}else Vn(t.dom,n,r),gn(t,Un(e),n)}(t,n,r,o)})),t.selection.setRng(Fn(u))}},Jn=function(t){return"list-style-type"in t},Xn=function(t,n,e){var r=on(t),i=un(t),u=o(e)?e:{};i.length>0?Yn(t,r,i,n,u):function(t,n,e,r){if(n!==t.getBody())if(n)if(n.nodeName!==e||Jn(r)||zn(n)){var o=jn(t.selection.getRng());Vn(t.dom,n,r);var i=t.dom.rename(n,e);Gn(t.dom,i),t.selection.setRng(Fn(o)),qn(t,e,r),gn(t,Un(e),i)}else _n(t);else qn(t,e,r),gn(t,Un(e),n)}(t,r,n,u)},Qn=Mt.DOM,Zn=function(t,n){var e=It.grep(t.select("ol,ul",n));It.each(e,(function(n){!function(t,n){var e=n.parentNode;if("LI"===e.nodeName&&e.firstChild===n){var r=e.previousSibling;r&&"LI"===r.nodeName?(r.appendChild(n),Kt(t,e)&&Qn.remove(e)):Qn.setStyle(e,"listStyleType","none")}jt(e)&&(r=e.previousSibling)&&"LI"===r.nodeName&&r.appendChild(n)}(t,n)}))},te=function(t,n,e,r){var o=n.startContainer,i=n.startOffset;if(Lt(o)&&(e?i<o.data.length:i>0))return o;var u=t.schema.getNonEmptyElements();1===o.nodeType&&(o=st.getNode(o,i));var a=new dt(o,r);for(e&&function(t,n){return!!Vt(n)&&t.isBlock(n.nextSibling)&&!Vt(n.previousSibling)}(t.dom,o)&&a.next();o=a[e?"next":"prev2"]();){if("LI"===o.nodeName&&!o.hasChildNodes())return o;if(u[o.nodeName])return o;if(Lt(o)&&o.data.length>0)return o}},ne=function(t,n){var e=n.childNodes;return 1===e.length&&!jt(e[0])&&t.isBlock(e[0])},ee=function(t,n,e){var r,o=ne(t,e)?e.firstChild:e;if(function(t,n){ne(t,n)&&t.remove(n.firstChild,!0)}(t,n),!Kt(t,n,!0))for(;r=n.firstChild;)o.appendChild(r)},re=function(t,n,e){var r,o=n.parentNode;if(Gt(t,n)&&Gt(t,e)){jt(e.lastChild)&&(r=e.lastChild),o===e.lastChild&&Vt(o.previousSibling)&&t.remove(o.previousSibling);var i=e.lastChild;i&&Vt(i)&&n.hasChildNodes()&&t.remove(i),Kt(t,e,!0)&&t.$(e).empty(),ee(t,n,e),r&&e.appendChild(r);var u=lt(ut.fromDom(e),ut.fromDom(n))?t.getParents(n,jt,e):[];t.remove(n),S(u,(function(n){Kt(t,n)&&n!==t.getRoot()&&t.remove(n)}))}},oe=function(t,n,e,r){var o=t.dom;if(o.isEmpty(r))!function(t,n,e){t.dom.$(e).empty(),re(t.dom,n,e),t.selection.setCursorLocation(e,0)}(t,e,r);else{var i=jn(n);re(o,e,r),t.selection.setRng(Fn(i))}},ie=function(t,n){var e=t.dom,r=t.selection,o=r.getStart(),i=cn(t,o),u=e.getParent(r.getStart(),"LI",i);if(u){var a=u.parentNode;if(a===t.getBody()&&Kt(e,a))return!0;var c=en(r.getRng()),l=e.getParent(te(t,c,n,i),"LI",i);if(l&&l!==u)return t.undoManager.transact((function(){n?oe(t,c,l,u):function(t){return t.parentNode.firstChild===t}(u)?In(t):function(t,n,e,r){var o=jn(n);re(t.dom,e,r);var i=Fn(o);t.selection.setRng(i)}(t,c,u,l)})),!0;if(!l&&!n&&0===c.startOffset&&0===c.endOffset)return t.undoManager.transact((function(){_n(t)})),!0}return!1},ue=function(t,n){return ie(t,n)||function(t,n){var e=t.dom,r=t.selection.getStart(),o=cn(t,r),i=e.getParent(r,e.isBlock,o);if(i&&e.isEmpty(i)){var u=en(t.selection.getRng()),a=e.getParent(te(t,u,n,o),"LI",o);if(a)return t.undoManager.transact((function(){(function(t,n,e){var r=t.getParent(n.parentNode,t.isBlock,e);t.remove(n),r&&t.isEmpty(r)&&t.remove(r)})(e,i,o),Gn(e,a.parentNode),t.selection.select(a,!0),t.selection.collapse(n)})),!0}return!1}(t,n)},ae=function(t,n){return t.selection.isCollapsed()?ue(t,n):function(t){var n=t.selection.getStart(),e=cn(t,n);return!!(t.dom.getParent(n,"LI,DT,DD",e)||an(t).length>0)&&(t.undoManager.transact((function(){t.execCommand("Delete"),Zn(t.dom,t.getBody())})),!0)}(t)},ce=function(t){var n=R(U(t).split("")),e=C(n,(function(t,n){var e=t.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,n)*e}));return k(e,(function(t,n){return t+n}),0)},le=function(t){if(--t<0)return"";var n=t%26,e=Math.floor(t/26);return le(e)+String.fromCharCode("A".charCodeAt(0)+n)},fe=function(t){var n=parseInt(t.start,10);return dn(t.listStyleType,"upper-alpha")?le(n):dn(t.listStyleType,"lower-alpha")?le(n).toLowerCase():t.start},se=function(t){var n=on(t);Ut(n)&&t.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:fe({start:t.dom.getAttrib(n,"start","1"),listStyleType:y.some(t.dom.getStyle(n,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(n){(function(t){switch(function(t){return function(t){return/^[0-9]+$/.test(t)}(t)?2:function(t){return/^[A-Z]+$/.test(t)}(t)?0:function(t){return/^[a-z]+$/.test(t)}(t)?1:function(t){return!function(t){return t.length>0}(t)}(t)?3:4}(t)){case 2:return y.some({listStyleType:y.none(),start:t});case 0:return y.some({listStyleType:y.some("upper-alpha"),start:ce(t).toString()});case 1:return y.some({listStyleType:y.some("lower-alpha"),start:ce(t).toString()});case 3:return y.some({listStyleType:y.none(),start:""});case 4:return y.none()}})(n.getData().start).each((function(n){t.execCommand("mceListUpdate",!1,{attrs:{start:"1"===n.start?"":n.start},styles:{"list-style-type":n.listStyleType.getOr("")}})})),n.close()}})},de=function(t,n){return function(){var e=on(t);return e&&e.nodeName===n}},me=function(t){t.addCommand("mceListProps",(function(){se(t)}))},ge=function(t){t.on("BeforeExecCommand",(function(n){var e=n.command.toLowerCase();"indent"===e?Mn(t):"outdent"===e&&In(t)})),t.addCommand("InsertUnorderedList",(function(n,e){Xn(t,"UL",e)})),t.addCommand("InsertOrderedList",(function(n,e){Xn(t,"OL",e)})),t.addCommand("InsertDefinitionList",(function(n,e){Xn(t,"DL",e)})),t.addCommand("RemoveList",(function(){_n(t)})),me(t),t.addCommand("mceListUpdate",(function(n,e){o(e)&&function(t,n){var e=on(t);t.undoManager.transact((function(){o(n.styles)&&t.dom.setStyles(e,n.styles),o(n.attrs)&&pt(n.attrs,(function(n,r){return t.dom.setAttrib(e,r,n)}))}))}(t,e)})),t.addQueryStateHandler("InsertUnorderedList",de(t,"UL")),t.addQueryStateHandler("InsertOrderedList",de(t,"OL")),t.addQueryStateHandler("InsertDefinitionList",de(t,"DL"))},pe=function(t){(function(t){return t.getParam("lists_indent_on_tab",!0)})(t)&&function(t){t.on("keydown",(function(n){n.keyCode!==mt.TAB||mt.metaKeyPressed(n)||t.undoManager.transact((function(){(n.shiftKey?In(t):Mn(t))&&n.preventDefault()}))}))}(t),function(t){t.on("keydown",(function(n){n.keyCode===mt.BACKSPACE?ae(t,!1)&&n.preventDefault():n.keyCode===mt.DELETE&&ae(t,!0)&&n.preventDefault()}))}(t)};t.add("lists",(function(t){return!1===t.hasPlugin("rtc",!0)?(pe(t),ge(t)):me(t),function(t){var n=function(n){return function(){return t.execCommand(n)}};t.hasPlugin("advlist")||(t.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:n("InsertOrderedList"),onSetup:function(n){return Hn(t,"OL",n.setActive)}}),t.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:n("InsertUnorderedList"),onSetup:function(n){return Hn(t,"UL",n.setActive)}}))}(t),function(t){var n={text:"List properties...",icon:"ordered-list",onAction:function(){return t.execCommand("mceListProps")},onSetup:function(n){return Hn(t,"OL",(function(t){return n.setDisabled(!t)}))}};t.ui.registry.addMenuItem("listprops",n),t.ui.registry.addContextMenu("lists",{update:function(n){var e=on(t,n);return Ut(e)?["listprops"]:[]}})}(t),function(t){return{backspaceDelete:function(n){ae(t,n)}}}(t)}))}()},2519:function(t,n){!function(){"use strict";var t=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(){return(e=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},r=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},o=function(t){return function(n){return typeof n===t}},i=r("string"),u=r("array"),a=o("boolean"),c=o("number"),l=function(){},f=function(t){return function(){return t}},s=function(t){return t},d=f(!1),m=f(!0),g=f("[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"),p=function(){return h},h=function(){var t=function(t){return t()},n=s;return{fold:function(t,n){return t()},isSome:d,isNone:m,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:t,map:p,each:l,bind:p,exists:d,forall:m,filter:function(){return p()},toArray:function(){return[]},toString:f("none()")}}(),v=function(t){var n=f(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:m,isNone:d,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return v(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:h},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},b={some:v,none:p,from:function(t){return null==t?h:v(t)}},y=g,w=tinymce.util.Tools.resolve("tinymce.Env"),x=tinymce.util.Tools.resolve("tinymce.util.Tools"),C=Array.prototype.slice,S=Array.prototype.push,T=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},k=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},O=function(t,n){for(var e=t.length-1;e>=0;e--){n(t[e],e)}},D=function(t,n){return function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!u(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);S.apply(n,t[e])}return n}(T(t,n))},A=Object.hasOwnProperty,R=function(t,n){return A.call(t,n)};"undefined"!=typeof window?window:Function("return this;")();var P=function(t){return function(n){return function(t){return t.dom.nodeType}(n)===t}}(3),N=function(t,n,e){!function(t,n,e){if(!(i(e)||a(e)||c(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}(t.dom,n,e)},E=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},M={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return E(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return E(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return E(e)},fromDom:E,fromPoint:function(t,n,e){return b.from(t.dom.elementFromPoint(n,e)).map(E)}},I=function(t,n){return{element:t,offset:n}},_=function(t,n){var e=function(t){return T(t.dom.childNodes,M.fromDom)}(t);return e.length>0&&n<e.length?I(e[n],0):I(t,n)},B=function(t,n){(function(t){return b.from(t.dom.parentNode).map(M.fromDom)})(t).each((function(e){e.dom.insertBefore(n.dom,t.dom)}))},L=function(t,n){B(t,n),function(t,n){t.dom.appendChild(n.dom)}(n,t)},j=function(t,n){var e=function(n){return t(n)?b.from(n.dom.nodeValue):b.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+n+" value of a "+n+" node");return e(r).getOr("")},getOption:e,set:function(e,r){if(!t(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom.nodeValue=r}}}(P,"text"),F=function(t){return j.get(t)},U=function(t,n){return function(t,n){var e=void 0===n?document:n.dom;return function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount}(e)?[]:T(e.querySelectorAll(t),M.fromDom)}(n,t)},z=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),H=function(t,n){return t.isBlock(n)||R(t.schema.getShortEndedElements(),n.nodeName)},W=function(t,n){return"false"===t.getContentEditable(n)},V=function(t,n){return!t.isBlock(n)&&R(t.schema.getWhiteSpaceElements(),n.nodeName)},$=function(t){return 3===t.nodeType},q=function(t,n){return _(M.fromDom(t),n)},K=function(t,n,e,r,o,i){void 0===i&&(i=!0);for(var u=i?n(!1):e;u;){var a=W(t,u);if(a||V(t,u)){if(a?r.cef(u):r.boundary(u))break;u=n(!0)}else{if(H(t,u)){if(r.boundary(u))break}else $(u)&&r.text(u);if(u===o)break;u=n(!1)}}},G=function(t,n,e,r,o){if(!function(t,n){return H(t,n)||W(t,n)||V(t,n)||function(t,n){return"true"===t.getContentEditable(n)&&"false"===t.getContentEditableParent(n.parentNode)}(t,n)}(t,e)){var i=t.getParent(r,t.isBlock),u=new z(e,i),a=o?u.next.bind(u):u.prev.bind(u);K(t,a,e,{boundary:m,cef:m,text:function(t){o?n.fOffset+=t.length:n.sOffset+=t.length,n.elements.push(M.fromDom(t))}})}},Y=function(t,n,e,r,o,i){void 0===i&&(i=!0);var u=new z(e,n),a=[],c={sOffset:0,fOffset:0,elements:[]};G(t,c,e,n,!1);var l=function(){return c.elements.length>0&&(a.push(c),c={sOffset:0,fOffset:0,elements:[]}),!1};return K(t,u.next.bind(u),e,{boundary:l,cef:function(t){return l(),o&&a.push.apply(a,o.cef(t)),!1},text:function(t){c.elements.push(M.fromDom(t)),o&&o.text(t,c)}},r,i),r&&G(t,c,r,n,!0),l(),a},J=function(t,n){var e=q(n.startContainer,n.startOffset),r=e.element.dom,o=q(n.endContainer,n.endOffset),i=o.element.dom;return Y(t,n.commonAncestorContainer,r,i,{text:function(t,n){t===i?n.fOffset+=t.length-o.offset:t===r&&(n.sOffset+=e.offset)},cef:function(n){return function(t,n){var e=C.call(t,0);return e.sort(n),e}(D(U(M.fromDom(n),"*[contenteditable=true]"),(function(n){var e=n.dom;return Y(t,e,e)})),(function(t,n){return function(t,n){return function(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)}(t,n,Node.DOCUMENT_POSITION_PRECEDING)}(t.elements[0].dom,n.elements[0].dom)?1:-1}))}},!1)},X=function(t,n){return n.collapsed?[]:J(t,n)},Q=function(t,n){var e=t.createRng();return e.selectNode(n),X(t,e)},Z=function(t,n){return function(t,n){if(0===t.length)return[];for(var e=n(t[0]),r=[],o=[],i=0,u=t.length;i<u;i++){var a=t[i],c=n(a);c!==e&&(r.push(o),o=[]),e=c,o.push(a)}return 0!==o.length&&r.push(o),r}(function(t,n,e){return k(t,(function(t,r){e=n(e,t,r)})),e}(t,(function(t,e){var r=F(e),o=t.last,i=o+r.length,u=D(n,(function(t,n){return t.start<i&&t.finish>o?[{element:e,start:Math.max(o,t.start)-o,finish:Math.min(i,t.finish)-o,matchId:n}]:[]}));return{results:t.results.concat(u),last:i}}),{results:[],last:0}).results,(function(t){return t.matchId}))},tt=function(t,n){return D(n,(function(n){var e=n.elements,r=T(e,F).join(""),o=function(t,n,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var o=n.regex;o.lastIndex=e;for(var i,u=[];i=o.exec(t);){var a=i[n.matchIndex],c=i.index+i[0].indexOf(a),l=c+a.length;if(l>r)break;u.push({start:c,finish:l}),o.lastIndex=l}return u}(r,t,n.sOffset,r.length-n.fOffset);return Z(e,o)}))},nt=function(t,n){O(t,(function(t,e){O(t,(function(t){var r=M.fromDom(n.cloneNode(!1));N(r,"data-mce-index",e);var o=t.element.dom;if(o.length===t.finish&&0===t.start)L(t.element,r);else{o.length!==t.finish&&o.splitText(t.finish);var i=o.splitText(t.start);L(M.fromDom(i),r)}}))}))},et=function(t,n,e,r){var o=e.getBookmark(),i=t.select("td[data-mce-selected],th[data-mce-selected]"),u=i.length>0?function(t,n){return D(n,(function(n){return Q(t,n)}))}(t,i):X(t,e.getRng()),a=tt(n,u);return nt(a,r),e.moveToBookmark(o),a.length},rt=function(t){var n=t.getAttribute("data-mce-index");return"number"==typeof n?""+n:n},ot=function(t,n,e,r){var o=t.dom.create("span",{"data-mce-bogus":1});o.className="mce-match-marker";var i=t.getBody();return gt(t,n,!1),r?et(t.dom,e,t.selection,o):function(t,n,e,r){var o=Q(t,e),i=tt(n,o);return nt(i,r),i.length}(t.dom,e,i,o)},it=function(t){var n=t.parentNode;t.firstChild&&n.insertBefore(t.firstChild,t),t.parentNode.removeChild(t)},ut=function(t,n){var e=[],r=x.toArray(t.getBody().getElementsByTagName("span"));if(r.length)for(var o=0;o<r.length;o++){var i=rt(r[o]);null!==i&&i.length&&i===n.toString()&&e.push(r[o])}return e},at=function(t,n,e){var r=n.get(),o=r.index,i=t.dom;(e=!1!==e)?o+1===r.count?o=0:o++:o-1==-1?o=r.count-1:o--,i.removeClass(ut(t,r.index),"mce-match-marker-selected");var u=ut(t,o);return u.length?(i.addClass(ut(t,o),"mce-match-marker-selected"),t.selection.scrollIntoView(u[0]),o):-1},ct=function(t,n){var e=n.parentNode;t.remove(n),t.isEmpty(e)&&t.remove(e)},lt=function(t,n,e,r,o,i){var u=t.selection,a=function(t,n){var e="("+t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return n?"(?:^|\\s|"+y()+")"+e+"(?=$|\\s|"+y()+")":e}(e,o),c=u.isForward(),l={regex:new RegExp(a,r?"g":"gi"),matchIndex:1},f=ot(t,n,l,i);if(w.browser.isSafari()&&u.setRng(u.getRng(),c),f){var s=at(t,n,!0);n.set({index:s,count:f,text:e,matchCase:r,wholeWord:o,inSelection:i})}return f},ft=function(t,n){var r=at(t,n,!0);n.set(e(e({},n.get()),{index:r}))},st=function(t,n){var r=at(t,n,!1);n.set(e(e({},n.get()),{index:r}))},dt=function(t){var n=rt(t);return null!==n&&n.length>0},mt=function(t,n,r,o,i){var u,a=n.get(),c=a.index,l=c;o=!1!==o;for(var f=t.getBody(),s=x.grep(x.toArray(f.getElementsByTagName("span")),dt),d=0;d<s.length;d++){var m=rt(s[d]),g=u=parseInt(m,10);if(i||g===a.index){for(r.length?(s[d].firstChild.nodeValue=r,it(s[d])):ct(t.dom,s[d]);s[++d];){if((g=parseInt(rt(s[d]),10))!==u){d--;break}ct(t.dom,s[d])}o&&l--}else u>c&&s[d].setAttribute("data-mce-index",String(u-1))}return n.set(e(e({},a),{count:i?0:a.count-1,index:l})),o?ft(t,n):st(t,n),!i&&n.get().count>0},gt=function(t,n,r){for(var o,i,u=n.get(),a=x.toArray(t.getBody().getElementsByTagName("span")),c=0;c<a.length;c++){var l=rt(a[c]);null!==l&&l.length&&(l===u.index.toString()&&(o||(o=a[c].firstChild),i=a[c].firstChild),it(a[c]))}if(n.set(e(e({},u),{index:-1,count:0,text:""})),o&&i){var f=t.dom.createRng();return f.setStart(o,0),f.setEnd(i,i.data.length),!1!==r&&t.selection.setRng(f),f}},pt=function(n){var e=t(b.none()),r=function(){return e.get().each(n)};return{clear:function(){r(),e.set(b.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){r(),e.set(b.some(t))}}},ht=function(){var t=pt(l);return e(e({},t),{on:function(n){return t.get().each(n)}})},vt=function(t,n){var r=ht();t.undoManager.add();var o=x.trim(t.selection.getContent({format:"text"})),i=function(t){(function(t,n){return n.get().count>1}(0,n)?t.enable:t.disable)("next"),(function(t,n){return n.get().count>1}(0,n)?t.enable:t.disable)("prev")},u=function(t){var r=t.getData(),o=n.get();n.set(e(e({},o),{matchCase:r.matchcase,wholeWord:r.wholewords,inSelection:r.inselection}))},a=function(t,n){var e=n?t.disable:t.enable;k(["replace","replaceall","prev","next"],e)},c=function(t,n){w.browser.isSafari()&&w.deviceType.isTouch()&&("find"===n||"replace"===n||"replaceall"===n)&&t.focus(n)},l=function(e){gt(t,n,!1),a(e,!0),i(e)},f=function(e){var r=e.getData(),o=n.get();if(r.findtext.length){if(o.text===r.findtext&&o.matchCase===r.matchcase&&o.wholeWord===r.wholewords)ft(t,n);else{var u=lt(t,n,r.findtext,r.matchcase,r.wholewords,r.inselection);u<=0&&function(n){t.windowManager.alert("Could not find the specified string.",(function(){n.focus("findtext")}))}(e),a(e,0===u)}i(e)}else l(e)},s=n.get(),d={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",disabled:!0,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",disabled:!0,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",disabled:!0},{type:"custom",name:"replaceall",text:"Replace all",disabled:!0}],initialData:{findtext:o,replacetext:"",wholewords:s.wholeWord,matchcase:s.matchCase,inselection:s.inSelection},onChange:function(t,e){"findtext"===e.name&&n.get().count>0&&l(t)},onAction:function(e,r){var o=e.getData();switch(r.name){case"find":f(e);break;case"replace":mt(t,n,o.replacetext)?i(e):l(e);break;case"replaceall":mt(t,n,o.replacetext,!0,!0),l(e);break;case"prev":st(t,n),i(e);break;case"next":ft(t,n),i(e);break;case"matchcase":case"wholewords":case"inselection":u(e),l(e)}c(e,r.name)},onSubmit:function(t){f(t),c(t,"find")},onClose:function(){t.focus(),gt(t,n),t.undoManager.add()}};r.set(t.windowManager.open(d,{inline:"toolbar"}))},bt=function(t,n){return function(){vt(t,n)}};n.add("searchreplace",(function(n){var e=t({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return function(t,n){t.addCommand("SearchReplace",(function(){vt(t,n)}))}(n,e),function(t,n){t.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:bt(t,n),icon:"search"}),t.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:bt(t,n),icon:"search"}),t.shortcuts.add("Meta+F","",bt(t,n))}(n,e),function(t,n){return{done:function(e){return gt(t,n,e)},find:function(e,r,o,i){return void 0===i&&(i=!1),lt(t,n,e,r,o,i)},next:function(){return ft(t,n)},prev:function(){return st(t,n)},replace:function(e,r,o){return mt(t,n,e,r,o)}}}(n,e)}))}()},"2b07":function(t,n,e){e("dbbc")},"34de":function(t,n,e){e("09cf")},"365e":function(t,n,e){e("cf08")},3699:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return(n=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},e=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},r=e("string"),o=e("object"),i=e("array"),u=function(t){return!function(t){return null==t}(t)},a=function(){},c=function(t){return function(){return t}},l=function(t){return t},f=c(!1),s=c(!0),d=function(){return m},m=function(){var t=function(t){return t()},n=l;return{fold:function(t,n){return t()},isSome:f,isNone:s,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:t,map:d,each:a,bind:d,exists:f,forall:s,filter:function(){return d()},toArray:function(){return[]},toString:c("none()")}}(),g=function(t){var n=c(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:s,isNone:f,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return g(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},p={some:g,none:d,from:function(t){return null==t?m:g(t)}},h=Array.prototype.push,v=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},b=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!i(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);h.apply(n,t[e])}return n},y=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},w=Object.keys,x=Object.hasOwnProperty,C=function(t,n){return S(t,n)?p.from(t[n]):p.none()},S=function(t,n){return x.call(t,n)},T=function(t){return t.getParam("media_scripts")},k=function(t){return t.getParam("media_live_embeds",!0)},O=tinymce.util.Tools.resolve("tinymce.util.Tools"),D=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),A=tinymce.util.Tools.resolve("tinymce.html.SaxParser"),R=function(t,n){if(t)for(var e=0;e<t.length;e++)if(-1!==n.indexOf(t[e].filter))return t[e]},P=D.DOM,N=function(t){return t.replace(/px$/,"")},E=function(t,n){var e=y(!1),r={};return A({validate:!1,allow_conditional_comments:!0,start:function(n,o){if(e.get());else if(S(o.map,"data-ephox-embed-iri"))e.set(!0),r=function(t){var n=t.map.style,e=n?P.parseStyle(n):{};return{type:"ephox-embed-iri",source:t.map["data-ephox-embed-iri"],altsource:"",poster:"",width:C(e,"max-width").map(N).getOr(""),height:C(e,"max-height").map(N).getOr("")}}(o);else{if(r.source||"param"!==n||(r.source=o.map.movie),"iframe"!==n&&"object"!==n&&"embed"!==n&&"video"!==n&&"audio"!==n||(r.type||(r.type=n),r=O.extend(o.map,r)),"script"===n){var i=R(t,o.map.src);if(!i)return;r={type:"script",source:o.map.src,width:String(i.width),height:String(i.height)}}"source"===n&&(r.source?r.altsource||(r.altsource=o.map.src):r.source=o.map.src),"img"!==n||r.poster||(r.poster=o.map.src)}}}).parse(n),r.source=r.source||r.src||r.data,r.altsource=r.altsource||"",r.poster=r.poster||"",r},M=function(t){return{mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"}[t.toLowerCase().split(".").pop()]||""},I=tinymce.util.Tools.resolve("tinymce.html.Schema"),_=tinymce.util.Tools.resolve("tinymce.html.Writer"),B=D.DOM,L=function(t){return/^[0-9.]+$/.test(t)?t+"px":t},j=function(t,n){!function(t,n){for(var e=w(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}}(n,(function(n,e){var r=""+n;if(t.map[e])for(var o=t.length;o--;){var i=t[o];i.name===e&&(r?(t.map[e]=r,i.value=r):(delete t.map[e],t.splice(o,1)))}else r&&(t.push({name:e,value:r}),t.map[e]=r)}))},F=["source","altsource"],U=function(t,n,e){var r,o=_(),i=y(!1),u=0;return A({validate:!1,allow_conditional_comments:!0,comment:function(t){o.comment(t)},cdata:function(t){o.cdata(t)},text:function(t,n){o.text(t,n)},start:function(t,a,c){if(i.get());else if(S(a.map,"data-ephox-embed-iri"))i.set(!0),function(t,n){var e=n.map.style,r=e?B.parseStyle(e):{};r["max-width"]=L(t.width),r["max-height"]=L(t.height),j(n,{style:B.serializeStyle(r)})}(n,a);else{switch(t){case"video":case"object":case"embed":case"img":case"iframe":void 0!==n.height&&void 0!==n.width&&j(a,{width:n.width,height:n.height})}if(e)switch(t){case"video":j(a,{poster:n.poster,src:""}),n.altsource&&j(a,{src:""});break;case"iframe":j(a,{src:n.source});break;case"source":if(u<2&&(j(a,{src:n[F[u]],type:n[F[u]+"mime"]}),!n[F[u]]))return;u++;break;case"img":if(!n.poster)return;r=!0}}o.start(t,a,c)},end:function(t){if(!i.get()){if("video"===t&&e)for(var a=0;a<2;a++)if(n[F[a]]){var c=[];c.map={},u<=a&&(j(c,{src:n[F[a]],type:n[F[a]+"mime"]}),o.start("source",c,!0))}if(n.poster&&"object"===t&&e&&!r){var l=[];l.map={},j(l,{src:n.poster,width:n.width,height:n.height}),o.start("img",l,!0)}}o.end(t)}},I({})).parse(t),o.getContent()},z=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],H=function(t,n){for(var e=function(t){var n=t.match(/^(https?:\/\/|www\.)(.+)$/i);return n&&n.length>1?"www."===n[1]?"https://":n[1]:"https://"}(n),r=t.regex.exec(n),o=e+t.url,i=function(t){o=o.replace("$"+t,(function(){return r[t]?r[t]:""}))},u=0;u<r.length;u++)i(u);return o.replace(/\?$/,"")},W=function(t,n){var e=O.extend({},n);if(!e.source&&(O.extend(e,E(T(t),e.embed)),!e.source))return"";e.altsource||(e.altsource=""),e.poster||(e.poster=""),e.source=t.convertURL(e.source,"source"),e.altsource=t.convertURL(e.altsource,"source"),e.sourcemime=M(e.source),e.altsourcemime=M(e.altsource),e.poster=t.convertURL(e.poster,"poster");var r=function(t){var n=z.filter((function(n){return n.regex.test(t)}));return n.length>0?O.extend({},n[0],{url:H(n[0],t)}):null}(e.source);if(r&&(e.source=r.url,e.type=r.type,e.allowfullscreen=r.allowFullscreen,e.width=e.width||String(r.w),e.height=e.height||String(r.h)),e.embed)return U(e.embed,e,!0);var o=R(T(t),e.source);o&&(e.type="script",e.width=String(o.width),e.height=String(o.height));var i=function(t){return t.getParam("audio_template_callback")}(t),u=function(t){return t.getParam("video_template_callback")}(t);return e.width=e.width||"300",e.height=e.height||"150",O.each(e,(function(n,r){e[r]=t.dom.encode(""+n)})),"iframe"===e.type?function(t){var n=t.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+t.source+'" width="'+t.width+'" height="'+t.height+'"'+n+"></iframe>"}(e):"application/x-shockwave-flash"===e.sourcemime?function(t){var n='<object data="'+t.source+'" width="'+t.width+'" height="'+t.height+'" type="application/x-shockwave-flash">';return t.poster&&(n+='<img src="'+t.poster+'" width="'+t.width+'" height="'+t.height+'" />'),n+="</object>"}(e):-1!==e.sourcemime.indexOf("audio")?function(t,n){return n?n(t):'<audio controls="controls" src="'+t.source+'">'+(t.altsource?'\n<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</audio>"}(e,i):"script"===e.type?function(t){return'<script src="'+t.source+'"><\/script>'}(e):function(t,n){return n?n(t):'<video width="'+t.width+'" height="'+t.height+'"'+(t.poster?' poster="'+t.poster+'"':"")+' controls="controls">\n<source src="'+t.source+'"'+(t.sourcemime?' type="'+t.sourcemime+'"':"")+" />\n"+(t.altsource?'<source src="'+t.altsource+'"'+(t.altsourcemime?' type="'+t.altsourcemime+'"':"")+" />\n":"")+"</video>"}(e,u)},V=function(t){return t.hasAttribute("data-mce-object")||t.hasAttribute("data-ephox-embed-iri")},$=tinymce.util.Tools.resolve("tinymce.util.Promise"),q={},K=function(t){return function(n){return W(t,n)}},G=function(t,n){var e=function(t){return t.getParam("media_url_resolver")}(t);return e?function(t,n,e){return new $((function(r,o){var i=function(e){return e.html&&(q[t.source]=e),r({url:t.source,html:e.html?e.html:n(t)})};q[t.source]?i(q[t.source]):e({url:t.source},i,o)}))}(n,K(t),e):function(t,n){return $.resolve({html:n(t),url:t.source})}(n,K(t))},Y=function(t,e){var r=e?function(t,n){return C(n,t).bind((function(t){return C(t,"meta")}))}(e,t).getOr({}):{},i=function(t,n,e){return function(r){var i,u=function(){return C(t,r)},a=function(){return C(n,r)},c=function(t){return C(t,"value").bind((function(t){return t.length>0?p.some(t):p.none()}))};return(i={})[r]=(r===e?u().bind((function(t){return o(t)?c(t).orThunk(a):a().orThunk((function(){return p.from(t)}))})):a().orThunk((function(){return u().bind((function(t){return o(t)?c(t):p.from(t)}))}))).getOr(""),i}}(t,r,e);return n(n(n(n(n({},i("source")),i("altsource")),i("poster")),i("embed")),function(t,n){var e={};return C(t,"dimensions").each((function(t){v(["width","height"],(function(r){C(n,r).orThunk((function(){return C(t,r)})).each((function(t){return e[r]=t}))}))})),e}(t,r))},J=function(t){var e=n(n({},t),{source:{value:C(t,"source").getOr("")},altsource:{value:C(t,"altsource").getOr("")},poster:{value:C(t,"poster").getOr("")}});return v(["width","height"],(function(n){C(t,n).each((function(t){var r=e.dimensions||{};r[n]=t,e.dimensions=r}))})),e},X=function(t){return function(n){var e=n&&n.msg?"Media embed handler error: "+n.msg:"Media embed handler threw unknown error.";t.notificationManager.open({type:"error",text:e})}},Q=function(t,n){return E(T(t),n)},Z=function(t,e){return function(o){if(r(o.url)&&o.url.trim().length>0){var i=o.html,u=Q(e,i),a=n(n({},u),{source:o.url,embed:i});t.setData(J(a))}}},tt=function(t,n){var e=t.dom.select("*[data-mce-object]");t.insertContent(n),function(t,n){for(var e=t.dom.select("*[data-mce-object]"),r=0;r<n.length;r++)for(var o=e.length-1;o>=0;o--)n[r]===e[o]&&e.splice(o,1);t.selection.select(e[0])}(t,e),t.nodeChanged()},nt=function(t,n,e){n.embed=U(n.embed,n),n.embed&&(t.source===n.source||function(t){return S(q,t)}(n.source))?tt(e,n.embed):G(e,n).then((function(t){tt(e,t.html)})).catch(X(e))},et=function(t){var e=function(t){var e=t.selection.getNode(),r=V(e)?t.serializer.serialize(e,{selection:!0}):"";return n({embed:r},E(T(t),r))}(t),r=y(e),o=J(e),i=function(n,e){var r=Y(e.getData(),"source");n.source!==r.source&&(Z(p,t)({url:r.source,html:""}),G(t,r).then(Z(p,t)).catch(X(t)))},u=function(n){var e=Y(n.getData()),r=Q(t,e.embed);n.setData(J(r))},a=function(e,r){var o=Y(e.getData(),r),i=W(t,o);e.setData(J(n(n({},o),{embed:i})))},c=function(t){return t.getParam("media_dimensions",!0)}(t)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],l={title:"General",name:"general",items:b([[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],c])},f={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},s=[];(function(t){return t.getParam("media_alt_source",!0)})(t)&&s.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),function(t){return t.getParam("media_poster",!0)}(t)&&s.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var d={title:"Advanced",name:"advanced",items:s},m=[l,f];s.length>0&&m.push(d);var g={type:"tabpanel",tabs:m},p=t.windowManager.open({title:"Insert/Edit Media",size:"normal",body:g,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function(n){var e=Y(n.getData());nt(r.get(),e,t),n.close()},onChange:function(t,n){switch(n.name){case"source":i(r.get(),t);break;case"embed":u(t);break;case"dimensions":case"altsource":case"poster":a(t,n.name)}r.set(Y(t.getData()))},initialData:o})},rt=tinymce.util.Tools.resolve("tinymce.html.Node"),ot=tinymce.util.Tools.resolve("tinymce.Env"),it=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ut=function(t,n){if(!1===function(t){return t.getParam("media_filter_html",!0)}(t))return n;var e,r=_();return A({validate:!1,allow_conditional_comments:!1,comment:function(t){e||r.comment(t)},cdata:function(t){e||r.cdata(t)},text:function(t,n){e||r.text(t,n)},start:function(n,o,i){if(e=!0,"script"!==n&&"noscript"!==n&&"svg"!==n){for(var u=o.length-1;u>=0;u--){var a=o[u].name;0===a.indexOf("on")&&(delete o.map[a],o.splice(u,1)),"style"===a&&(o[u].value=t.dom.serializeStyle(t.dom.parseStyle(o[u].value),n))}r.start(n,o,i),e=!1}},end:function(t){e||r.end(t)}},I({})).parse(n),r.getContent()},at=function(t){var n=t.name;return"iframe"===n||"video"===n||"audio"===n},ct=function(t,n,e,r){void 0===r&&(r=null);var o=t.attr(e);return u(o)?o:S(n,e)?null:r},lt=function(t,n,e){var r="img"===n.name||"video"===t.name,o=r?"300":null,i="audio"===t.name?"30":"150",u=r?i:null;n.attr({width:ct(t,e,"width",o),height:ct(t,e,"height",u)})},ft=function(t,n){var e=n.name,r=new rt("img",1);return r.shortEnded=!0,dt(t,n,r),lt(n,r,{}),r.attr({style:n.attr("style"),src:ot.transparentSrc,"data-mce-object":e,class:"mce-object mce-object-"+e}),r},st=function(t,n){var e=n.name,r=new rt("span",1);r.attr({contentEditable:"false",style:n.attr("style"),"data-mce-object":e,class:"mce-preview-object mce-object-"+e}),dt(t,n,r);var o=t.dom.parseStyle(n.attr("style")),i=new rt(e,1);if(lt(n,i,o),i.attr({src:n.attr("src"),style:n.attr("style"),class:n.attr("class")}),"iframe"===e)i.attr({allowfullscreen:n.attr("allowfullscreen"),frameborder:"0"});else{v(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(function(t){i.attr(t,n.attr(t))}));var a=r.attr("data-mce-html");u(a)&&function(t,n,e,r){for(var o=it({forced_root_block:!1,validate:!1},t.schema).parse(r,{context:n});o.firstChild;)e.append(o.firstChild)}(t,e,i,unescape(a))}var c=new rt("span",1);return c.attr("class","mce-shim"),r.append(i),r.append(c),r},dt=function(t,n,e){for(var r=n.attributes,o=r.length;o--;){var i=r[o].name,u=r[o].value;"width"!==i&&"height"!==i&&"style"!==i&&("data"!==i&&"src"!==i||(u=t.convertURL(u,i)),e.attr("data-mce-p-"+i,u))}var a=n.firstChild&&n.firstChild.value;a&&(e.attr("data-mce-html",escape(ut(t,a))),e.firstChild=null)},mt=function(t){var n=t.attr("class");return n&&/\btiny-pageembed\b/.test(n)},gt=function(t){for(;t=t.parent;)if(t.attr("data-ephox-embed-iri")||mt(t))return!0;return!1},pt=function(t){t.on("preInit",(function(){var n=t.schema.getSpecialElements();O.each("video audio iframe object".split(" "),(function(t){n[t]=new RegExp("</"+t+"[^>]*>","gi")}));var e=t.schema.getBoolAttrs();O.each("webkitallowfullscreen mozallowfullscreen allowfullscreen".split(" "),(function(t){e[t]={}})),t.parser.addNodeFilter("iframe,video,audio,object,embed,script",function(t){return function(n){for(var e,r,o=n.length;o--;)(e=n[o]).parent&&(e.parent.attr("data-mce-object")||("script"!==e.name||(r=R(T(t),e.attr("src"))))&&(r&&(r.width&&e.attr("width",r.width.toString()),r.height&&e.attr("height",r.height.toString())),at(e)&&k(t)&&ot.ceFalse?gt(e)||e.replace(st(t,e)):gt(e)||e.replace(ft(t,e))))}}(t)),t.serializer.addAttributeFilter("data-mce-object",(function(n,e){for(var r,o,i,u,a,c,l,f,s=n.length;s--;)if((r=n[s]).parent){for(l=r.attr(e),o=new rt(l,1),"audio"!==l&&"script"!==l&&((f=r.attr("class"))&&-1!==f.indexOf("mce-preview-object")?o.attr({width:r.firstChild.attr("width"),height:r.firstChild.attr("height")}):o.attr({width:r.attr("width"),height:r.attr("height")})),o.attr({style:r.attr("style")}),i=(u=r.attributes).length;i--;){var d=u[i].name;0===d.indexOf("data-mce-p-")&&o.attr(d.substr(11),u[i].value)}"script"===l&&o.attr("type","text/javascript"),(a=r.attr("data-mce-html"))&&((c=new rt("#text",3)).raw=!0,c.value=ut(t,unescape(a)),o.append(c)),r.replace(o)}}))})),t.on("SetContent",(function(){t.$("span.mce-preview-object").each((function(n,e){var r=t.$(e);0===r.find("span.mce-shim").length&&r.append('<span class="mce-shim"></span>')}))}))};t.add("media",(function(t){return function(t){t.addCommand("mceMedia",(function(){et(t)}))}(t),function(t){var n=function(){return t.execCommand("mceMedia")};t.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:n,onSetup:function(n){var e=t.selection;return n.setActive(V(e.getNode())),e.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",n.setActive).unbind}}),t.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:n})}(t),function(t){t.on("ResolveName",(function(t){var n;1===t.target.nodeType&&(n=t.target.getAttribute("data-mce-object"))&&(t.name=n)}))}(t),pt(t),function(t){t.on("click keyup touchend",(function(){var n=t.selection.getNode();n&&t.dom.hasClass(n,"mce-preview-object")&&t.dom.getAttrib(n,"data-mce-selected")&&n.setAttribute("data-mce-selected","2")})),t.on("ObjectSelected",(function(t){"script"===t.target.getAttribute("data-mce-object")&&t.preventDefault()})),t.on("ObjectResized",(function(t){var n=t.target;if(n.getAttribute("data-mce-object")){var e=n.getAttribute("data-mce-html");e&&(e=unescape(e),n.setAttribute("data-mce-html",escape(U(e,{width:String(t.width),height:String(t.height)}))))}}))}(t),function(t){return{showDialog:function(){et(t)}}}(t)}))}()},"3ad8":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return(n=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function e(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}var r=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},o=r("string"),i=r("object"),u=r("array"),a=function(){},c=function(t){return function(){return t}},l=function(t){return t},f=c(!1),s=c(!0),d=function(){return m},m=function(){var t=function(t){return t()},n=l;return{fold:function(t,n){return t()},isSome:f,isNone:s,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:t,map:d,each:a,bind:d,exists:f,forall:s,filter:function(){return d()},toArray:function(){return[]},toString:c("none()")}}(),g=function(t){var n=c(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:s,isNone:f,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return g(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},p={some:g,none:d,from:function(t){return null==t?m:g(t)}},h=Array.prototype.slice,v=Array.prototype.indexOf,b=function(t,n){return function(t,n){return v.call(t,n)}(t,n)>-1},y=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},w=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},x=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e},C=function(t,n,e){return function(t,n){for(var e=t.length-1;e>=0;e--){n(t[e],e)}}(t,(function(t,r){e=n(e,t,r)})),e},S=function(t,n){return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return p.some(i);if(e(i,r))break}return p.none()}(t,n,f)},T=function(t,n){for(var e=0,r=t.length;e<r;++e){if(!0!==n(t[e],e))return!1}return!0},k=function(t){return function(t,n){return n>=0&&n<t.length?p.some(t[n]):p.none()}(t,0)},O=Object.keys,D=Object.hasOwnProperty;(function(t){if(!u(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],e={};w(t,(function(r,o){var i=O(r);if(1!==i.length)throw new Error("one and only one name per case");var a=i[0],c=r[a];if(void 0!==e[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!u(c))throw new Error("case arguments must be an array");n.push(a),e[a]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+i);var u=function(t){var r=O(t);if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","));if(!T(n,(function(t){return b(r,t)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "));return t[a].apply(null,e)};return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(n.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+n.length);var i=n[o];return i.apply(null,e)},match:u,log:function(t){console.log(t,{constructors:n,constructor:a,params:e})}}}}))})([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var A=function(t){var n=[],e=[];return w(t,(function(t){t.fold((function(t){n.push(t)}),(function(t){e.push(t)}))})),{errors:n,values:e}},R=function(t){return{isValue:s,isError:f,getOr:c(t),getOrThunk:c(t),getOrDie:c(t),or:function(n){return R(t)},orThunk:function(n){return R(t)},fold:function(n,e){return e(t)},map:function(n){return R(n(t))},mapError:function(n){return R(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return p.some(t)}}},P=function(t){return{isValue:f,isError:s,getOr:l,getOrThunk:function(t){return t()},getOrDie:function(){return function(t){return function(){throw new Error(t)}}(String(t))()},or:l,orThunk:function(t){return t()},fold:function(n,e){return n(t)},map:function(n){return P(t)},mapError:function(n){return P(n(t))},each:a,bind:function(n){return P(t)},exists:f,forall:s,toOptional:p.none}},N={value:R,error:P,fromOption:function(t,n){return t.fold((function(){return P(n)}),R)}},E=function(t){return"inline-command"===t.type||"inline-format"===t.type},M=function(t){return"block-command"===t.type||"block-format"===t.type},I=function(t){return function(t,n){var e=h.call(t,0);return e.sort(n),e}(t,(function(t,n){return t.start.length===n.start.length?0:t.start.length>n.start.length?-1:1}))},_=function(t){var n=function(n){return N.error({message:n,pattern:t})},e=function(e,r,i){if(void 0!==t.format){var a=void 0;if(u(t.format)){if(!T(t.format,o))return n(e+" pattern has non-string items in the `format` array");a=t.format}else{if(!o(t.format))return n(e+" pattern has non-string `format` parameter");a=[t.format]}return N.value(r(a))}return void 0!==t.cmd?o(t.cmd)?N.value(i(t.cmd,t.value)):n(e+" pattern has non-string `cmd` parameter"):n(e+" pattern is missing both `format` and `cmd` parameters")};if(!i(t))return n("Raw pattern is not an object");if(!o(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!o(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");var r=t.start,a=t.end;return 0===a.length&&(a=r,r=""),e("Inline",(function(t){return{type:"inline-format",start:r,end:a,format:t}}),(function(t,n){return{type:"inline-command",start:r,end:a,cmd:t,value:n}}))}return void 0!==t.replacement?o(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):N.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?n("Block pattern has empty `start` parameter"):e("Block",(function(n){return{type:"block-format",start:t.start,format:n[0]}}),(function(n,e){return{type:"block-command",start:t.start,cmd:n,value:e}}))},B=function(t){return"block-command"===t.type?{start:t.start,cmd:t.cmd,value:t.value}:"block-format"===t.type?{start:t.start,format:t.format}:"inline-command"===t.type?"mceInsertContent"===t.cmd&&""===t.start?{start:t.end,replacement:t.value}:{start:t.start,end:t.end,cmd:t.cmd,value:t.value}:"inline-format"===t.type?{start:t.start,end:t.end,format:1===t.format.length?t.format[0]:t.format}:void 0},L=function(t){return{inlinePatterns:x(t,E),blockPatterns:I(x(t,M))}},j="undefined"!=typeof window?window:Function("return this;")(),F=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=j.console;e&&(e.error?e.error.apply(e,t):e.log.apply(e,t))},U=[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}],z=function(t){var n=t.getParam("forced_root_block","p");return!1===n?"":!0===n?"p":n},H=tinymce.util.Tools.resolve("tinymce.util.Delay"),W=tinymce.util.Tools.resolve("tinymce.util.VK"),V=tinymce.util.Tools.resolve("tinymce.util.Tools"),$=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),q=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),K=function(t,n){return{container:t,offset:n}},G=function(t){return t.nodeType===Node.TEXT_NODE},Y=function(t,n,e){if(n&&t.isEmpty(n)&&!e(n)){var r=n.parentNode;t.remove(n),Y(t,r,e)}},J=function(t,n,e,r){void 0===r&&(r=!0);var o=n.startContainer.parentNode,i=n.endContainer.parentNode;n.deleteContents(),r&&!e(n.startContainer)&&(G(n.startContainer)&&0===n.startContainer.data.length&&t.remove(n.startContainer),G(n.endContainer)&&0===n.endContainer.data.length&&t.remove(n.endContainer),Y(t,o,e),o!==i&&Y(t,i,e))},X=function(t,n){var e=n.get(t);return u(e)&&k(e).exists((function(t){return function(t,n){return D.call(t,n)}(t,"block")}))},Q=function(t){return 0===t.start.length},Z=function(t,n){var e=p.from(t.dom.getParent(n.startContainer,t.dom.isBlock));return""===z(t)?e.orThunk((function(){return p.some(t.getBody())})):e},tt=$.DOM,nt=function(t){return function(n){return t===n?-1:0}},et=function(t,n,e){if(G(t)&&n>=0)return p.some(K(t,n));var r=q(tt);return p.from(r.backwards(t,n,nt(t),e)).map((function(t){return K(t.container,t.container.data.length)}))},rt=function(t,n,e){if(!G(t))return p.none();var r=t.textContent;if(n>=0&&n<=r.length)return p.some(K(t,n));var o=q(tt);return p.from(o.backwards(t,n,nt(t),e)).bind((function(t){var r=t.container.data;return rt(t.container,n+r.length,e)}))},ot=function(t,n,e){if(!G(t))return p.none();var r=t.textContent;if(n<=r.length)return p.some(K(t,n));var o=q(tt);return p.from(o.forwards(t,n,nt(t),e)).bind((function(t){return ot(t.container,n-r.length,e)}))},it=function(t,n,e,r,o){var i=q(t,function(t){return function(n){return t.isBlock(n)||b(["BR","IMG","HR","INPUT"],n.nodeName)||"false"===t.getContentEditable(n)}}(t));return p.from(i.backwards(n,e,r,o))},ut=function(t,n,e){if(G(n)&&(e<0||e>n.data.length))return[];for(var r=[e],o=n;o!==t&&o.parentNode;){for(var i=o.parentNode,u=0;u<i.childNodes.length;u++)if(i.childNodes[u]===o){r.push(u);break}o=i}return o===t?r.reverse():[]},at=function(t,n,e,r,o){return{start:ut(t,n,e),end:ut(t,r,o)}},ct=function(t,n){var e=n.slice(),r=e.pop();return function(t,n,e){return w(t,(function(t,r){e=n(e,t,r)})),e}(e,(function(t,n){return t.bind((function(t){return p.from(t.childNodes[n])}))}),p.some(t)).bind((function(t){return G(t)&&(r<0||r>t.data.length)?p.none():p.some({node:t,offset:r})}))},lt=function(t,n){return ct(t,n.start).bind((function(e){var r=e.node,o=e.offset;return ct(t,n.end).map((function(t){var n=t.node,e=t.offset,i=document.createRange();return i.setStart(r,o),i.setEnd(n,e),i}))}))},ft=function(t,n,e){(function(t,n,e){if(G(t)&&n>=t.length)return p.some(K(t,n));var r=q(tt);return p.from(r.forwards(t,n,nt(t),e)).map((function(t){return K(t.container,0)}))})(n,0,n).each((function(r){var o=r.container;ot(o,e.start.length,n).each((function(e){var r=t.createRng();r.setStart(o,0),r.setEnd(e.container,e.offset),J(t,r,(function(t){return t===n}))}))}))},st=function(t,n){var e=t.dom,r=t.selection.getRng();return Z(t,r).filter((function(n){var r=z(t),o=""===r&&e.is(n,"body")||e.is(n,r);return null!==n&&o})).bind((function(t){var r=t.textContent;return function(t,n){var e=n.replace(" "," ");return S(t,(function(t){return 0===n.indexOf(t.start)||0===e.indexOf(t.start)}))}(n,r).map((function(n){return V.trim(r).length===n.start.length?[]:[{pattern:n,range:at(e.getRoot(),t,0,t,0)}]}))})).getOr([])},dt=function(t,n){if(0!==n.length){var e=t.selection.getBookmark();w(n,(function(n){return function(t,n){var e=t.dom,r=n.pattern,o=lt(e.getRoot(),n.range).getOrDie("Unable to resolve path range");return Z(t,o).each((function(n){"block-format"===r.type?X(r.format,t.formatter)&&t.undoManager.transact((function(){ft(t.dom,n,r),t.formatter.apply(r.format)})):"block-command"===r.type&&t.undoManager.transact((function(){ft(t.dom,n,r),t.execCommand(r.cmd,!1,r.value)}))})),!0}(t,n)})),t.selection.moveToBookmark(e)}},mt=0,gt=function(t,n){return function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n}(t,n,t.length-n.length)},pt=function(t,n){return t.create("span",{"data-mce-type":"bookmark",id:n})},ht=function(t,n){var e=t.createRng();return e.setStartAfter(n.start),e.setEndBefore(n.end),e},vt=function(t,n,e){var r=lt(t.getRoot(),e).getOrDie("Unable to resolve path range"),o=r.startContainer,i=r.endContainer,u=0===r.endOffset?i:i.splitText(r.endOffset),a=0===r.startOffset?o:o.splitText(r.startOffset);return{prefix:n,end:u.parentNode.insertBefore(pt(t,n+"-end"),u),start:a.parentNode.insertBefore(pt(t,n+"-start"),a)}},bt=function(t,n,e){Y(t,t.get(n.prefix+"-end"),e),Y(t,t.get(n.prefix+"-start"),e)},yt=function(t,n,e,r){var o=n.start;return it(t,r.container,r.offset,function(t,n,e){return function(t,n){var r=t.data.substring(0,n),o=r.lastIndexOf(e.charAt(e.length-1)),i=r.lastIndexOf(e);return-1!==i?i+e.length:-1!==o?o+1:-1}}(0,0,o),e).bind((function(r){if(r.offset>=o.length){var i=t.createRng();return i.setStart(r.container,r.offset-o.length),i.setEnd(r.container,r.offset),p.some(i)}var u=r.offset-o.length;return rt(r.container,u,e).map((function(n){var e=t.createRng();return e.setStart(n.container,n.offset),e.setEnd(r.container,r.offset),e})).filter((function(t){return t.toString()===o})).orThunk((function(){return yt(t,n,e,K(r.container,0))}))}))},wt=function(t,n,e){var r=t.dom,o=r.getRoot(),i=e.pattern,u=e.position.container,a=e.position.offset;return rt(u,a-e.pattern.end.length,n).bind((function(c){var l=at(o,c.container,c.offset,u,a);if(Q(i))return p.some({matches:[{pattern:i,startRng:l,endRng:l}],position:c});var f=xt(t,e.remainingPatterns,c.container,c.offset,n),s=f.getOr({matches:[],position:c}),d=s.position;return function(t,n,e,r,o,i){if(void 0===i&&(i=!1),0===n.start.length&&!i){var u=t.createRng();return u.setStart(e,r),u.setEnd(e,r),p.some(u)}return et(e,r,o).bind((function(e){return yt(t,n,o,e).bind((function(t){if(i){if(t.endContainer===e.container&&t.endOffset===e.offset)return p.none();if(0===e.offset&&t.endContainer.textContent.length===t.endOffset)return p.none()}return p.some(t)}))}))}(r,i,d.container,d.offset,n,f.isNone()).map((function(t){var n=function(t,n){return at(t,n.startContainer,n.startOffset,n.endContainer,n.endOffset)}(o,t);return{matches:s.matches.concat([{pattern:i,startRng:n,endRng:l}]),position:K(t.startContainer,t.startOffset)}}))}))},xt=function(t,n,e,r,o){var i=t.dom;return et(e,r,i.getRoot()).bind((function(u){var a=i.createRng();a.setStart(o,0),a.setEnd(e,r);for(var c=a.toString(),l=0;l<n.length;l++){var f=n[l];if(gt(c,f.end)){var s=n.slice();s.splice(l,1);var d=wt(t,o,{pattern:f,remainingPatterns:s,position:u});if(d.isSome())return d}}return p.none()}))},Ct=function(t,n,e){t.selection.setRng(e),"inline-format"===n.type?w(n.format,(function(n){t.formatter.apply(n)})):t.execCommand(n.cmd,!1,n.value)},St=function(t,e){var r=function(t){var n=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++mt+String(n)}("mce_textpattern"),o=C(e,(function(e,o){var i=vt(t,r+"_end"+e.length,o.endRng);return e.concat([n(n({},o),{endMarker:i})])}),[]);return C(o,(function(e,i){var u=o.length-e.length-1,a=Q(i.pattern)?i.endMarker:vt(t,r+"_start"+u,i.startRng);return e.concat([n(n({},i),{startMarker:a})])}),[])},Tt=function(t,n,e){var r=t.selection.getRng();return!1===r.collapsed?[]:Z(t,r).bind((function(o){var i=r.startOffset-(e?1:0);return xt(t,n,r.startContainer,i,o)})).fold((function(){return[]}),(function(t){return t.matches}))},kt=function(t,n){if(0!==n.length){var e=t.dom,r=t.selection.getBookmark(),o=St(e,n);w(o,(function(n){var r=e.getParent(n.startMarker.start,e.isBlock),o=function(t){return t===r};Q(n.pattern)?function(t,n,e,r){var o=ht(t.dom,e);J(t.dom,o,r),Ct(t,n,o)}(t,n.pattern,n.endMarker,o):function(t,n,e,r,o){var i=t.dom,u=ht(i,r),a=ht(i,e);J(i,a,o),J(i,u,o);var c={prefix:e.prefix,start:e.end,end:r.start},l=ht(i,c);Ct(t,n,l)}(t,n.pattern,n.startMarker,n.endMarker,o),bt(e,n.endMarker,o),bt(e,n.startMarker,o)})),t.selection.moveToBookmark(r)}},Ot=function(t,n){var e=Tt(t,n.inlinePatterns,!0);e.length>0&&t.undoManager.transact((function(){kt(t,e)}))},Dt=function(t,n,e){for(var r=0;r<t.length;r++)if(e(t[r],n))return!0;return!1},At=function(t,n){var e=[",",".",";",":","!","?"],r=[32];t.on("keydown",(function(e){13!==e.keyCode||W.modifierPressed(e)||function(t,n){if(!t.selection.isCollapsed())return!1;var e=Tt(t,n.inlinePatterns,!1),r=st(t,n.blockPatterns);return(r.length>0||e.length>0)&&(t.undoManager.add(),t.undoManager.extra((function(){t.execCommand("mceInsertNewLine")}),(function(){t.insertContent("\ufeff"),kt(t,e),dt(t,r);var n=t.selection.getRng(),o=et(n.startContainer,n.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),o.each((function(n){var e=n.container;"\ufeff"===e.data.charAt(n.offset-1)&&(e.deleteData(n.offset-1,1),Y(t.dom,e.parentNode,(function(n){return n===t.dom.getRoot()})))}))})),!0)}(t,n.get())&&e.preventDefault()}),!0),t.on("keyup",(function(e){(function(t,n){return Dt(t,n,(function(t,n){return t===n.keyCode&&!1===W.modifierPressed(n)}))})(r,e)&&Ot(t,n.get())})),t.on("keypress",(function(r){(function(t,n){return Dt(t,n,(function(t,n){return t.charCodeAt(0)===n.charCode}))})(e,r)&&H.setEditorTimeout(t,(function(){Ot(t,n.get())}))}))};t.add("textpattern",(function(t){var n=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}}(function(t){var n=t.getParam("textpattern_patterns",U,"array");if(!u(n))return F("The setting textpattern_patterns should be an array"),{inlinePatterns:[],blockPatterns:[]};var e=A(y(n,_));return w(e.errors,(function(t){return F(t.message,t.pattern)})),L(e.values)}(t));return At(t,n),function(t){return{setPatterns:function(n){var e=A(y(n,_));if(e.errors.length>0){var r=e.errors[0];throw new Error(r.message+":\n"+JSON.stringify(r.pattern,null,2))}t.set(L(e.values))},getPatterns:function(){return e(e([],y(t.get().inlinePatterns,B),!0),y(t.get().blockPatterns,B),!0)}}}(n)}))}()},"3aea":function(t,n,e){e("3699")},"3c41":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=0,e=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++n+String(e)},r=function(t,n,r){var o=t.editorUpload.blobCache,i=o.create(e("mceu"),r,n);o.add(i),t.insertContent(t.dom.createHTML("img",{src:i.blobUri()}))},o=tinymce.util.Tools.resolve("tinymce.util.Promise"),i=tinymce.util.Tools.resolve("tinymce.Env"),u=tinymce.util.Tools.resolve("tinymce.util.Delay"),a=function(t){t.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){(function(t){return new o((function(n){var e=document.createElement("input");e.type="file",e.accept="image/*",e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.opacity="0.001",document.body.appendChild(e);e.addEventListener("change",(function(t){n(Array.prototype.slice.call(t.target.files))}));var r=function(o){var a=function(){n([]),e.parentNode.removeChild(e)};i.os.isAndroid()&&"remove"!==o.type?u.setEditorTimeout(t,a,0):a(),t.off("focusin remove",r)};t.on("focusin remove",r),e.click()}))})(t).then((function(n){if(n.length>0){var e=n[0];(function(t){return new o((function(n){var e=new FileReader;e.onloadend=function(){n(e.result.split(",")[1])},e.readAsDataURL(t)}))})(e).then((function(n){r(t,n,e)}))}}))}}),t.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){!function(t,n,e){t.plugins.table?t.plugins.table.insertTable(n,e):function(t,n,e){t.undoManager.transact((function(){t.insertContent(function(t,n){var e='<table data-mce-id="mce" style="width: 100%">';e+="<tbody>";for(var r=0;r<n;r++){e+="<tr>";for(var o=0;o<t;o++)e+="<td><br></td>";e+="</tr>"}return e+="</tbody>",e+="</table>"}(n,e));var r=function(t){return t.dom.select("*[data-mce-id]")[0]}(t);r.removeAttribute("data-mce-id");var o=t.dom.select("td,th",r);t.selection.setCursorLocation(o[0],0)}))}(t,n,e)}(t,2,2)}})},c=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},l=function(t){return function(n){return typeof n===t}},f=c("string"),s=c("object"),d=c("array"),m=l("boolean"),g=function(t){return function(n){return t===n}}(void 0),p=l("function"),h=function(){},v=function(t){return function(){return t}},b=function(t){return t},y=v(!1),w=v(!0),x=function(){return C},C=function(){var t=function(t){return t()},n=b;return{fold:function(t,n){return t()},isSome:y,isNone:w,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:v(null),getOrUndefined:v(void 0),or:n,orThunk:t,map:x,each:h,bind:x,exists:y,forall:w,filter:function(){return x()},toArray:function(){return[]},toString:v("none()")}}(),S=function(t){var n=v(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:w,isNone:y,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return S(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:C},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},T={some:S,none:x,from:function(t){return null==t?C:S(t)}};function k(t,n,e,r,o){return t(e,r)?T.some(e):p(o)&&o(e)?T.none():n(e,r,o)}var O=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},D={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return O(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return O(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return O(e)},fromDom:O,fromPoint:function(t,n,e){return T.from(t.dom.elementFromPoint(n,e)).map(O)}},A=function(t,n){var e=t.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")};"undefined"!=typeof window?window:Function("return this;")();var R=function(t,n,e){for(var r=t.dom,o=p(e)?e:y;r.parentNode;){r=r.parentNode;var i=D.fromDom(r);if(n(i))return T.some(i);if(o(i))break}return T.none()},P=function(t,n,e){return R(t,(function(t){return A(t,n)}),e)},N=function(t){return function(n,e,r){return function(t,n){if(n(t))return!0;throw new Error("Default value doesn't match requested type.")}(r,t),function(t,n){if(d(t)||s(t))throw new Error("expected a string but found: "+t);return g(t)?n:m(t)?!1===t?"":n:t}(n.getParam(e,r),r)}}(f),E=function(t){var n=function(t){return N(t,"quickbars_insert_toolbar","quickimage quicktable")}(t);n.trim().length>0&&t.ui.registry.addContextToolbar("quickblock",{predicate:function(n){var e=D.fromDom(n),r=t.schema.getTextBlockElements(),o=function(n){return n.dom===t.getBody()};return function(t,n,e){return k((function(t,n){return A(t,n)}),P,t,n,e)}(e,"table",o).fold((function(){return function(t,n,e){return k((function(t,n){return n(t)}),R,t,n,e)}(e,(function(n){return function(t){return t.dom.nodeName.toLowerCase()}(n)in r&&t.dom.isEmpty(n.dom)}),o).isSome()}),y)},items:n,position:"line",scope:"editor"})},M=function(t){var n=function(t){return"IMG"===t.nodeName||"FIGURE"===t.nodeName&&/image/i.test(t.className)},e=function(t){return N(t,"quickbars_image_toolbar","alignleft aligncenter alignright")}(t);e.trim().length>0&&t.ui.registry.addContextToolbar("imageselection",{predicate:n,items:e,position:"node"});var r=function(t){return N(t,"quickbars_selection_toolbar","bold italic | quicklink h2 h3 blockquote")}(t);r.trim().length>0&&t.ui.registry.addContextToolbar("textselection",{predicate:function(e){return!n(e)&&!t.selection.isCollapsed()&&function(n){return"false"!==t.dom.getContentEditableParent(n)}(e)},items:r,position:"selection",scope:"editor"})};t.add("quickbars",(function(t){a(t),E(t),M(t)}))}()},4237:function(t,n,e){e("be7f")},"4bd0":function(t,n,e){e("a376")},"4bdc":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t,n,e){t.dom.toggleClass(t.getBody(),"mce-visualblocks"),e.set(!e.get()),function(t,n){t.fire("VisualBlocks",{state:n})}(t,e.get())},e=function(t,e,r){t.addCommand("mceVisualBlocks",(function(){n(t,0,r)}))},r=function(t,e,r){t.on("PreviewFormats AfterPreviewFormats",(function(n){r.get()&&t.dom.toggleClass(t.getBody(),"mce-visualblocks","afterpreviewformats"===n.type)})),t.on("init",(function(){(function(t){return t.getParam("visualblocks_default_state",!1,"boolean")})(t)&&n(t,0,r)}))},o=function(t,n){return function(e){e.setActive(n.get());var r=function(t){return e.setActive(t.state)};return t.on("VisualBlocks",r),function(){return t.off("VisualBlocks",r)}}};t.add("visualblocks",(function(t,n){var i=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}}(!1);e(t,0,i),function(t,n){var e=function(){return t.execCommand("mceVisualBlocks")};t.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:e,onSetup:o(t,n)}),t.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:e,onSetup:o(t,n)})}(t,i),r(t,0,i)}))}()},"4ea8":function(t,n,e){e("cdd9")},"62e5":function(t,n,e){e("2519")},6957:function(t,n,e){e("75b8")},"69a4":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.Env"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(t){var n=t.getParam("body_class","","string");return-1===n.indexOf("=")?n:function(t){return t.getParam("body_class","","hash")[t.id]||""}(t)},o=function(t){var n=t.getParam("body_id","tinymce","string");return-1===n.indexOf("=")?n:function(t){var n=t.getParam("body_id","","hash");return n[t.id]||n}(t)},i=function(t){var i="",u=t.dom.encode,a=function(t){return t.getParam("content_style","","string")}(t);i+='<base href="'+u(t.documentBaseURI.getURI())+'">';var c=function(t){return t.getParam("content_css_cors",!1,"boolean")}(t)?' crossorigin="anonymous"':"";e.each(t.contentCSS,(function(n){i+='<link type="text/css" rel="stylesheet" href="'+u(t.documentBaseURI.toAbsolute(n))+'"'+c+">"})),a&&(i+='<style type="text/css">'+a+"</style>");var l=o(t),f=r(t),s='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(n.mac?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",d=t.getBody().dir,m=d?' dir="'+u(d)+'"':"";return"<!DOCTYPE html><html><head>"+i+'</head><body id="'+u(l)+'" class="mce-content-body '+u(f)+'"'+m+">"+t.getContent()+s+"</body></html>"},u=function(t){t.addCommand("mcePreview",(function(){!function(t){var n=i(t);t.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:n}}).focus("close")}(t)}))};t.add("preview",(function(t){u(t),function(t){var n=function(){return t.execCommand("mcePreview")};t.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:n}),t.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:n})}(t)}))}()},"75b8":function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),e=tinymce.util.Tools.resolve("tinymce.util.Tools"),r=function(t){return t.getParam("save_enablewhendirty",!0)},o=function(t,n){t.notificationManager.open({text:n,type:"error"})},i=function(t){t.addCommand("mceSave",(function(){!function(t){var e=n.DOM.getParent(t.id,"form");if(!r(t)||t.isDirty()){if(t.save(),function(t){return!!t.getParam("save_onsavecallback")}(t))return t.execCallback("save_onsavecallback",t),void t.nodeChanged();e?(t.setDirty(!1),e.onsubmit&&!e.onsubmit()||("function"==typeof e.submit?e.submit():o(t,"Error: Form submit field collision.")),t.nodeChanged()):o(t,"Error: No form element found.")}}(t)})),t.addCommand("mceCancel",(function(){!function(t){var n=e.trim(t.startContent);!function(t){return!!t.getParam("save_oncancelcallback")}(t)?t.resetContent(n):t.execCallback("save_oncancelcallback",t)}(t)}))},u=function(t){return function(n){var e=function(){n.setDisabled(r(t)&&!t.isDirty())};return e(),t.on("NodeChange dirty",e),function(){return t.off("NodeChange dirty",e)}}};t.add("save",(function(t){(function(t){t.ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return t.execCommand("mceSave")},onSetup:u(t)}),t.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return t.execCommand("mceCancel")},onSetup:u(t)}),t.addShortcut("Meta+S","","mceSave")})(t),i(t)}))}()},"78e4":function(t,n,e){e("3ad8")},"7c4f":function(t,n){!function(){"use strict";var t=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},n=tinymce.util.Tools.resolve("tinymce.PluginManager"),e=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}("array"),r=function(t){return!function(t){return null==t}(t)},o=function(t){return function(n){return typeof n===t}}("function"),i=function(){},u=function(t){return function(){return t}},a=function(t){return t},c=u(!1),l=u(!0),f=function(){return s},s=function(){var t=function(t){return t()},n=a;return{fold:function(t,n){return t()},isSome:c,isNone:l,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:t,map:f,each:i,bind:f,exists:c,forall:l,filter:function(){return f()},toArray:function(){return[]},toString:u("none()")}}(),d=function(t){var n=u(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:l,isNone:c,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return d(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:s},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},m={some:d,none:f,from:function(t){return null==t?s:d(t)}},g=Array.prototype.slice,p=Array.prototype.push,h=function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e))return!0}return!1},v=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},b=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},y=function(t,n){return function(t){for(var n=[],r=0,o=t.length;r<o;++r){if(!e(t[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+t);p.apply(n,t[r])}return n}(v(t,n))},w=o(Array.from)?Array.from:function(t){return g.call(t)},x=function(){return(x=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},C=function(n){var e=t(m.none()),r=function(){return e.get().each(n)};return{clear:function(){r(),e.set(m.none())},isSet:function(){return e.get().isSome()},get:function(){return e.get()},set:function(t){r(),e.set(m.some(t))}}},S=function(){var t=C(i);return x(x({},t),{on:function(n){return t.get().each(n)}})},T=function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n},k=tinymce.util.Tools.resolve("tinymce.Env"),O=tinymce.util.Tools.resolve("tinymce.util.Delay"),D=tinymce.util.Tools.resolve("tinymce.util.Promise"),A=tinymce.util.Tools.resolve("tinymce.util.VK"),R=function(t,n){return t.fire("PastePlainTextToggle",{state:n})},P=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=function(t){return t.getParam("paste_data_images",!1)},E=function(t){return t.getParam("paste_merge_formats",!0)},M=function(t){return t.getParam("paste_retain_style_properties")},I=function(t){return t.getParam("validate")},_=function(t){return t.getParam("allow_html_data_urls",!1,"boolean")},B=function(t){return t.getParam("paste_data_images",!1,"boolean")},L=function(t){return P.explode(t.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))},j="x-tinymce/html",F="\x3c!-- "+j+" --\x3e",U=function(t){return-1!==t.indexOf(F)},z=u(j),H=Object.hasOwnProperty,W=function(t,n){return H.call(t,n)},V=tinymce.util.Tools.resolve("tinymce.html.Entities"),$=function(t,n,e){var r=t.split(/\n\n/),o=function(t,n){var e=[],r="<"+t;if("object"==typeof n){for(var o in n)W(n,o)&&e.push(o+'="'+V.encodeAllRaw(n[o])+'"');e.length&&(r+=" "+e.join(" "))}return r+">"}(n,e),i="</"+n+">",u=P.map(r,(function(t){return t.split(/\n/).join("<br />")}));return 1===u.length?u[0]:P.map(u,(function(t){return o+t+i})).join("")},q=tinymce.util.Tools.resolve("tinymce.html.DomParser"),K=tinymce.util.Tools.resolve("tinymce.html.Serializer"),G=tinymce.util.Tools.resolve("tinymce.html.Node"),Y=tinymce.util.Tools.resolve("tinymce.html.Schema"),J=function(t,n){return P.each(n,(function(n){t=function(t){return t.constructor===RegExp}(n)?t.replace(n,""):t.replace(n[0],n[1])})),t},X=function(t){return t=J(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(t,n,e){return n||e?" ":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},Q=function(t){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(t)||/class="OutlineElement/.test(t)||/id="?docs\-internal\-guid\-/.test(t)},Z=function(t){var n=!1;return t=t.replace(/^[\u00a0 ]+/,""),P.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],(function(e){if(e.test(t))return n=!0,!1})),n},tt=function(t){return/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(t)},nt=function(t,n,e,r){var o={},i=t.dom.parseStyle(r);return P.each(i,(function(i,u){switch(u){case"mso-list":var a=/\w+ \w+([0-9]+)/i.exec(r);a&&(e._listLevel=parseInt(a[1],10)),/Ignore/i.test(i)&&e.firstChild&&(e._listIgnore=!0,e.firstChild._listIgnore=!0);break;case"horiz-align":u="text-align";break;case"vert-align":u="vertical-align";break;case"font-color":case"mso-foreground":u="color";break;case"mso-background":case"mso-highlight":u="background";break;case"font-weight":case"font-style":return void("normal"!==i&&(o[u]=i));case"mso-element":if(/^(comment|comment-list)$/i.test(i))return void e.remove()}0!==u.indexOf("mso-comment")?0!==u.indexOf("mso-")&&("all"===M(t)||n&&n[u])&&(o[u]=i):e.remove()})),/(bold)/i.test(o["font-weight"])&&(delete o["font-weight"],e.wrap(new G("b",1))),/(italic)/i.test(o["font-style"])&&(delete o["font-style"],e.wrap(new G("i",1))),t.dom.serializeStyle(o,e.name)||null},et=function(t,n){var e,r=M(t);r&&(e=P.makeMap(r.split(/[, ]/))),n=J(n,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi," "],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(t,n){return n.length>0?n.replace(/./," ").slice(Math.floor(n.length/2)).split("").join(" "):""}]]);var o=function(t){return t.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody")}(t),i=Y({valid_elements:o,valid_children:"-li[p]"});P.each(i.elements,(function(t){t.attributes.class||(t.attributes.class={},t.attributesOrder.push("class")),t.attributes.style||(t.attributes.style={},t.attributesOrder.push("style"))}));var u=q({},i);u.addAttributeFilter("style",(function(n){for(var r,o=n.length;o--;)(r=n[o]).attr("style",nt(t,e,r,r.attr("style"))),"span"===r.name&&r.parent&&!r.attributes.length&&r.unwrap()})),u.addAttributeFilter("class",(function(t){for(var n,e,r=t.length;r--;)e=(n=t[r]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(e)&&n.remove(),n.attr("class",null)})),u.addNodeFilter("del",(function(t){for(var n=t.length;n--;)t[n].remove()})),u.addNodeFilter("a",(function(t){for(var n,e,r,o=t.length;o--;)if(e=(n=t[o]).attr("href"),r=n.attr("name"),e&&-1!==e.indexOf("#_msocom_"))n.remove();else if(e&&0===e.indexOf("file://")&&((e=e.split("#")[1])&&(e="#"+e)),e||r){if(r&&!/^_?(?:toc|edn|ftn)/i.test(r)){n.unwrap();continue}n.attr({href:e,name:r})}else n.unwrap()}));var a=u.parse(n);return function(t){return t.getParam("paste_convert_word_fake_lists",!0)}(t)&&function(t){for(var n,e,r=1,o=function(t){var n="";if(3===t.type)return t.value;if(t=t.firstChild)do{n+=o(t)}while(t=t.next);return n},i=function(t,n){if(3===t.type&&n.test(t.value))return t.value=t.value.replace(n,""),!1;if(t=t.firstChild)do{if(!i(t,n))return!1}while(t=t.next);return!0},u=function(t){if(t._listIgnore)t.remove();else if(t=t.firstChild)do{u(t)}while(t=t.next)},a=function(t,o,a){var c=t._listLevel||r;c!==r&&(c<r?n&&(n=n.parent.parent):(e=n,n=null)),n&&n.name===o?n.append(t):(e=e||n,n=new G(o,1),a>1&&n.attr("start",""+a),t.wrap(n)),t.name="li",c>r&&e&&e.lastChild.append(n),r=c,u(t),i(t,/^\u00a0+/),i(t,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),i(t,/^\u00a0+/)},c=[],l=t.firstChild;null!=l;)if(c.push(l),null!==(l=l.walk()))for(;void 0!==l&&l.parent!==t;)l=l.walk();for(var f=0;f<c.length;f++)if("p"===(t=c[f]).name&&t.firstChild){var s=o(t);if(tt(s)){a(t,"ul");continue}if(Z(s)){var d=/([0-9]+)\./.exec(s),m=1;d&&(m=parseInt(d[1],10)),a(t,"ol",m);continue}if(t._listLevel){a(t,"ul",1);continue}n=null}else e=n,n=null}(a),n=K({validate:I(t)},i).serialize(a)},rt=function(t,n){return{content:t,cancelled:n}},ot=function(t,n,e,r){var o=function(t,n,e,r){return t.fire("PastePreProcess",{content:n,internal:e,wordContent:r})}(t,n,e,r),i=function(t,n){var e=q({},t.schema);e.addNodeFilter("meta",(function(t){P.each(t,(function(t){t.remove()}))}));var r=e.parse(n,{forced_root_block:!1,isRootContent:!0});return K({validate:I(t)},t.schema).serialize(r)}(t,o.content);return t.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?function(t,n,e,r){var o=t.dom.create("div",{style:"display:none"},n),i=function(t,n,e,r){return t.fire("PastePostProcess",{node:n,internal:e,wordContent:r})}(t,o,e,r);return rt(i.node.innerHTML,i.isDefaultPrevented())}(t,i,e,r):rt(i,o.isDefaultPrevented())},it=function(t,n,e){var r=Q(n),o=r?function(t,n){return function(t){return t.getParam("paste_enable_default_filters",!0)}(t)?et(t,n):n}(t,n):n;return ot(t,o,e,r)},ut=function(t,n){return t.insertContent(n,{merge:E(t),paste:!0}),!0},at=function(t){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t)},ct=function(t,n){return at(n)&&h(L(t),(function(t){return function(t,n){return T(t,n,t.length-n.length)}(n.toLowerCase(),"."+t.toLowerCase())}))},lt=function(t,n,e){return!(!1!==t.selection.isCollapsed()||!at(n))&&function(t,n,e){return t.undoManager.extra((function(){e(t,n)}),(function(){t.execCommand("mceInsertLink",!1,n)})),!0}(t,n,e)},ft=function(t,n,e){return!!ct(t,n)&&function(t,n,e){return t.undoManager.extra((function(){e(t,n)}),(function(){t.insertContent('<img src="'+n+'">')})),!0}(t,n,e)},st=function(t,n,e){e||!1===function(t){return t.getParam("smart_paste",!0)}(t)?ut(t,n):function(t,n){P.each([lt,ft,ut],(function(e){return!0!==e(t,n,ut)}))}(t,n)},dt=function(t){return"\n"===t||"\r"===t},mt=function(t,n){var e=function(t,n){return n<=0?"":new Array(n+1).join(t)}(" ",function(t){return t.getParam("paste_tab_spaces",4,"number")}(t)),r=n.replace(/\t/g,e);return function(t,n,e){return b(t,(function(t,r){e=n(e,t,r)})),e}(r,(function(t,n){return function(t){return-1!==" \f\t\v".indexOf(t)}(n)||" "===n?t.pcIsSpace||""===t.str||t.str.length===r.length-1||function(t,n){return n<t.length&&n>=0&&dt(t[n])}(r,t.str.length+1)?{pcIsSpace:!1,str:t.str+" "}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:dt(n),str:t.str+n}}),{pcIsSpace:!1,str:""}).str},gt=function(t,n,e,r){var o=it(t,n,e);!1===o.cancelled&&st(t,o.content,r)},pt=function(t,n,e){var r=e||U(n);gt(t,function(t){return t.replace(F,"")}(n),r,!1)},ht=function(t,n){var e=t.dom.encode(n).replace(/\r\n/g,"\n"),r=function(t,n,e){return n?$(t,!0===n?"p":n,e):function(t){return t.replace(/\r?\n/g,"<br>")}(t)}(mt(t,e),function(t){return t.getParam("forced_root_block")}(t),function(t){return t.getParam("forced_root_block_attrs")}(t));gt(t,r,!1,!0)},vt=function(t){var n={};if(t){if(t.getData){var e=t.getData("Text");e&&e.length>0&&-1===e.indexOf("data:text/mce-internal,")&&(n["text/plain"]=e)}if(t.types)for(var r=0;r<t.types.length;r++){var o=t.types[r];try{n[o]=t.getData(o)}catch(t){n[o]=""}}}return n},bt=function(t,n){return n in t&&t[n].length>0},yt=function(t){return bt(t,"text/html")||bt(t,"text/plain")},wt=function(t){var n=0;return function(){return t+n++}}("mceclip"),xt=function(t,n){var e=function(t){var n=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(t);return n?{type:n[1],data:decodeURIComponent(n[2])}:{type:null,data:null}}(n.uri),o=e.data,i=e.type,u=wt(),a=n.blob,c=new Image;if(c.src=n.uri,function(t,n){var e=function(t){return t.getParam("images_dataimg_filter")}(t);return!e||e(n)}(t,c)){var l=t.editorUpload.blobCache,f=void 0,s=l.getByData(o,i);if(s)f=s;else{var d=function(t){return t.getParam("images_reuse_filename")}(t)&&r(a.name),m=d?function(t,n){var e=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return r(e)?t.dom.encode(e[1]):null}(t,a.name):u,g=d?a.name:void 0;f=l.create(u,a,o,m,g),l.add(f)}pt(t,'<img src="'+f.blobUri()+'">',!1)}else pt(t,'<img src="'+n.uri+'">',!1)},Ct=function(t){return D.all(v(t,(function(t){return new D((function(n){var e=function(t){return r(t.getAsFile)}(t)?t.getAsFile():t,o=new window.FileReader;o.onload=function(){n({blob:e,uri:o.result})},o.readAsDataURL(e)}))})))},St=function(t){var n=L(t);return function(t){return function(t,n){return T(t,n,0)}(t.type,"image/")&&h(n,(function(n){return function(t){var n=t.toLowerCase(),e={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return P.hasOwn(e,n)?"image/"+e[n]:"image/"+n}(n)===t.type}))}},Tt=function(t,n,e){var r=function(t){return"paste"===t.type}(n)?n.clipboardData:n.dataTransfer;if(B(t)&&r){var o=function(t,n){var e=n.items?y(w(n.items),(function(t){return"file"===t.kind?[t.getAsFile()]:[]})):[],r=n.files?w(n.files):[];return function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e}(e.length>0?e:r,St(t))}(t,r);if(o.length>0)return n.preventDefault(),Ct(o).then((function(n){e&&t.selection.setRng(e),b(n,(function(n){xt(t,n)}))})),!0}return!1},kt=function(t){return A.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode},Ot=function(t,n,e){var r,o=S(),i=S();t.on("keyup",i.clear),t.on("keydown",(function(e){var u=function(t){kt(t)&&!t.isDefaultPrevented()&&n.remove()};if(kt(e)&&!e.isDefaultPrevented()){if((r=e.shiftKey&&86===e.keyCode)&&k.webkit&&-1!==navigator.userAgent.indexOf("Version/"))return;if(e.stopImmediatePropagation(),o.set(e),i.set(!0),k.ie&&r)return e.preventDefault(),void function(t,n){t.fire("paste",{ieFake:n})}(t,!0);n.remove(),n.create(),t.once("keyup",u),t.once("paste",(function(){t.off("keyup",u)}))}}));var u=function(t,e,r,o,i){var u;bt(e,"text/html")?u=e["text/html"]:(u=n.getHtml(),i=i||U(u),n.isDefaultContent(u)&&(o=!0)),u=X(u),n.remove();var a=!1===i&&function(t){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(t)}(u),c=at(u);(!u.length||a&&!c)&&(o=!0),(o||c)&&(u=bt(e,"text/plain")&&a?e["text/plain"]:function(t){var n=Y(),e=q({},n),r="",o=n.getShortEndedElements(),i=P.makeMap("script noscript style textarea video audio iframe object"," "),u=n.getBlockElements(),a=function(t){var n=t.name,e=t;if("br"!==n){if("wbr"!==n)if(o[n]&&(r+=" "),i[n])r+=" ";else{if(3===t.type&&(r+=t.value),!t.shortEnded&&(t=t.firstChild))do{a(t)}while(t=t.next);u[n]&&e.next&&(r+="\n","p"===n&&(r+="\n"))}}else r+="\n"};return t=J(t,[/<!\[[^\]]+\]>/g]),a(e.parse(t)),r}(u)),n.isDefaultContent(u)?r||t.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):o?ht(t,u):pt(t,u,i)};t.on("paste",(function(a){var c=o.isSet()||i.isSet();c&&o.clear();var l=function(t,n){return vt(n.clipboardData||t.getDoc().dataTransfer)}(t,a),f="text"===e.get()||r,s=bt(l,z());r=!1,a.isDefaultPrevented()||function(t){var n=t.clipboardData;return-1!==navigator.userAgent.indexOf("Android")&&n&&n.items&&0===n.items.length}(a)?n.remove():yt(l)||!Tt(t,a,n.getLastRng()||t.selection.getRng())?(c||a.preventDefault(),!k.ie||c&&!a.ieFake||bt(l,"text/html")||(n.create(),t.dom.bind(n.getEl(),"paste",(function(t){t.stopPropagation()})),t.getDoc().execCommand("Paste",!1,null),l["text/html"]=n.getHtml()),bt(l,"text/html")?(a.preventDefault(),s||(s=U(l["text/html"])),u(t,l,c,f,s)):O.setEditorTimeout(t,(function(){u(t,l,c,f,s)}),0)):n.remove()}))},Dt=function(t){return k.ie&&t.inline?document.body:t.getBody()},At=function(t,n,e){(function(t){return Dt(t)!==t.getBody()})(t)&&t.dom.bind(n,"paste keyup",(function(n){Nt(t,e)||t.fire("paste")}))},Rt=function(t){return t.dom.get("mcepastebin")},Pt=function(t,n){return n===t},Nt=function(t,n){var e=Rt(t);return function(t){return t&&"mcepastebin"===t.id}(e)&&Pt(n,e.innerHTML)},Et=function(n){var e=t(null),r="%MCEPASTEBIN%";return{create:function(){return function(t,n,e){var r=t.dom,o=t.getBody();n.set(t.selection.getRng());var i=t.dom.add(Dt(t),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},e);(k.ie||k.gecko)&&r.setStyle(i,"left","rtl"===r.getStyle(o,"direction",!0)?65535:-65535),r.bind(i,"beforedeactivate focusin focusout",(function(t){t.stopPropagation()})),At(t,i,e),i.focus(),t.selection.select(i,!0)}(n,e,r)},remove:function(){return function(t,n){if(Rt(t)){for(var e=void 0,r=n.get();e=t.dom.get("mcepastebin");)t.dom.remove(e),t.dom.unbind(e);r&&t.selection.setRng(r)}n.set(null)}(n,e)},getEl:function(){return Rt(n)},getHtml:function(){return function(t){var n=function(n,e){n.appendChild(e),t.dom.remove(e,!0)},e=P.grep(Dt(t).childNodes,(function(t){return"mcepastebin"===t.id})),r=e.shift();P.each(e,(function(t){n(r,t)}));for(var o=t.dom.select("div[id=mcepastebin]",r),i=o.length-1;i>=0;i--){var u=t.dom.create("div");r.insertBefore(u,o[i]),n(u,o[i])}return r?r.innerHTML:""}(n)},getLastRng:e.get,isDefault:function(){return Nt(n,r)},isDefaultContent:function(t){return Pt(r,t)}}},Mt=function(t,n){var e=Et(t);return t.on("PreInit",(function(){return function(t,n,e){var r;Ot(t,n,e),t.parser.addNodeFilter("img",(function(n,e,o){var i=function(t){t.attr("data-mce-object")||r===k.transparentSrc||t.remove()},u=function(t){return 0===t.indexOf("webkit-fake-url")},a=function(t){return 0===t.indexOf("data:")};if(!B(t)&&function(t){return t.data&&!0===t.data.paste}(o))for(var c=n.length;c--;)(r=n[c].attr("src"))&&(u(r)||!_(t)&&a(r))&&i(n[c])}))}(t,e,n)})),{pasteFormat:n,pasteHtml:function(n,e){return pt(t,n,e)},pasteText:function(n){return ht(t,n)},pasteImageData:function(n,e){return Tt(t,n,e)},getDataTransferItems:vt,hasHtmlOrText:yt,hasContentType:bt}},It=function(t,n){t.addCommand("mceTogglePlainTextPaste",(function(){!function(t,n){"text"===n.pasteFormat.get()?(n.pasteFormat.set("html"),R(t,!1)):(n.pasteFormat.set("text"),R(t,!0)),t.focus()}(t,n)})),t.addCommand("mceInsertClipboardContent",(function(t,e){e.content&&n.pasteHtml(e.content,e.internal),e.text&&n.pasteText(e.text)}))},_t=function(t,n,e){if(!function(t){return!1===k.iOS&&"function"==typeof(null==t?void 0:t.setData)}(t))return!1;try{return t.clearData(),t.setData("text/html",n),t.setData("text/plain",e),t.setData(z(),n),!0}catch(t){return!1}},Bt=function(t,n,e,r){_t(t.clipboardData,n.html,n.text)?(t.preventDefault(),r()):e(n.html,r)},Lt=function(t){return function(n,e){var r=function(t){return F+t}(n),o=t.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=t.dom.create("div",{contenteditable:"true"},r);t.dom.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(i),t.dom.add(t.getBody(),o);var u=t.selection.getRng();i.focus();var a=t.dom.createRng();a.selectNodeContents(i),t.selection.setRng(a),O.setTimeout((function(){t.selection.setRng(u),o.parentNode.removeChild(o),e()}),0)}},jt=function(t){return{html:t.selection.getContent({contextual:!0}),text:t.selection.getContent({format:"text"})}},Ft=function(t){return!t.selection.isCollapsed()||function(t){return!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody())}(t)},Ut=function(t){t.on("cut",function(t){return function(n){Ft(t)&&Bt(n,jt(t),Lt(t),(function(){if(k.browser.isChrome()||k.browser.isFirefox()){var n=t.selection.getRng();O.setEditorTimeout(t,(function(){t.selection.setRng(n),t.execCommand("Delete")}),0)}else t.execCommand("Delete")}))}}(t)),t.on("copy",function(t){return function(n){Ft(t)&&Bt(n,jt(t),Lt(t),i)}}(t))},zt=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Ht=function(t,n){return zt.getCaretRangeFromPoint(n.clientX,n.clientY,t.getDoc())},Wt=function(t,n){t.focus(),t.selection.setRng(n)},Vt=function(t,n){t.on("PastePreProcess",(function(e){e.content=n(t,e.content,e.internal,e.wordContent)}))},$t=function(t,n){if(!Q(n))return n;var e=[];P.each(t.schema.getBlockElements(),(function(t,n){e.push(n)}));var r=new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+e.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g");return n=J(n,[[r,"$1"]]),n=J(n,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])},qt=function(t,n,e,r){if(r||e)return n;var o,i=function(t){return t.getParam("paste_webkit_styles")}(t);if(!1===function(t){return t.getParam("paste_remove_styles_if_webkit",!0)}(t)||"all"===i)return n;if(i&&(o=i.split(/[, ]/)),o){var u=t.dom,a=t.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(t,n,e,r){var i=u.parseStyle(u.decode(e)),c={};if("none"===o)return n+r;for(var l=0;l<o.length;l++){var f=i[o[l]],s=u.getStyle(a,o[l],!0);/color/.test(o[l])&&(f=u.toHex(f),s=u.toHex(s)),s!==f&&(c[o[l]]=f)}var d=u.serializeStyle(c,"span");return d?n+' style="'+d+'"'+r:n+r}))}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(t,n,e,r){return n+' style="'+e+'"'+r}))},Kt=function(t,n){t.$("a",n).find("font,u").each((function(n,e){t.dom.remove(e,!0)}))},Gt=function(t,n){return function(e){e.setActive("text"===n.pasteFormat.get());var r=function(t){return e.setActive(t.state)};return t.on("PastePlainTextToggle",r),function(){return t.off("PastePlainTextToggle",r)}}};n.add("paste",(function(n){if(!1===function(t){return!!t.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0)}(n)){var e=t(!1),r=t(function(t){return t.getParam("paste_as_text",!1)}(n)?"text":"html"),o=Mt(n,r);return function(t){k.webkit&&Vt(t,qt),k.ie&&(Vt(t,$t),function(t,n){t.on("PastePostProcess",(function(e){n(t,e.node)}))}(t,Kt))}(n),function(t,n){var e=function(){return t.execCommand("mceTogglePlainTextPaste")};t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:e,onSetup:Gt(t,n)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:e,onSetup:Gt(t,n)})}(n,o),It(n,o),function(t){var n=t.plugins.paste,e=function(t){return t.getParam("paste_preprocess")}(t);e&&t.on("PastePreProcess",(function(t){e.call(n,n,t)}));var r=function(t){return t.getParam("paste_postprocess")}(t);r&&t.on("PastePostProcess",(function(t){r.call(n,n,t)}))}(n),Ut(n),function(t,n,e){(function(t){return t.getParam("paste_block_drop",!1)})(t)&&t.on("dragend dragover draggesture dragdrop drop drag",(function(t){t.preventDefault(),t.stopPropagation()})),N(t)||t.on("drop",(function(t){var n=t.dataTransfer;n&&n.files&&n.files.length>0&&t.preventDefault()})),t.on("drop",(function(r){var o=Ht(t,r);if(!r.isDefaultPrevented()&&!e.get()){var i=n.getDataTransferItems(r.dataTransfer),u=n.hasContentType(i,z());if((n.hasHtmlOrText(i)&&!function(t){var n=t["text/plain"];return!!n&&0===n.indexOf("file://")}(i)||!n.pasteImageData(r,o))&&o&&function(t){return t.getParam("paste_filter_drop",!0)}(t)){var a=i["mce-internal"]||i["text/html"]||i["text/plain"];a&&(r.preventDefault(),O.setEditorTimeout(t,(function(){t.undoManager.transact((function(){i["mce-internal"]&&t.execCommand("Delete"),Wt(t,o),a=X(a),i["text/html"]?n.pasteHtml(a,u):n.pasteText(a)}))})))}}})),t.on("dragstart",(function(t){e.set(!0)})),t.on("dragover dragend",(function(n){N(t)&&!1===e.get()&&(n.preventDefault(),Wt(t,Ht(t,n))),"dragend"===n.type&&e.set(!1)}))}(n,o,e),function(t){return{clipboard:t}}(o)}}))}()},"84ec":function(t,n,e){e("2401")},8863:function(t,n,e){e("9dd9")},"90e7":function(t,n,e){e("3c41")},9434:function(t,n,e){e("e8b0")},"94ce":function(t,n){!function(){"use strict";var t=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},n=function(t){return function(n){return typeof n===t}},e=function(t){return function(n){return t===n}},r=t("string"),o=t("object"),i=t("array"),u=e(null),a=n("boolean"),c=e(void 0),l=function(t){return!function(t){return null==t}(t)},f=n("function"),s=n("number"),d=function(){},m=function(t){return function(){return t}},g=function(t){return t},p=function(t,n){return t===n};function h(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=n.concat(e);return t.apply(null,o)}}var v=function(t){return function(n){return!t(n)}},b=m(!1),y=m(!0),w=function(){return x},x=function(){var t=function(t){return t()},n=g;return{fold:function(t,n){return t()},isSome:b,isNone:y,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:t,map:w,each:d,bind:w,exists:b,forall:y,filter:function(){return w()},toArray:function(){return[]},toString:m("none()")}}(),C=function(t){var n=m(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:y,isNone:b,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return C(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:x},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},S={some:C,none:w,from:function(t){return null==t?x:C(t)}},T=Array.prototype.slice,k=Array.prototype.indexOf,O=Array.prototype.push,D=function(t,n){return function(t,n){return k.call(t,n)}(t,n)>-1},A=function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e))return!0}return!1},R=function(t,n){for(var e=[],r=0;r<t;r++)e.push(n(r));return e},P=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r},N=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},E=function(t,n){for(var e=[],r=[],o=0,i=t.length;o<i;o++){var u=t[o];(n(u,o)?e:r).push(u)}return{pass:e,fail:r}},M=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e},I=function(t,n,e){return function(t,n){for(var e=t.length-1;e>=0;e--){n(t[e],e)}}(t,(function(t,r){e=n(e,t,r)})),e},_=function(t,n,e){return N(t,(function(t,r){e=n(e,t,r)})),e},B=function(t,n){return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return S.some(i);if(e(i,r))break}return S.none()}(t,n,b)},L=function(t,n){for(var e=0,r=t.length;e<r;e++){if(n(t[e],e))return S.some(e)}return S.none()},j=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!i(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);O.apply(n,t[e])}return n},F=function(t,n){return j(P(t,n))},U=function(t,n){for(var e=0,r=t.length;e<r;++e){if(!0!==n(t[e],e))return!1}return!0},z=function(t,n){for(var e={},r=0,o=t.length;r<o;r++){var i=t[r];e[String(i)]=n(i,r)}return e},H=function(t){return[t]},W=function(t,n){return n>=0&&n<t.length?S.some(t[n]):S.none()},V=function(t){return W(t,0)},$=function(t){return W(t,t.length-1)},q=function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return S.none()},K=function(){return(K=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)};function G(t,n,e){if(e||2===arguments.length)for(var r,o=0,i=n.length;o<i;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return t.concat(r||Array.prototype.slice.call(n))}var Y=function(t){var n,e=!1;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e||(e=!0,n=t.apply(null,r)),n}},J=function(){return X(0,0)},X=function(t,n){return{major:t,minor:n}},Q={nu:X,detect:function(t,n){var e=String(n).toLowerCase();return 0===t.length?J():function(t,n){var e=function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(r.test(n))return r}}(t,n);if(!e)return{major:0,minor:0};var r=function(t){return Number(n.replace(e,"$"+t))};return X(r(1),r(2))}(t,e)},unknown:J},Z=function(t,n){var e=String(n).toLowerCase();return B(t,(function(t){return t.search(e)}))},tt=function(t,n,e){return""===n||t.length>=n.length&&t.substr(e,e+n.length)===n},nt=function(t,n){return-1!==t.indexOf(n)},et=function(t,n){return tt(t,n,0)},rt=function(t,n){return tt(t,n,t.length-n.length)},ot=function(t){return function(n){return n.replace(t,"")}}(/^\s+|\s+$/g),it=function(t){return t.length>0},ut=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,at=function(t){return function(n){return nt(n,t)}},ct=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return nt(t,"edge/")&&nt(t,"chrome")&&nt(t,"safari")&&nt(t,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ut],search:function(t){return nt(t,"chrome")&&!nt(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return nt(t,"msie")||nt(t,"trident")}},{name:"Opera",versionRegexes:[ut,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:at("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:at("firefox")},{name:"Safari",versionRegexes:[ut,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(nt(t,"safari")||nt(t,"mobile/"))&&nt(t,"applewebkit")}}],lt=[{name:"Windows",search:at("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return nt(t,"iphone")||nt(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:at("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:at("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:at("linux"),versionRegexes:[]},{name:"Solaris",search:at("sunos"),versionRegexes:[]},{name:"FreeBSD",search:at("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:at("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ft={browsers:m(ct),oses:m(lt)},st="Firefox",dt=function(t){var n=t.current,e=t.version,r=function(t){return function(){return n===t}};return{current:n,version:e,isEdge:r("Edge"),isChrome:r("Chrome"),isIE:r("IE"),isOpera:r("Opera"),isFirefox:r(st),isSafari:r("Safari")}},mt={unknown:function(){return dt({current:void 0,version:Q.unknown()})},nu:dt,edge:m("Edge"),chrome:m("Chrome"),ie:m("IE"),opera:m("Opera"),firefox:m(st),safari:m("Safari")},gt="Windows",pt="Android",ht="Solaris",vt="FreeBSD",bt="ChromeOS",yt=function(t){var n=t.current,e=t.version,r=function(t){return function(){return n===t}};return{current:n,version:e,isWindows:r(gt),isiOS:r("iOS"),isAndroid:r(pt),isOSX:r("OSX"),isLinux:r("Linux"),isSolaris:r(ht),isFreeBSD:r(vt),isChromeOS:r(bt)}},wt={unknown:function(){return yt({current:void 0,version:Q.unknown()})},nu:yt,windows:m(gt),ios:m("iOS"),android:m(pt),linux:m("Linux"),osx:m("OSX"),solaris:m(ht),freebsd:m(vt),chromeos:m(bt)},xt=function(t,n,e){var r=ft.browsers(),o=ft.oses(),i=n.bind((function(t){return function(t,n){return q(n.brands,(function(n){var e=n.brand.toLowerCase();return B(t,(function(t){var n;return e===(null===(n=t.brand)||void 0===n?void 0:n.toLowerCase())})).map((function(t){return{current:t.name,version:Q.nu(parseInt(n.version,10),0)}}))}))}(r,t)})).orThunk((function(){return function(t,n){return Z(t,n).map((function(t){var e=Q.detect(t.versionRegexes,n);return{current:t.name,version:e}}))}(r,t)})).fold(mt.unknown,mt.nu),u=function(t,n){return Z(t,n).map((function(t){var e=Q.detect(t.versionRegexes,n);return{current:t.name,version:e}}))}(o,t).fold(wt.unknown,wt.nu);return{browser:i,os:u,deviceType:function(t,n,e,r){var o=t.isiOS()&&!0===/ipad/i.test(e),i=t.isiOS()&&!o,u=t.isiOS()||t.isAndroid(),a=u||r("(pointer:coarse)"),c=o||!i&&u&&r("(min-device-width:768px)"),l=i||u&&!c,f=n.isSafari()&&t.isiOS()&&!1===/safari/i.test(e),s=!l&&!c&&!f;return{isiPad:m(o),isiPhone:m(i),isTablet:m(c),isPhone:m(l),isTouch:m(a),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:m(f),isDesktop:m(s)}}(u,i,t,e)}},Ct=function(t){return window.matchMedia(t).matches},St=Y((function(){return xt(navigator.userAgent,S.from(navigator.userAgentData),Ct)})),Tt=function(){return St()},kt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Ot={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return kt(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return kt(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return kt(e)},fromDom:kt,fromPoint:function(t,n,e){return S.from(t.dom.elementFromPoint(n,e)).map(kt)}},Dt=function(t,n){var e=t.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")},At=function(t){return 1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount},Rt=function(t,n){var e=void 0===n?document:n.dom;return At(e)?S.none():S.from(e.querySelector(t)).map(Ot.fromDom)},Pt=function(t,n){return t.dom===n.dom},Nt=function(t,n){return function(t,n){return function(t,n,e){return 0!=(t.compareDocumentPosition(n)&e)}(t,n,Node.DOCUMENT_POSITION_CONTAINED_BY)}(t.dom,n.dom)},Et=function(t,n){return Tt().browser.isIE()?Nt(t,n):function(t,n){var e=t.dom,r=n.dom;return e!==r&&e.contains(r)}(t,n)},Mt=Dt,It=Object.keys,_t=Object.hasOwnProperty,Bt=function(t,n){for(var e=It(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}},Lt=function(t,n){return jt(t,(function(t,e){return{k:e,v:n(t,e)}}))},jt=function(t,n){var e={};return Bt(t,(function(t,r){var o=n(t,r);e[o.k]=o.v})),e},Ft=function(t,n){var e={};return function(t,n,e,r){Bt(t,(function(t,o){(n(t,o)?e:r)(t,o)}))}(t,n,function(t){return function(n,e){t[e]=n}}(e),d),e},Ut=function(t,n){var e=[];return Bt(t,(function(t,r){e.push(n(t,r))})),e},zt=function(t){return Ut(t,g)},Ht=function(t){return It(t).length},Wt=function(t,n){return Vt(t,n)?S.from(t[n]):S.none()},Vt=function(t,n){return _t.call(t,n)},$t=function(t,n){return Vt(t,n)&&void 0!==t[n]&&null!==t[n]},qt=["tfoot","thead","tbody","colgroup"],Kt=function(t,n,e){return{element:t,rowspan:n,colspan:e}},Gt=function(t,n,e,r){return{element:t,rowspan:n,colspan:e,isNew:r}},Yt=function(t,n,e){return{element:t,cells:n,section:e}},Jt=function(t,n,e){return{element:t,isNew:n,isLocked:e}},Xt=function(t,n,e,r){return{element:t,cells:n,section:e,isNew:r}};"undefined"!=typeof window?window:Function("return this;")();var Qt=function(t){return t.dom.nodeName.toLowerCase()},Zt=function(t){return t.dom.nodeType},tn=function(t){return function(n){return Zt(n)===t}},nn=function(t){return 8===Zt(t)||"#comment"===Qt(t)},en=tn(1),rn=tn(3),on=tn(9),un=tn(11),an=function(t){return function(n){return en(n)&&Qt(n)===t}},cn=function(t){return Ot.fromDom(t.dom.ownerDocument)},ln=function(t){return on(t)?t:cn(t)},fn=function(t){return S.from(t.dom.parentNode).map(Ot.fromDom)},sn=function(t,n){for(var e=f(n)?n:b,r=t.dom,o=[];null!==r.parentNode&&void 0!==r.parentNode;){var i=r.parentNode,u=Ot.fromDom(i);if(o.push(u),!0===e(u))break;r=i}return o},dn=function(t){return S.from(t.dom.previousSibling).map(Ot.fromDom)},mn=function(t){return S.from(t.dom.nextSibling).map(Ot.fromDom)},gn=function(t){return P(t.dom.childNodes,Ot.fromDom)},pn=function(t,n){var e=t.dom.childNodes;return S.from(e[n]).map(Ot.fromDom)},hn=f(Element.prototype.attachShadow)&&f(Node.prototype.getRootNode),vn=m(hn),bn=hn?function(t){return Ot.fromDom(t.dom.getRootNode())}:ln,yn=function(t){var n=bn(t);return function(t){return un(t)&&l(t.dom.host)}(n)?S.some(n):S.none()},wn=function(t){return Ot.fromDom(t.dom.host)},xn=function(t){return l(t.dom.shadowRoot)},Cn=function(t){var n=rn(t)?t.dom.parentNode:t.dom;if(null==n||null===n.ownerDocument)return!1;var e=n.ownerDocument;return yn(Ot.fromDom(n)).fold((function(){return e.body.contains(n)}),function(t,n){return function(e){return t(n(e))}}(Cn,wn))},Sn=function(t){var n=t.dom.body;if(null==n)throw new Error("Body is not available yet");return Ot.fromDom(n)},Tn=function(t,n){var e=[];return N(gn(t),(function(t){n(t)&&(e=e.concat([t])),e=e.concat(Tn(t,n))})),e},kn=function(t,n,e){return function(t,n,e){return M(sn(t,e),n)}(t,(function(t){return Dt(t,n)}),e)},On=function(t,n){return function(t,n){return M(gn(t),n)}(t,(function(t){return Dt(t,n)}))},Dn=function(t,n){return function(t,n){var e=void 0===n?document:n.dom;return At(e)?[]:P(e.querySelectorAll(t),Ot.fromDom)}(n,t)};function An(t,n,e,r,o){return t(e,r)?S.some(e):f(o)&&o(e)?S.none():n(e,r,o)}var Rn=function(t,n,e){for(var r=t.dom,o=f(e)?e:b;r.parentNode;){r=r.parentNode;var i=Ot.fromDom(r);if(n(i))return S.some(i);if(o(i))break}return S.none()},Pn=function(t,n,e){return Rn(t,(function(t){return Dt(t,n)}),e)},Nn=function(t,n){return function(t,n){return B(t.dom.childNodes,(function(t){return n(Ot.fromDom(t))})).map(Ot.fromDom)}(t,(function(t){return Dt(t,n)}))},En=function(t,n){return Rt(n,t)},Mn=function(t,n,e){return An((function(t,n){return Dt(t,n)}),Pn,t,n,e)},In=function(t,n,e){if(!(r(e)||a(e)||s(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")},_n=function(t,n,e){In(t.dom,n,e)},Bn=function(t,n){var e=t.dom;Bt(n,(function(t,n){In(e,n,t)}))},Ln=function(t,n){var e=t.dom.getAttribute(n);return null===e?void 0:e},jn=function(t,n){return S.from(Ln(t,n))},Fn=function(t,n){t.dom.removeAttribute(n)},Un=function(t){return _(t.dom.attributes,(function(t,n){return t[n.name]=n.value,t}),{})},zn=function(t,n,e){return void 0===e&&(e=p),t.exists((function(t){return e(t,n)}))},Hn=function(t){for(var n=[],e=function(t){n.push(t)},r=0;r<t.length;r++)t[r].each(e);return n},Wn=function(t,n,e){return t.isSome()&&n.isSome()?S.some(e(t.getOrDie(),n.getOrDie())):S.none()},Vn=function(t){return t.bind(g)},$n=function(t,n){return t?S.some(n):S.none()},qn=function(t){return void 0!==t.style&&f(t.style.getPropertyValue)},Kn=function(t,n,e){if(!r(e))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",e,":: Element ",t),new Error("CSS value must be a string: "+e);qn(t)&&t.style.setProperty(n,e)},Gn=function(t,n,e){var r=t.dom;Kn(r,n,e)},Yn=function(t,n){var e=t.dom;Bt(n,(function(t,n){Kn(e,n,t)}))},Jn=function(t,n){var e=t.dom,r=window.getComputedStyle(e).getPropertyValue(n);return""!==r||Cn(t)?r:Xn(e,n)},Xn=function(t,n){return qn(t)?t.style.getPropertyValue(n):""},Qn=function(t,n){var e=t.dom,r=Xn(e,n);return S.from(r).filter((function(t){return t.length>0}))},Zn=function(t,n){(function(t,n){qn(t)&&t.style.removeProperty(n)})(t.dom,n),zn(jn(t,"style").map(ot),"")&&Fn(t,"style")},te=function(t,n,e){return void 0===e&&(e=0),jn(t,n).map((function(t){return parseInt(t,10)})).getOr(e)},ne=function(t,n){return te(t,n,1)},ee=function(t){return an("col")(t)?te(t,"span",1)>1:ne(t,"colspan")>1},re=function(t){return ne(t,"rowspan")>1},oe=function(t,n){return parseInt(Jn(t,n),10)},ie=m(10),ue=m(10),ae=function(t,n){return ce(t,n,y)},ce=function(t,n,e){return F(gn(t),(function(t){return Dt(t,n)?e(t)?[t]:[]:ce(t,n,e)}))},le=function(t,n){return function(t,n,e){if(void 0===e&&(e=b),e(n))return S.none();if(D(t,Qt(n)))return S.some(n);return Pn(n,t.join(","),(function(t){return Dt(t,"table")||e(t)}))}(["td","th"],t,n)},fe=function(t){return ae(t,"th,td")},se=function(t){return Dt(t,"colgroup")?On(t,"col"):F(ge(t),(function(t){return On(t,"col")}))},de=function(t,n){return Mn(t,"table",n)},me=function(t){return ae(t,"tr")},ge=function(t){return de(t).fold(m([]),(function(t){return On(t,"colgroup")}))},pe=function(t,n){return P(t,(function(t){if("colgroup"===Qt(t)){var e=P(se(t),(function(t){var n=te(t,"span",1);return Kt(t,1,n)}));return Yt(t,e,"colgroup")}return e=P(fe(t),(function(t){var n=te(t,"rowspan",1),e=te(t,"colspan",1);return Kt(t,n,e)})),Yt(t,e,n(t))}))},he=function(t){return fn(t).map((function(t){var n=Qt(t);return function(t){return D(qt,t)}(n)?n:"tbody"})).getOr("tbody")},ve=function(t){var n=me(t),e=G(G([],ge(t),!0),n,!0);return pe(e,he)},be=function(t,n,e){var r=t.cells,o=r.slice(0,n),i=r.slice(n),u=o.concat(e).concat(i);return xe(t,u)},ye=function(t,n,e){return be(t,n,[e])},we=function(t,n,e){t.cells[n]=e},xe=function(t,n){return Xt(t.element,n,t.section,t.isNew)},Ce=function(t,n){return t.cells[n]},Se=function(t,n){return Ce(t,n).element},Te=function(t){return t.cells.length},ke=function(t){var n=E(t,(function(t){return"colgroup"===t.section}));return{rows:n.fail,cols:n.pass}},Oe=function(t,n,e){var r=P(t.cells,e);return Xt(n(t.element),r,t.section,!0)},De="data-snooker-locked-cols",Ae=function(t){return jn(t,De).bind((function(t){return S.from(t.match(/\d+/g))})).map((function(t){return z(t,y)}))},Re=function(t){var n=_(ke(t).rows,(function(t,n){return N(n.cells,(function(n,e){n.isLocked&&(t[e]=!0)})),t}),{});return function(t,n){var e=T.call(t,0);return e.sort(n),e}(Ut(n,(function(t,n){return parseInt(n,10)})))},Pe=function(t,n){return t+","+n},Ne=function(t,n){var e=F(t.all,(function(t){return t.cells}));return M(e,n)},Ee=function(t){var n={},e=[],r=V(t).map((function(t){return t.element})).bind(de).bind(Ae).getOr({}),o=0,i=0,u=0,a=E(t,(function(t){return"colgroup"===t.section})),c=a.pass,l=a.fail;N(l,(function(t){var a=[];N(t.cells,(function(t){for(var e=0;void 0!==n[Pe(u,e)];)e++;for(var o=$t(r,e.toString()),c=function(t,n,e,r,o,i){return{element:t,rowspan:n,colspan:e,row:r,column:o,isLocked:i}}(t.element,t.rowspan,t.colspan,u,e,o),l=0;l<t.colspan;l++)for(var f=0;f<t.rowspan;f++){var s=e+l,d=Pe(u+f,s);n[d]=c,i=Math.max(i,s+1)}a.push(c)})),o++,e.push(Yt(t.element,a,t.section)),u++}));var f=$(c).map((function(t){var n=function(t){var n={},e=0;return N(t.cells,(function(t){var r=t.colspan;R(r,(function(o){var i=e+o;n[i]=function(t,n,e){return{element:t,colspan:n,column:e}}(t.element,r,i)})),e+=r})),n}(t);return{colgroups:[function(t,n){return{element:t,columns:n}}(t.element,zt(n))],columns:n}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),s=f.columns,d=f.colgroups;return{grid:function(t,n){return{rows:t,columns:n}}(o,i),access:n,all:e,columns:s,colgroups:d}},Me={fromTable:function(t){var n=ve(t);return Ee(n)},generate:Ee,getAt:function(t,n,e){return S.from(t.access[Pe(n,e)])},findItem:function(t,n,e){var r=Ne(t,(function(t){return e(n,t.element)}));return r.length>0?S.some(r[0]):S.none()},filterItems:Ne,justCells:function(t){return F(t.all,(function(t){return t.cells}))},justColumns:function(t){return zt(t.columns)},hasColumns:function(t){return It(t.columns).length>0},getColumnAt:function(t,n){return S.from(t.columns[n])}},Ie=function(t,n){var e=n.column,r=n.column+n.colspan-1,o=n.row,i=n.row+n.rowspan-1;return e<=t.finishCol&&r>=t.startCol&&o<=t.finishRow&&i>=t.startRow},_e=function(t,n){return n.column>=t.startCol&&n.column+n.colspan-1<=t.finishCol&&n.row>=t.startRow&&n.row+n.rowspan-1<=t.finishRow},Be=function(t,n,e){var r=Me.findItem(t,n,Pt),o=Me.findItem(t,e,Pt);return r.bind((function(t){return o.map((function(n){return function(t,n){return function(t,n,e,r){return{startRow:t,startCol:n,finishRow:e,finishCol:r}}(Math.min(t.row,n.row),Math.min(t.column,n.column),Math.max(t.row+t.rowspan-1,n.row+n.rowspan-1),Math.max(t.column+t.colspan-1,n.column+n.colspan-1))}(t,n)}))}))},Le=function(t,n,e){return Be(t,n,e).bind((function(n){return function(t,n){for(var e=!0,r=h(_e,n),o=n.startRow;o<=n.finishRow;o++)for(var i=n.startCol;i<=n.finishCol;i++)e=e&&Me.getAt(t,o,i).exists(r);return e?S.some(n):S.none()}(t,n)}))},je=function(t,n,e){return Be(t,n,e).map((function(n){var e=Me.filterItems(t,h(Ie,n));return P(e,(function(t){return t.element}))}))},Fe=function(t,n){return Me.findItem(t,n,(function(t,n){return Et(n,t)})).map((function(t){return t.element}))},Ue=function(t,n,e){return de(t).bind((function(r){return function(t,n,e,r){return Me.findItem(t,n,Pt).bind((function(n){var o=e>0?n.row+n.rowspan-1:n.row,i=r>0?n.column+n.colspan-1:n.column;return Me.getAt(t,o+e,i+r).map((function(t){return t.element}))}))}(We(r),t,n,e)}))},ze=function(t,n,e){var r=We(t);return je(r,n,e)},He=function(t,n,e,r,o){var i=We(t),u=Pt(t,e)?S.some(n):Fe(i,n),a=Pt(t,o)?S.some(r):Fe(i,r);return u.bind((function(t){return a.bind((function(n){return je(i,t,n)}))}))},We=Me.fromTable,Ve=function(t,n){fn(t).each((function(e){e.dom.insertBefore(n.dom,t.dom)}))},$e=function(t,n){mn(t).fold((function(){fn(t).each((function(t){Ke(t,n)}))}),(function(t){Ve(t,n)}))},qe=function(t,n){(function(t){return pn(t,0)})(t).fold((function(){Ke(t,n)}),(function(e){t.dom.insertBefore(n.dom,e.dom)}))},Ke=function(t,n){t.dom.appendChild(n.dom)},Ge=function(t,n){Ve(t,n),Ke(n,t)},Ye=function(t,n){N(n,(function(e,r){var o=0===r?t:n[r-1];$e(o,e)}))},Je=function(t,n){N(n,(function(n){Ke(t,n)}))},Xe=function(t){t.dom.textContent="",N(gn(t),(function(t){Qe(t)}))},Qe=function(t){var n=t.dom;null!==n.parentNode&&n.parentNode.removeChild(n)},Ze=function(t){var n=gn(t);n.length>0&&function(t,n){N(n,(function(n){Ve(t,n)}))}(t,n),Qe(t)},tr=function(t,n){var e=function(n){return t(n)?S.from(n.dom.nodeValue):S.none()};return{get:function(r){if(!t(r))throw new Error("Can only get "+n+" value of a "+n+" node");return e(r).getOr("")},getOption:e,set:function(e,r){if(!t(e))throw new Error("Can only set raw "+n+" value of a "+n+" node");e.dom.nodeValue=r}}}(rn,"text"),nr=function(t){return tr.get(t)},er=function(t){return tr.getOption(t)},rr=function(t,n){return tr.set(t,n)},or=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function ir(){return{up:m({selector:Pn,closest:Mn,predicate:Rn,all:sn}),down:m({selector:Dn,predicate:Tn}),styles:m({get:Jn,getRaw:Qn,set:Gn,remove:Zn}),attrs:m({get:Ln,set:_n,remove:Fn,copyTo:function(t,n){var e=Un(t);Bn(n,e)}}),insert:m({before:Ve,after:$e,afterAll:Ye,append:Ke,appendAll:Je,prepend:qe,wrap:Ge}),remove:m({unwrap:Ze,remove:Qe}),create:m({nu:Ot.fromTag,clone:function(t){return Ot.fromDom(t.dom.cloneNode(!1))},text:Ot.fromText}),query:m({comparePosition:function(t,n){return t.dom.compareDocumentPosition(n.dom)},prevSibling:dn,nextSibling:mn}),property:m({children:gn,name:Qt,parent:fn,document:function(t){return ln(t).dom},isText:rn,isComment:nn,isElement:en,isSpecial:function(t){var n=Qt(t);return D(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],n)},getLanguage:function(t){return en(t)?jn(t,"lang"):S.none()},getText:nr,setText:rr,isBoundary:function(t){return!!en(t)&&("body"===Qt(t)||D(or,Qt(t)))},isEmptyTag:function(t){return!!en(t)&&D(["br","img","hr","input"],Qt(t))},isNonEditable:function(t){return en(t)&&"false"===Ln(t,"contenteditable")}}),eq:Pt,is:Mt}}var ur=function(t,n,e,r){var o=n(t,e);return I(r,(function(e,r){var o=n(t,r);return ar(t,e,o)}),o)},ar=function(t,n,e){return n.bind((function(n){return e.filter(h(t.eq,n))}))},cr=function(t,n,e){return e.length>0?function(t,n,e,r){return r(t,n,e[0],e.slice(1))}(t,n,e,ur):S.none()},lr=function(t,n,e,r){void 0===r&&(r=b);var o=[n].concat(t.up().all(n)),i=[e].concat(t.up().all(e)),u=function(t){return L(t,r).fold((function(){return t}),(function(n){return t.slice(0,n+1)}))},a=u(o),c=u(i),l=B(a,(function(n){return A(c,function(t,n){return h(t.eq,n)}(t,n))}));return{firstpath:a,secondpath:c,shared:l}},fr=ir(),sr=function(t,n){return cr(fr,(function(n,e){return t(e)}),n)},dr=function(t){return Pn(t,"table")},mr=function(t,n,e){var r=function(t){return function(n){return void 0!==e&&e(n)||Pt(n,t)}};return Pt(t,n)?S.some({boxes:S.some([t]),start:t,finish:n}):dr(t).bind((function(o){return dr(n).bind((function(i){if(Pt(o,i))return S.some({boxes:ze(o,t,n),start:t,finish:n});if(Et(o,i)){var u=kn(n,"td,th",r(o)),a=u.length>0?u[u.length-1]:n;return S.some({boxes:He(o,t,o,n,i),start:t,finish:a})}if(Et(i,o)){var c=(u=kn(t,"td,th",r(i))).length>0?u[u.length-1]:t;return S.some({boxes:He(i,t,o,n,i),start:t,finish:c})}return function(t,n,e){return lr(fr,t,n,e)}(t,n).shared.bind((function(u){return Mn(u,"table",e).bind((function(e){var u=kn(n,"td,th",r(e)),a=u.length>0?u[u.length-1]:n,c=kn(t,"td,th",r(e)),l=c.length>0?c[c.length-1]:t;return S.some({boxes:He(e,t,o,n,i),start:l,finish:a})}))}))}))}))},gr=function(t,n){var e=Dn(t,n);return e.length>0?S.some(e):S.none()},pr=function(t,n,e){return En(t,n).bind((function(n){return En(t,e).bind((function(t){return sr(dr,[n,t]).map((function(e){return{first:n,last:t,table:e}}))}))}))},hr=function(t,n,e,r,o){return function(t,n){return B(t,(function(t){return Dt(t,n)}))}(t,o).bind((function(t){return Ue(t,n,e).bind((function(t){return function(t,n){return Pn(t,"table").bind((function(e){return En(e,n).bind((function(n){return mr(n,t).bind((function(t){return t.boxes.map((function(n){return{boxes:n,start:t.start,finish:t.finish}}))}))}))}))}(t,r)}))}))},vr=function(t,n){return gr(t,n)},br=function(t,n,e){return pr(t,n,e).bind((function(n){var e=function(n){return Pt(t,n)},r="thead,tfoot,tbody,table",o=Pn(n.first,r,e),i=Pn(n.last,r,e);return o.bind((function(t){return i.bind((function(e){return Pt(t,e)?function(t,n,e){var r=We(t);return Le(r,n,e)}(n.table,n.first,n.last):S.none()}))}))}))},yr=function(t){if(!i(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],e={};return N(t,(function(r,o){var u=It(r);if(1!==u.length)throw new Error("one and only one name per case");var a=u[0],c=r[a];if(void 0!==e[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!i(c))throw new Error("case arguments must be an array");n.push(a),e[a]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i=e.length;if(i!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+i);var u=function(t){var r=It(t);if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","));if(!U(n,(function(t){return D(r,t)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "));return t[a].apply(null,e)};return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(n.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+n.length);var i=n[o];return i.apply(null,e)},match:u,log:function(t){console.log(t,{constructors:n,constructor:a,params:e})}}}})),e},wr=yr([{none:[]},{multiple:["elements"]},{single:["element"]}]),xr=function(t,n,e,r){return t.fold(n,e,r)},Cr=wr.none,Sr=wr.multiple,Tr=wr.single,kr=tinymce.util.Tools.resolve("tinymce.PluginManager"),Or=function(t,n){return Ot.fromDom(t.dom.cloneNode(n))},Dr=function(t){return Or(t,!1)},Ar=function(t){return Or(t,!0)},Rr=function(t,n){var e=Ot.fromTag(n),r=Un(t);return Bn(e,r),e},Pr=function(t,n){var e=function(e){var r=n(e);if(r<=0||null===r){var o=Jn(e,t);return parseFloat(o)||0}return r},r=function(t,n){return _(n,(function(n,e){var r=Jn(t,e),o=void 0===r?0:parseInt(r,10);return isNaN(o)?n:n+o}),0)};return{set:function(n,e){if(!s(e)&&!e.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+e);var r=n.dom;qn(r)&&(r.style[t]=e+"px")},get:e,getOuter:e,aggregate:r,max:function(t,n,e){var o=r(t,e);return n>o?n-o:0}}},Nr=function(){var t=Tt().browser;return t.isIE()||t.isEdge()},Er=function(t,n){return function(t){var n=parseFloat(t);return isNaN(n)?S.none():S.some(n)}(t).getOr(n)},Mr=function(t,n,e){return Er(Jn(t,n),e)},Ir=function(t){return Jn(t,"box-sizing")},_r=function(t,n,e,r){return n-Mr(t,"padding-"+e,0)-Mr(t,"padding-"+r,0)-Mr(t,"border-"+e+"-width",0)-Mr(t,"border-"+r+"-width",0)},Br=function(t,n){var e=t.dom,r=e.getBoundingClientRect().width||e.offsetWidth;return"border-box"===n?r:_r(t,r,"left","right")},Lr=Pr("width",(function(t){return t.dom.offsetWidth})),jr=function(t){return Lr.get(t)},Fr=function(t){return Lr.getOuter(t)},Ur=function(t){return Br(t,"content-box")},zr=function(t){return Nr()?Br(t,Ir(t)):Mr(t,"width",t.dom.offsetWidth)},Hr=function(t,n){void 0===n&&(n=y);var e=t.grid,r=R(e.columns,g),o=R(e.rows,g);return P(r,(function(e){return Wr((function(){return F(o,(function(n){return Me.getAt(t,n,e).filter((function(t){return t.column===e})).toArray()}))}),(function(t){return 1===t.colspan&&n(t.element)}),(function(){return Me.getAt(t,0,e)}))}))},Wr=function(t,n,e){var r=t();return B(r,n).orThunk((function(){return S.from(r[0]).orThunk(e)})).map((function(t){return t.element}))},Vr=function(t){var n=t.grid,e=R(n.rows,g),r=R(n.columns,g);return P(e,(function(n){return Wr((function(){return F(r,(function(e){return Me.getAt(t,n,e).filter((function(t){return t.row===n})).fold(m([]),(function(t){return[t]}))}))}),(function(t){return 1===t.rowspan}),(function(){return Me.getAt(t,n,0)}))}))},$r=function(t,n){if(n<0||n>=t.length-1)return S.none();var e=t[n].fold((function(){var e=function(t){var n=T.call(t,0);return n.reverse(),n}(t.slice(0,n));return q(e,(function(t,n){return t.map((function(t){return{value:t,delta:n+1}}))}))}),(function(t){return S.some({value:t,delta:0})})),r=t[n+1].fold((function(){var e=t.slice(n+1);return q(e,(function(t,n){return t.map((function(t){return{value:t,delta:n+1}}))}))}),(function(t){return S.some({value:t,delta:1})}));return e.bind((function(t){return r.map((function(n){var e=n.delta+t.delta;return Math.abs(n.value-t.value)/e}))}))},qr=function(t,n){return function(e){return"rtl"===Kr(e)?n:t}},Kr=function(t){return"rtl"===Jn(t,"direction")?"rtl":"ltr"},Gr=Pr("height",(function(t){var n=t.dom;return Cn(t)?n.getBoundingClientRect().height:n.offsetHeight})),Yr=function(t){return Gr.get(t)},Jr=function(t){return Gr.getOuter(t)},Xr=function(t){return Nr()?function(t,n){var e=t.dom,r=e.getBoundingClientRect().height||e.offsetHeight;return"border-box"===n?r:_r(t,r,"top","bottom")}(t,Ir(t)):Mr(t,"height",t.dom.offsetHeight)},Qr=function(t,n){return{left:t,top:n,translate:function(e,r){return Qr(t+e,n+r)}}},Zr=Qr,to=function(t,n){return void 0!==t?t:void 0!==n?n:0},no=function(t){var n=t.dom.ownerDocument,e=n.body,r=n.defaultView,o=n.documentElement;if(e===t.dom)return Zr(e.offsetLeft,e.offsetTop);var i=to(null==r?void 0:r.pageYOffset,o.scrollTop),u=to(null==r?void 0:r.pageXOffset,o.scrollLeft),a=to(o.clientTop,e.clientTop),c=to(o.clientLeft,e.clientLeft);return eo(t).translate(u-c,i-a)},eo=function(t){var n=t.dom,e=n.ownerDocument.body;return e===n?Zr(e.offsetLeft,e.offsetTop):Cn(t)?function(t){var n=t.getBoundingClientRect();return Zr(n.left,n.top)}(n):Zr(0,0)},ro=function(t,n){return{row:t,y:n}},oo=function(t,n){return{col:t,x:n}},io=function(t){return no(t).left+Fr(t)},uo=function(t){return no(t).left},ao=function(t,n){return oo(t,uo(n))},co=function(t,n){return oo(t,io(n))},lo=function(t){return no(t).top},fo=function(t,n){return ro(t,lo(n))},so=function(t,n){return ro(t,lo(n)+Jr(n))},mo=function(t,n,e){if(0===e.length)return[];var r=P(e.slice(1),(function(n,e){return n.map((function(n){return t(e,n)}))})),o=e[e.length-1].map((function(t){return n(e.length-1,t)}));return r.concat([o])},go={delta:g,positions:function(t){return mo(fo,so,t)},edge:lo},po={delta:g,edge:uo,positions:function(t){return mo(ao,co,t)}},ho={delta:function(t){return-t},edge:io,positions:function(t){return mo(co,ao,t)}},vo=qr(po,ho),bo={delta:function(t,n){return vo(n).delta(t,n)},positions:function(t,n){return vo(n).positions(t,n)},edge:function(t){return vo(t).edge(t)}},yo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},wo=function(){var t="[0-9]+",n="[eE][+-]?[0-9]+",e=function(t){return"(?:"+t+")?"},r=["Infinity",t+"\\."+e(t)+e(n),"\\."+t+e(n),t+e(n)].join("|");return new RegExp("^("+("[+-]?(?:"+r+")")+")(.*)$")}(),xo=function(t,n){return S.from(wo.exec(t)).bind((function(t){var e=Number(t[1]),r=t[2];return function(t,n){return A(n,(function(n){return A(yo[n],(function(n){return t===n}))}))}(r,n)?S.some({value:e,unit:r}):S.none()}))},Co=/(\d+(\.\d+)?)%/,So=/(\d+(\.\d+)?)px|em/,To=an("col"),ko=function(t,n,e){var r=function(t){return S.from(t.dom.parentElement).map(Ot.fromDom)}(t).getOrThunk((function(){return Sn(cn(t))}));return n(t)/e(r)*100},Oo=function(t,n){Gn(t,"width",n+"px")},Do=function(t,n){Gn(t,"width",n+"%")},Ao=function(t,n){Gn(t,"height",n+"px")},Ro=function(t,n,e,r){var o=parseFloat(t);return rt(t,"%")&&"table"!==Qt(n)?function(t,n,e,r){var o=de(t).map((function(t){var r=e(t);return Math.floor(n/100*r)})).getOr(n);return r(t,o),o}(n,o,e,r):o},Po=function(t){var n=function(t){return Xr(t)+"px"}(t);return n?Ro(n,t,Yr,Ao):Yr(t)},No=function(t,n){return Qn(t,n).orThunk((function(){return jn(t,n).map((function(t){return t+"px"}))}))},Eo=function(t){return No(t,"width")},Mo=function(t){return ko(t,jr,Ur)},Io=function(t){return To(t)?jr(t):zr(t)},_o=function(t){return function(t,n,e){return e(t)/ne(t,n)}(t,"rowspan",Po)},Bo=function(t,n,e){Gn(t,"width",n+e)},Lo=function(t){return ko(t,jr,Ur)+"%"},jo=m(Co),Fo=an("col"),Uo=function(t){return Eo(t).getOrThunk((function(){return Io(t)+"px"}))},zo=function(t){return function(t){return No(t,"height")}(t).getOrThunk((function(){return _o(t)+"px"}))},Ho=function(t,n,e,r,o,i){return t.filter(r).fold((function(){return i($r(e,n))}),(function(t){return o(t)}))},Wo=function(t,n,e,r){var o=Hr(t),i=Me.hasColumns(t)?function(t){return P(Me.justColumns(t),(function(t){return S.from(t.element)}))}(t):o,u=[S.some(bo.edge(n))].concat(P(bo.positions(o,n),(function(t){return t.map((function(t){return t.x}))}))),a=v(ee);return P(i,(function(t,n){return Ho(t,n,u,a,(function(t){if(function(t){var n=Tt().browser,e=n.isChrome()||n.isFirefox();return!Fo(t)||e}(t))return e(t);var i=function(t,n){return null!=t?n(t):S.none()}(o[n],g);return Ho(i,n,u,a,(function(t){return r(S.some(jr(t)))}),r)}),r)}))},Vo=function(t){return t.map((function(t){return t+"px"})).getOr("")},$o=function(t,n,e){return Wo(t,n,Io,(function(t){return t.getOrThunk(e.minCellWidth)}))},qo=function(t,n,e,r,o){var i=Vr(t),u=[S.some(e.edge(n))].concat(P(e.positions(i,n),(function(t){return t.map((function(t){return t.y}))})));return P(i,(function(t,n){return Ho(t,n,u,v(re),r,o)}))},Ko=function(t,n){return function(){return Cn(t)?n(t):parseFloat(Qn(t,"width").getOr("0"))}},Go=function(t){var n=Ko(t,jr),e=m(0);return{width:n,pixelWidth:n,getWidths:function(n,e){return $o(n,t,e)},getCellDelta:e,singleColumnWidth:m([0]),minCellWidth:e,setElementWidth:d,adjustTableWidth:d,isRelative:!0,label:"none"}},Yo=function(t){var n=Ko(t,(function(t){return parseFloat(Lo(t))})),e=Ko(t,jr);return{width:n,pixelWidth:e,getWidths:function(n,e){return function(t,n,e){return Wo(t,n,Mo,(function(t){return t.fold((function(){return e.minCellWidth()}),(function(t){return t/e.pixelWidth()*100}))}))}(n,t,e)},getCellDelta:function(t){return t/e()*100},singleColumnWidth:function(t,n){return[100-t]},minCellWidth:function(){return ie()/e()*100},setElementWidth:Do,adjustTableWidth:function(e){var r=n();Do(t,r+e/100*r)},isRelative:!0,label:"percent"}},Jo=function(t){var n=Ko(t,jr);return{width:n,pixelWidth:n,getWidths:function(n,e){return $o(n,t,e)},getCellDelta:g,singleColumnWidth:function(t,n){return[Math.max(ie(),t+n)-t]},minCellWidth:ie,setElementWidth:Oo,adjustTableWidth:function(e){var r=n()+e;Oo(t,r)},isRelative:!1,label:"pixel"}},Xo=function(t){return Eo(t).fold((function(){return Go(t)}),(function(n){return function(t,n){return null!==jo().exec(n)?Yo(t):Jo(t)}(t,n)}))},Qo=Jo,Zo=Yo,ti=function(t,n,e){var r=t[e].element,o=Ot.fromTag("td");Ke(o,Ot.fromTag("br")),(n?Ke:qe)(r,o)},ni=function(t,n){var e=function(t){return Dt(t.element,n)},r=Ar(t),o=ve(r),i=Xo(t),u=Me.generate(o),a=function(t,n){var e=t.grid.columns,r=t.grid.rows,o=e,i=0,u=0,a=[],c=[];return Bt(t.access,(function(t){if(a.push(t),n(t)){c.push(t);var e=t.row,l=e+t.rowspan-1,f=t.column,s=f+t.colspan-1;e<r?r=e:l>i&&(i=l),f<o?o=f:s>u&&(u=s)}})),function(t,n,e,r,o,i){return{minRow:t,minCol:n,maxRow:e,maxCol:r,allCells:o,selectedCells:i}}(r,o,i,u,a,c)}(u,e),c="th:not("+n+"),td:not("+n+")",l=ce(r,"th,td",(function(t){return Dt(t,c)}));return N(l,Qe),function(t,n,e,r){for(var o=n.grid.columns,i=n.grid.rows,u=0;u<i;u++)for(var a=!1,c=0;c<o;c++)if(!(u<e.minRow||u>e.maxRow||c<e.minCol||c>e.maxCol)){Me.getAt(n,u,c).filter(r).isNone()?ti(t,a,u):a=!0}}(o,u,a,e),function(t,n,e,r){Bt(e.columns,(function(t){(t.column<n.minCol||t.column>n.maxCol)&&Qe(t.element)}));var o=M(ae(t,"tr"),(function(t){return 0===t.dom.childElementCount}));N(o,Qe),n.minCol!==n.maxCol&&n.minRow!==n.maxRow||N(ae(t,"th,td"),(function(t){Fn(t,"rowspan"),Fn(t,"colspan")})),Fn(t,De),Fn(t,"data-snooker-col-series"),Xo(t).adjustTableWidth(r)}(r,a,u,function(t,n,e,r){if(0===r.minCol&&n.grid.columns===r.maxCol+1)return 0;var o=$o(n,t,e),i=_(o,(function(t,n){return t+n}),0),u=_(o.slice(r.minCol,r.maxCol+1),(function(t,n){return t+n}),0)/i*e.pixelWidth()-e.pixelWidth();return e.getCellDelta(u)}(t,Me.fromTable(t),i,a)),r},ei=function(t){return"img"===Qt(t)?1:er(t).fold((function(){return gn(t).length}),(function(t){return t.length}))},ri=["img","br"],oi=function(t){return function(t){return er(t).filter((function(t){return 0!==t.trim().length||t.indexOf(" ")>-1})).isSome()}(t)||D(ri,Qt(t))},ii=function(t){return function(t,n){var e=function(t){for(var r=0;r<t.childNodes.length;r++){var o=Ot.fromDom(t.childNodes[r]);if(n(o))return S.some(o);var i=e(t.childNodes[r]);if(i.isSome())return i}return S.none()};return e(t.dom)}(t,oi)},ui=function(t){return ai(t,oi)},ai=function(t,n){var e=function(t){for(var r=gn(t),o=r.length-1;o>=0;o--){var i=r[o];if(n(i))return S.some(i);var u=e(i);if(u.isSome())return u}return S.none()};return e(t)},ci={scope:["row","col"]},li=function(t){return function(){var n=Ot.fromTag("td",t.dom);return Ke(n,Ot.fromTag("br",t.dom)),n}},fi=function(t){return function(){return Ot.fromTag("col",t.dom)}},si=function(t){return function(){return Ot.fromTag("colgroup",t.dom)}},di=function(t){return function(){return Ot.fromTag("tr",t.dom)}},mi=function(t,n,e){var r=function(t,n){var e=Rr(t,n),r=gn(Ar(t));return Je(e,r),e}(t,n);return Bt(e,(function(t,n){null===t?Fn(r,n):_n(r,n,t)})),r},gi=function(t){return t},pi=function(t,n,e){var r=function(t,n){(function(t,n){var e=t.dom,r=n.dom;qn(e)&&qn(r)&&(r.style.cssText=e.style.cssText)})(t.element,n),Zn(n,"height"),1!==t.colspan&&Zn(n,"width")};return{col:function(e){var o=Ot.fromTag(Qt(e.element),n.dom);return r(e,o),t(e.element,o),o},colgroup:si(n),row:di(n),cell:function(o){var i=Ot.fromTag(Qt(o.element),n.dom),u=e.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),a=u.length>0?function(t,n,e){return ii(t).map((function(r){var o=e.join(","),i=kn(r,o,(function(n){return Pt(n,t)}));return I(i,(function(t,n){var e=Dr(n);return Fn(e,"contenteditable"),Ke(t,e),e}),n)})).getOr(n)}(o.element,i,u):i;return Ke(a,Ot.fromTag("br")),r(o,i),function(t,n){Bt(ci,(function(e,r){return jn(t,r).filter((function(t){return D(e,t)})).each((function(t){return _n(n,r,t)}))}))}(o.element,i),t(o.element,i),i},replace:mi,colGap:fi(n),gap:li(n)}},hi=function(t){return{col:fi(t),colgroup:si(t),row:di(t),cell:li(t),replace:gi,colGap:fi(t),gap:li(t)}},vi=function(t){return P(t,Ot.fromDom)},bi=function(t){return t.nodeName.toLowerCase()},yi=function(t){return Ot.fromDom(t.getBody())},wi=function(t){return t.getBoundingClientRect().width},xi=function(t){return t.getBoundingClientRect().height},Ci=function(t){return function(n){return Pt(n,yi(t))}},Si=function(t){return/^\d+(\.\d+)?$/.test(t)?t+"px":t},Ti=function(t){Fn(t,"data-mce-style");var n=function(t){return Fn(t,"data-mce-style")};N(fe(t),n),N(se(t),n),N(me(t),n)},ki=function(t){return Ot.fromDom(t.selection.getStart())},Oi=function(t){return xr(t.get(),m([]),g,H)},Di=function(t){var n=function(t,n){return jn(t,n).exists((function(t){return parseInt(t,10)>1}))},e=Oi(t);return e.length>0&&U(e,(function(t){return n(t,"rowspan")||n(t,"colspan")}))?S.some(e):S.none()},Ai=function(t,n,e){return xr(n.get(),S.none,(function(n){return n.length<=1?S.none():br(t,e.firstSelectedSelector,e.lastSelectedSelector).map((function(t){return{bounds:t,cells:n}}))}),S.none)},Ri="data-mce-selected",Pi="data-mce-first-selected",Ni="data-mce-last-selected",Ei={selected:Ri,selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:Pi,firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:Ni,lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Mi=function(t,n,e){return{element:e,mergable:Ai(n,t,Ei),unmergable:Di(t),selection:Oi(t)}},Ii=function(t){return function(n,e){var r=Qt(n),o="col"===r||"colgroup"===r?function(t){return de(t).bind((function(t){return vr(t,Ei.firstSelectedSelector)})).fold(m(t),(function(t){return t[0]}))}(n):n;return Mn(o,t,e)}},_i=Ii("th,td,caption"),Bi=Ii("th,td"),Li=function(t){return Oi(t)},ji=function(t,n,e){t.on("BeforeGetContent",(function(e){!0===e.selection&&xr(n.get(),d,(function(n){e.preventDefault(),function(t){return de(t[0]).map((function(t){var n=ni(t,"[data-mce-selected]");return Ti(n),[n]}))}(n).each((function(n){e.content="text"===e.format?function(t){return P(t,(function(t){return t.dom.innerText})).join("")}(n):function(t,n){return P(n,(function(n){return t.selection.serializer.serialize(n.dom,{})})).join("")}(t,n)}))}),d)})),t.on("BeforeSetContent",(function(r){if(!0===r.selection&&!0===r.paste){var o=Li(n);V(o).each((function(n){de(n).each((function(o){var i=M(function(t,n){var e=(n||document).createElement("div");return e.innerHTML=t,gn(Ot.fromDom(e))}(r.content),(function(t){return"meta"!==Qt(t)})),u=an("table");if(1===i.length&&u(i[0])){r.preventDefault();var a=Ot.fromDom(t.getDoc()),c=hi(a),l=function(t,n,e){return{element:t,clipboard:n,generators:e}}(n,i[0],c);e.pasteCells(o,l).each((function(){t.focus()}))}}))}))}}))},Fi=yr([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ui=K({},Fi),zi=function(t,n,e,r,o){var i=t.slice(0),u=function(t,n){return 0===t.length?Ui.none():1===t.length?Ui.only(0):0===n?Ui.left(0,1):n===t.length-1?Ui.right(n-1,n):n>0&&n<t.length-1?Ui.middle(n-1,n,n+1):Ui.none()}(t,n),a=m(P(i,m(0)));return u.fold(a,(function(t){return r.singleColumnWidth(i[t],e)}),(function(t,n){return o.calcLeftEdgeDeltas(i,t,n,e,r.minCellWidth(),r.isRelative)}),(function(t,n,u){return o.calcMiddleDeltas(i,t,n,u,e,r.minCellWidth(),r.isRelative)}),(function(t,n){return o.calcRightEdgeDeltas(i,t,n,e,r.minCellWidth(),r.isRelative)}))},Hi=function(t,n,e){for(var r=0,o=t;o<n;o++)r+=void 0!==e[o]?e[o]:0;return r},Wi=function(t,n){return Me.hasColumns(t)?function(t,n){var e=Me.justColumns(t);return P(e,(function(t,e){return{element:t.element,width:n[e],colspan:t.colspan}}))}(t,n):function(t,n){var e=Me.justCells(t);return P(e,(function(t){var e=Hi(t.column,t.column+t.colspan,n);return{element:t.element,width:e,colspan:t.colspan}}))}(t,n)},Vi=function(t,n,e){var r=Wi(t,n);N(r,(function(t){e.setElementWidth(t.element,t.width)}))},$i=function(t,n,e,r,o){var i=Me.fromTable(t),u=o.getCellDelta(n),a=o.getWidths(i,o),c=e===i.grid.columns-1,l=r.clampTableDelta(a,e,u,o.minCellWidth(),c),f=zi(a,e,l,o,r),s=P(f,(function(t,n){return t+a[n]}));Vi(i,s,o),r.resizeTable(o.adjustTableWidth,l,c)},qi=function(t,n,e,r){var o=Me.fromTable(t),i=function(t,n,e){return qo(t,n,e,_o,(function(t){return t.getOrThunk(ue)}))}(o,t,r),u=P(i,(function(t,r){return e===r?Math.max(n+t,ue()):t})),a=function(t,n){var e=Me.justCells(t);return P(e,(function(t){var e=Hi(t.row,t.row+t.rowspan,n);return{element:t.element,height:e,rowspan:t.rowspan}}))}(o,u),c=function(t,n){return P(t.all,(function(t,e){return{element:t.element,height:n[e]}}))}(o,u);N(c,(function(t){Ao(t.element,t.height)})),N(a,(function(t){Ao(t.element,t.height)}));var l=function(t){return I(t,(function(t,n){return t+n}),0)}(u);Ao(t,l)},Ki=function(t){return P(t,m(0))},Gi=function(t,n,e,r,o){return o(t.slice(0,n)).concat(r).concat(o(t.slice(e)))},Yi=function(t){return function(n,e,r,o){if(t(r)){var i=Math.max(o,n[e]-Math.abs(r)),u=Math.abs(i-n[e]);return r>=0?u:-u}return r}},Ji=Yi((function(t){return t<0})),Xi=Yi(y),Qi=function(){var t=function(t,n,e,r){var o=(100+e)/100,i=Math.max(r,(t[n]+e)/o);return P(t,(function(t,e){return(e===n?i:t/o)-t}))},n=function(n,e,r,o,i,u){return u?t(n,e,o,i):function(t,n,e,r,o){var i=Ji(t,n,r,o);return Gi(t,n,e+1,[i,0],Ki)}(n,e,r,o,i)};return{resizeTable:function(t,n){return t(n)},clampTableDelta:Ji,calcLeftEdgeDeltas:n,calcMiddleDeltas:function(t,e,r,o,i,u,a){return n(t,r,o,i,u,a)},calcRightEdgeDeltas:function(n,e,r,o,i,u){if(u)return t(n,r,o,i);var a=Ji(n,r,o,i);return Ki(n.slice(0,r)).concat([a])},calcRedestributedWidths:function(t,n,e,r){if(r){var o=(n+e)/n,i=P(t,(function(t){return t/o}));return{delta:100*o-100,newSizes:i}}return{delta:e,newSizes:t}}}},Zi=function(){var t=function(t,n,e,r,o){var i=Xi(t,r>=0?e:n,r,o);return Gi(t,n,e+1,[i,-i],Ki)};return{resizeTable:function(t,n,e){e&&t(n)},clampTableDelta:function(t,n,e,r,o){if(o){if(e>=0)return e;var i=_(t,(function(t,n){return t+n-r}),0);return Math.max(-i,e)}return Ji(t,n,e,r)},calcLeftEdgeDeltas:t,calcMiddleDeltas:function(n,e,r,o,i,u){return t(n,r,o,i,u)},calcRightEdgeDeltas:function(t,n,e,r,o,i){if(i)return Ki(t);var u=r/t.length;return P(t,m(u))},calcRedestributedWidths:function(t,n,e,r){return{delta:0,newSizes:t}}}},tu=function(t,n){var e=S.from(t.dom.documentElement).map(Ot.fromDom).getOr(t);return{parent:m(e),view:m(t),origin:m(Zr(0,0)),isResizable:n}},nu=function(t,n,e){return{parent:m(n),view:m(t),origin:m(Zr(0,0)),isResizable:e}},eu=yr([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),ru=function(t,n,e){var r=e.substring(0,e.length-t.length),o=parseFloat(r);return r===o.toString()?n(o):eu.invalid(e)},ou=K(K({},eu),{from:function(t){return rt(t,"%")?ru("%",eu.percent,t):rt(t,"px")?ru("px",eu.pixels,t):eu.invalid(t)}}),iu=function(t,n,e){return t.fold((function(){return n}),(function(t){return function(t,n,e){var r=e/n;return P(t,(function(t){return ou.from(t).fold((function(){return t}),(function(t){return t*r+"px"}),(function(t){return t/100*e+"px"}))}))}(n,e,t)}),(function(t){return function(t,n){return P(t,(function(t){return ou.from(t).fold((function(){return t}),(function(t){return t/n*100+"%"}),(function(t){return t+"%"}))}))}(n,e)}))},uu=function(t,n,e){var r=ou.from(e),o=U(t,(function(t){return"0px"===t}))?function(t,n){var e=t.fold((function(){return m("")}),(function(t){return m(t/n+"px")}),(function(){return m(100/n+"%")}));return R(n,e)}(r,t.length):iu(r,t,n);return lu(o)},au=function(t,n){return 0===t.length?n:I(t,(function(t,n){return ou.from(n).fold(m(0),g,g)+t}),0)},cu=function(t,n){return ou.from(t).fold(m(t),(function(t){return t+n+"px"}),(function(t){return t+n+"%"}))},lu=function(t){if(0===t.length)return t;var n=I(t,(function(t,n){var e=ou.from(n).fold((function(){return{value:n,remainder:0}}),(function(t){return function(t,n){var e=Math.floor(t);return{value:e+n,remainder:t-e}}(t,"px")}),(function(t){return{value:t+"%",remainder:0}}));return{output:[e.value].concat(t.output),remainder:t.remainder+e.remainder}}),{output:[],remainder:0}),e=n.output;return e.slice(0,e.length-1).concat([cu(e[e.length-1],Math.round(n.remainder))])},fu=ou.from,su=function(t){return fu(t).fold(m("px"),m("px"),m("%"))},du=function(t,n,e){var r=Me.fromTable(t),o=r.all,i=Me.justCells(r),u=Me.justColumns(r);n.each((function(n){var e=su(n),o=jr(t),a=function(t,n){return Wo(t,n,Uo,Vo)}(r,t),c=uu(a,o,n);Me.hasColumns(r)?function(t,n,e){N(n,(function(n,r){var o=au([t[r]],ie());Gn(n.element,"width",o+e)}))}(c,u,e):function(t,n,e){N(n,(function(n){var r=t.slice(n.column,n.colspan+n.column),o=au(r,ie());Gn(n.element,"width",o+e)}))}(c,i,e),Gn(t,"width",n)})),e.each((function(n){var e=su(n),u=Yr(t),a=function(t,n,e){return qo(t,n,e,zo,Vo)}(r,t,go);(function(t,n,e,r){N(e,(function(n){var e=t.slice(n.row,n.rowspan+n.row),o=au(e,ue());Gn(n.element,"height",o+r)})),N(n,(function(n,e){Gn(n.element,"height",t[e])}))})(uu(a,u,n),o,i,e),Gn(t,"height",n)}))},mu=function(t){return Eo(t).exists((function(t){return Co.test(t)}))},gu=function(t){return Eo(t).exists((function(t){return So.test(t)}))},pu=function(t){return Eo(t).isNone()},hu=function(t){return Me.fromTable(t).grid},vu=function(t){var n=[];return{bind:function(t){if(void 0===t)throw new Error("Event bind error: undefined handler");n.push(t)},unbind:function(t){n=M(n,(function(n){return n!==t}))},trigger:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o={};N(t,(function(t,n){o[t]=e[n]})),N(n,(function(t){t(o)}))}}},bu=function(t){return{registry:Lt(t,(function(t){return{bind:t.bind,unbind:t.unbind}})),trigger:Lt(t,(function(t){return t.trigger}))}},yu=function(t,n){var e=null,r=function(){u(e)||(clearTimeout(e),e=null)};return{cancel:r,throttle:function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];r(),e=setTimeout((function(){e=null,t.apply(null,o)}),n)}}},wu=function(t){return t.slice(0).sort()},xu=function(t,n,e){if(0===n.length)throw new Error("You must specify at least one required field.");return function(t,n){if(!i(n))throw new Error("The "+t+" fields must be an array. Was: "+n+".");N(n,(function(n){if(!r(n))throw new Error("The value "+n+" in the "+t+" fields was not a string.")}))}("required",n),function(t){var n=wu(t);B(n,(function(t,e){return e<n.length-1&&t===n[e+1]})).each((function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}))}(n),function(r){var o=It(r);U(n,(function(t){return D(o,t)}))||function(t,n){throw new Error("All required keys ("+wu(t).join(", ")+") were not specified. Specified keys were: "+wu(n).join(", ")+".")}(n,o),t(n,o);var i=M(n,(function(t){return!e.validate(r[t],t)}));return i.length>0&&function(t,n){throw new Error("All values need to be of type: "+n+". Keys ("+wu(t).join(", ")+") were not.")}(i,e.label),r}},Cu=function(t,n){var e=M(n,(function(n){return!D(t,n)}));e.length>0&&function(t){throw new Error("Unsupported keys for object: "+wu(t).join(", "))}(e)},Su=function(t){return function(t,n){return xu(t,n,{validate:f,label:"function"})}(Cu,t)},Tu=Su(["compare","extract","mutate","sink"]),ku=Su(["element","start","stop","destroy"]),Ou=Su(["forceDrop","drop","move","delayDrop"]),Du=function(){var t=function(){var t=bu({move:vu(["info"])});return{onEvent:d,reset:d,events:t.registry}}(),n=function(){var t=S.none(),n=function(n,e){var r=t.map((function(t){return n.compare(t,e)}));return t=S.some(e),r},e=bu({move:vu(["info"])});return{onEvent:function(t,r){r.extract(t).each((function(t){n(r,t).each((function(t){e.trigger.move(t)}))}))},reset:function(){t=S.none()},events:e.registry}}(),e=t;return{on:function(){e.reset(),e=n},off:function(){e.reset(),e=t},isOn:function(){return e===n},onEvent:function(t,n){e.onEvent(t,n)},events:n.events}},Au=function(t){var n=Ot.fromDom(function(t){if(vn()&&l(t.target)){var n=Ot.fromDom(t.target);if(en(n)&&xn(n)&&t.composed&&t.composedPath){var e=t.composedPath();if(e)return V(e)}}return S.from(t.target)}(t).getOr(t.target)),e=function(){return t.stopPropagation()},r=function(){return t.preventDefault()},o=function(t,n){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t(n.apply(null,e))}}(r,e);return function(t,n,e,r,o,i,u){return{target:t,x:n,y:e,stop:r,prevent:o,kill:i,raw:u}}(n,t.clientX,t.clientY,e,r,o,t)},Ru=function(t,n,e,r,o){var i=function(t,n){return function(e){t(e)&&n(Au(e))}}(e,r);return t.dom.addEventListener(n,i,o),{unbind:h(Pu,t,n,i,o)}},Pu=function(t,n,e,r){t.dom.removeEventListener(n,e,r)},Nu=y,Eu=function(t,n,e){return function(t,n,e,r){return Ru(t,n,e,r,!1)}(t,n,Nu,e)},Mu=Au,Iu=function(t,n){var e=Ln(t,n);return void 0===e||""===e?[]:e.split(" ")},_u=function(t){return void 0!==t.dom.classList},Bu=function(t,n){return function(t,n,e){var r=Iu(t,n).concat([e]);return _n(t,n,r.join(" ")),!0}(t,"class",n)},Lu=function(t,n){_u(t)?t.dom.classList.add(n):Bu(t,n)},ju=function(t,n){return _u(t)&&t.dom.classList.contains(n)},Fu=function(t){var n=t.replace(/\./g,"-");return{resolve:function(t){return n+"-"+t}}},Uu=Fu("ephox-dragster"),zu=Uu.resolve,Hu=Tu({compare:function(t,n){return Zr(n.left-t.left,n.top-t.top)},extract:function(t){return S.some(Zr(t.x,t.y))},sink:function(t,n){var e=function(t){var n=K({layerClass:zu("blocker")},t),e=Ot.fromTag("div");_n(e,"role","presentation"),Yn(e,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Lu(e,zu("blocker")),Lu(e,n.layerClass);return{element:m(e),destroy:function(){Qe(e)}}}(n),r=Eu(e.element(),"mousedown",t.forceDrop),o=Eu(e.element(),"mouseup",t.drop),i=Eu(e.element(),"mousemove",t.move),u=Eu(e.element(),"mouseout",t.delayDrop);return ku({element:e.element,start:function(t){Ke(t,e.element())},stop:function(){Qe(e.element())},destroy:function(){e.destroy(),o.unbind(),i.unbind(),u.unbind(),r.unbind()}})},mutate:function(t,n){t.mutate(n.left,n.top)}}),Wu=function(t,n){return void 0===n&&(n={}),function(t,n,e){var r=!1,o=bu({start:vu([]),stop:vu([])}),i=Du(),u=function(){l.stop(),i.isOn()&&(i.off(),o.trigger.stop())},a=yu(u,200);i.events.move.bind((function(e){n.mutate(t,e.info)}));var c=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];r&&t.apply(null,n)}},l=n.sink(Ou({forceDrop:u,drop:c(u),move:c((function(t){a.cancel(),i.onEvent(t,n)})),delayDrop:c(a.throttle)}),e);return{element:l.element,go:function(t){l.start(t),i.on(),o.trigger.start()},on:function(){r=!0},off:function(){r=!1},destroy:function(){l.destroy()},events:o.registry}}(t,void 0!==n.mode?n.mode:Hu,n)},Vu=function(t){return Mn(t,"[contenteditable]")},$u=function(t,n){return void 0===n&&(n=!1),!Tt().browser.isIE()&&Cn(t)?t.dom.isContentEditable:Vu(t).fold(m(n),(function(t){return"true"===qu(t)}))},qu=function(t){return t.dom.contentEditable},Ku=Fu("ephox-snooker"),Gu=Ku.resolve,Yu=function(){var t=bu({drag:vu(["xDelta","yDelta","target"])}),n=S.none(),e=function(){var t=bu({drag:vu(["xDelta","yDelta"])});return{mutate:function(n,e){t.trigger.drag(n,e)},events:t.registry}}();e.events.drag.bind((function(e){n.each((function(n){t.trigger.drag(e.xDelta,e.yDelta,n)}))}));return{assign:function(t){n=S.some(t)},get:function(){return n},mutate:e.mutate,events:t.registry}},Ju=Gu("resizer-bar"),Xu=Gu("resizer-rows"),Qu=Gu("resizer-cols"),Zu=function(t){var n=Dn(t.parent(),"."+Ju);N(n,Qe)},ta=function(t,n,e){var r=t.origin();N(n,(function(n){n.each((function(n){var o=e(r,n);Lu(o,Ju),Ke(t.parent(),o)}))}))},na=function(t,n,e,r){ta(t,n,(function(t,n){var o=function(t,n,e,r,o){var i=Ot.fromTag("div");return Yn(i,{position:"absolute",left:n-r/2+"px",top:e+"px",height:o+"px",width:r+"px"}),Bn(i,{"data-column":t,role:"presentation"}),i}(n.col,n.x-t.left,e.top-t.top,7,r);return Lu(o,Qu),o}))},ea=function(t,n,e,r){ta(t,n,(function(t,n){var o=function(t,n,e,r,o){var i=Ot.fromTag("div");return Yn(i,{position:"absolute",left:n+"px",top:e-o/2+"px",height:o+"px",width:r+"px"}),Bn(i,{"data-row":t,role:"presentation"}),i}(n.row,e.left-t.left,n.y-t.top,r,7);return Lu(o,Xu),o}))},ra=function(t,n,e,r,o){var i=no(e),u=n.isResizable,a=r.length>0?go.positions(r,e):[],c=a.length>0?function(t,n){return F(t.all,(function(t,e){return n(t.element)?[e]:[]}))}(t,u):[],l=M(a,(function(t,n){return A(c,(function(t){return n===t}))}));ea(n,l,i,Fr(e));var f=o.length>0?bo.positions(o,e):[],s=f.length>0?function(t,n){var e=[];return R(t.grid.columns,(function(r){Me.getColumnAt(t,r).map((function(t){return t.element})).forall(n)&&e.push(r)})),M(e,(function(e){var r=Me.filterItems(t,(function(t){return t.column===e}));return U(r,(function(t){return n(t.element)}))}))}(t,u):[],d=M(f,(function(t,n){return A(s,(function(t){return n===t}))}));na(n,d,i,Jr(e))},oa=function(t,n){if(Zu(t),t.isResizable(n)){var e=Me.fromTable(n),r=Vr(e),o=Hr(e);ra(e,t,n,r,o)}},ia=function(t,n){var e=Dn(t.parent(),"."+Ju);N(e,n)},ua=function(t){ia(t,(function(t){Gn(t,"display","none")}))},aa=function(t){ia(t,(function(t){Gn(t,"display","block")}))},ca=Gu("resizer-bar-dragging"),la=function(t){var n=Yu(),e=Wu(n,{}),r=S.none(),o=function(t,n){return S.from(Ln(t,n))};n.events.drag.bind((function(t){o(t.target,"data-row").each((function(n){var e=oe(t.target,"top");Gn(t.target,"top",e+t.yDelta+"px")})),o(t.target,"data-column").each((function(n){var e=oe(t.target,"left");Gn(t.target,"left",e+t.xDelta+"px")}))}));var i=function(t,n){return oe(t,n)-te(t,"data-initial-"+n,0)};e.events.stop.bind((function(){n.get().each((function(n){r.each((function(e){o(n,"data-row").each((function(t){var r=i(n,"top");Fn(n,"data-initial-top"),f.trigger.adjustHeight(e,r,parseInt(t,10))})),o(n,"data-column").each((function(t){var r=i(n,"left");Fn(n,"data-initial-left"),f.trigger.adjustWidth(e,r,parseInt(t,10))})),oa(t,e)}))}))}));var u=function(r,o){f.trigger.startAdjust(),n.assign(r),_n(r,"data-initial-"+o,oe(r,o)),Lu(r,ca),Gn(r,"opacity","0.2"),e.go(t.parent())},a=Eu(t.parent(),"mousedown",(function(t){(function(t){return ju(t,Xu)})(t.target)&&u(t.target,"top"),function(t){return ju(t,Qu)}(t.target)&&u(t.target,"left")})),c=function(n){return Pt(n,t.view())},l=Eu(t.view(),"mouseover",(function(n){(function(t){return Mn(t,"table",c).filter($u)})(n.target).fold((function(){Cn(n.target)&&Zu(t)}),(function(n){r=S.some(n),oa(t,n)}))})),f=bu({adjustHeight:vu(["table","delta","row"]),adjustWidth:vu(["table","delta","column"]),startAdjust:vu([])});return{destroy:function(){a.unbind(),l.unbind(),e.destroy(),Zu(t)},refresh:function(n){oa(t,n)},on:e.on,off:e.off,hideBars:h(ua,t),showBars:h(aa,t),events:f.registry}},fa=function(t,n,e){var r=go,o=bo,i=la(t),u=bu({beforeResize:vu(["table","type"]),afterResize:vu(["table","type"]),startDrag:vu([])});return i.events.adjustHeight.bind((function(t){var n=t.table;u.trigger.beforeResize(n,"row");var e=r.delta(t.delta,n);qi(n,e,t.row,r),u.trigger.afterResize(n,"row")})),i.events.startAdjust.bind((function(t){u.trigger.startDrag()})),i.events.adjustWidth.bind((function(t){var r=t.table;u.trigger.beforeResize(r,"col");var i=o.delta(t.delta,r),a=e(r);$i(r,i,t.column,n,a),u.trigger.afterResize(r,"col")})),{on:i.on,off:i.off,hideBars:i.hideBars,showBars:i.showBars,destroy:i.destroy,events:u.registry}},sa=function(t,n){return t.fire("newrow",{node:n})},da=function(t,n){return t.fire("newcell",{node:n})},ma=function(t,n,e){t.fire("TableModified",K(K({},e),{table:n}))},ga={structure:!1,style:!0},pa={structure:!0,style:!1},ha={structure:!0,style:!0},va={"border-collapse":"collapse",width:"100%"},ba=R(5,(function(t){var n=t+1+"px";return{title:n,value:n}})),ya=P(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],(function(t){return{title:t,value:t.toLowerCase()}})),wa={border:"1"},xa="preservetable",Ca=function(t){return t.getParam("table_sizing_mode","auto")},Sa=function(t){return t.getParam("table_responsive_width")},Ta=function(t){return t.getParam("table_border_widths",ba,"array")},ka=function(t){return t.getParam("table_border_styles",ya,"array")},Oa=function(t){return t.getParam("table_default_attributes",wa,"object")},Da=function(t){return t.getParam("table_default_styles",function(t){var n;if(_a(t)){var e=t.dom,r=null!==(n=e.getParent(t.selection.getStart(),e.isBlock))&&void 0!==n?n:t.getBody(),o=Ur(Ot.fromDom(r));return K(K({},va),{width:o+"px"})}return Ba(t)?Ft(va,(function(t,n){return"width"!==n})):va}(t),"object")},Aa=function(t){return t.getParam("table_cell_advtab",!0,"boolean")},Ra=function(t){return t.getParam("table_row_advtab",!0,"boolean")},Pa=function(t){return t.getParam("table_advtab",!0,"boolean")},Na=function(t){return t.getParam("table_style_by_css",!1,"boolean")},Ea=function(t){return t.getParam("table_cell_class_list",[],"array")},Ma=function(t){return t.getParam("table_class_list",[],"array")},Ia=function(t){return"relative"===Ca(t)||!0===Sa(t)},_a=function(t){return"fixed"===Ca(t)||!1===Sa(t)},Ba=function(t){return"responsive"===Ca(t)},La=function(t){return t.getParam("table_use_colgroups",!1,"boolean")},ja=function(t){var n="section",e=t.getParam("table_header_type",n,"string");return D(["section","cells","sectionCells","auto"],e)?e:n},Fa=function(t){var n=t.getParam("table_column_resizing",xa,"string");return B(["preservetable","resizetable"],(function(t){return t===n})).getOr(xa)},Ua=function(t){return"preservetable"===Fa(t)},za=function(t){return"resizetable"===Fa(t)},Ha=function(t){var n=t.getParam("table_clone_elements");return r(n)?S.some(n.split(/[ ,]/)):Array.isArray(n)?S.some(n):S.none()},Wa=function(t){var n=t.getParam("object_resizing",!0);return r(n)?"table"===n:n},Va=function(t){return t.getParam("table_background_color_map",[],"array")},$a=function(t){return t.getParam("table_border_color_map",[],"array")},qa=function(t,n){return Ia(t)?Zo(n):_a(t)?Qo(n):Xo(n)},Ka=function(t){Fn(t,"width")},Ga=function(t){var n=Lo(t);du(t,S.some(n),S.none()),Ka(t)},Ya=function(t){var n=function(t){return jr(t)+"px"}(t);du(t,S.some(n),S.none()),Ka(t)},Ja=function(t){Zn(t,"width");var n=se(t),e=n.length>0?n:fe(t);N(e,(function(t){Zn(t,"width"),Ka(t)})),Ka(t)},Xa=function(){var t=Ot.fromTag("div");return Yn(t,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ke(Sn(Ot.fromDom(document)),t),t},Qa="bar-",Za=function(t){return"false"!==Ln(t,"data-mce-resize")},tc=function(t){var n,e,r=S.none(),o=S.none(),i=S.none(),u=function(t){return"TABLE"===t.nodeName},a=function(){return o},c=function(n){return qa(t,n)},l=function(){return Ua(t)?Zi():Qi()},f=function(r,o,i){var u=rt(o,"e");if(""===e&&Ga(r),i!==n&&""!==e){Gn(r,"width",e);var a=l(),f=c(r),s=Ua(t)||u?function(t){return hu(t).columns}(r)-1:0;$i(r,i-n,s,a,f)}else if(function(t){return/^(\d+(\.\d+)?)%$/.test(t)}(e)){var d=parseFloat(e.replace("%",""));Gn(r,"width",i*d/n+"%")}(function(t){return/^(\d+(\.\d+)?)px$/.test(t)})(e)&&function(t){var n=Me.fromTable(t);Me.hasColumns(n)||N(fe(t),(function(t){var n=Jn(t,"width");Gn(t,"width",n),Fn(t,"width")}))}(r)};return t.on("init",(function(){var n=function(t,n){return t.inline?nu(yi(t),Xa(),n):tu(Ot.fromDom(t.getDoc()),n)}(t,Za);if(i=S.some(n),Wa(t)&&function(t){return t.getParam("table_resize_bars",!0,"boolean")}(t)){var e=l(),u=fa(n,e,c);u.on(),u.events.startDrag.bind((function(n){r=S.some(t.selection.getRng())})),u.events.beforeResize.bind((function(n){var e=n.table.dom;!function(t,n,e,r,o){t.fire("ObjectResizeStart",{target:n,width:e,height:r,origin:o})}(t,e,wi(e),xi(e),Qa+n.type)})),u.events.afterResize.bind((function(n){var e=n.table,o=e.dom;Ti(e),r.each((function(n){t.selection.setRng(n),t.focus()})),function(t,n,e,r,o){t.fire("ObjectResized",{target:n,width:e,height:r,origin:o})}(t,o,wi(o),xi(o),Qa+n.type),t.undoManager.add()})),o=S.some(u)}})),t.on("ObjectResizeStart",(function(r){var o=r.target;if(u(o)){var i=Ot.fromDom(o);N(t.dom.select(".mce-clonedresizable"),(function(n){t.dom.addClass(n,"mce-"+Fa(t)+"-columns")})),!gu(i)&&_a(t)?Ya(i):!mu(i)&&Ia(t)&&Ga(i),pu(i)&&et(r.origin,Qa)&&Ga(i),n=r.width,e=Ba(t)?"":function(t,n){var e=t.dom.getStyle(n,"width")||t.dom.getAttrib(n,"width");return S.from(e).filter(it)}(t,o).getOr("")}})),t.on("ObjectResized",(function(n){var e=n.target;if(u(e)){var r=Ot.fromDom(e),o=n.origin;et(o,"corner-")&&f(r,o,n.width),Ti(r),ma(t,r.dom,ga)}})),t.on("SwitchMode",(function(){a().each((function(n){t.mode.isReadOnly()?n.hideBars():n.showBars()}))})),{lazyResize:a,lazyWire:function(){return i.getOr(tu(Ot.fromDom(t.getBody()),Za))},destroy:function(){o.each((function(t){t.destroy()})),i.each((function(n){!function(t,n){t.inline&&Qe(n.parent())}(t,n)}))}}},nc=function(t,n){return{element:t,offset:n}},ec=function(t,n,e){return t.property().isText(n)&&0===t.property().getText(n).trim().length||t.property().isComment(n)?e(n).bind((function(n){return ec(t,n,e).orThunk((function(){return S.some(n)}))})):S.none()},rc=function(t,n){return t.property().isText(n)?t.property().getText(n).length:t.property().children(n).length},oc=function(t,n){var e=ec(t,n,t.query().prevSibling).getOr(n);if(t.property().isText(e))return nc(e,rc(t,e));var r=t.property().children(e);return r.length>0?oc(t,r[r.length-1]):nc(e,rc(t,e))},ic=oc,uc=ir(),ac=function(t,n){1===ne(t,"colspan")&&function(t){return Eo(t).bind((function(t){return xo(t,["fixed","relative","empty"])}))}(t).each((function(e){var r=e.value/2;Bo(t,r,e.unit),Bo(n,r,e.unit)}))},cc=an("th"),lc=function(t){return U(t,(function(t){return cc(t.element)}))},fc=function(t,n){return t&&n?"sectionCells":t?"section":"cells"},sc=function(t){var n="thead"===t.section,e=zn(dc(t.cells),"th");return n||e?{type:"header",subType:fc(n,e)}:"tfoot"===t.section?{type:"footer"}:{type:"body"}},dc=function(t){var n=M(t,(function(t){return cc(t.element)}));return 0===n.length?S.some("td"):n.length===t.length?S.some("th"):S.none()},mc=function(t,n,e){return Jt(e(t.element,n),!0,t.isLocked)},gc=function(t,n){return t.section!==n?Xt(t.element,t.cells,n,t.isNew):t},pc=function(){return{transformRow:gc,transformCell:function(t,n,e){var r=e(t.element,n),o="td"!==Qt(r)?function(t,n){var e=Rr(t,n);Ve(t,e);var r=gn(t);return Je(e,r),Qe(t),e}(r,"td"):r;return Jt(o,t.isNew,t.isLocked)}}},hc=function(){return{transformRow:gc,transformCell:mc}},vc=function(){return{transformRow:function(t,n){return gc(t,"thead"===n?"tbody":n)},transformCell:mc}},bc=function(t,n){switch(function(t){return q(t.all,(function(t){var n=sc(t);return"header"===n.type?S.from(n.subType):S.none()}))}(Me.fromTable(t)).getOr(n)){case"section":return pc();case"sectionCells":return hc();case"cells":return vc()}},yc=pc,wc=hc,xc=vc,Cc=function(){return{transformRow:g,transformCell:mc}},Sc=function(t,n,e,r){e===r?Fn(t,n):_n(t,n,e)},Tc=function(t,n,e){$(On(t,n)).fold((function(){return qe(t,e)}),(function(t){return $e(t,e)}))},kc=function(t,n){var e=[],r=[],o=function(t){return P(t,(function(t){t.isNew&&e.push(t.element);var n=t.element;return Xe(n),N(t.cells,(function(t){t.isNew&&r.push(t.element),Sc(t.element,"colspan",t.colspan,1),Sc(t.element,"rowspan",t.rowspan,1),Ke(n,t.element)})),n}))},i=function(t){return F(t,(function(t){return P(t.cells,(function(t){return Sc(t.element,"span",t.colspan,1),t.element}))}))},u=function(n,e){var r=function(t,n){var e=Nn(t,n).getOrThunk((function(){var e=Ot.fromTag(n,cn(t).dom);return"thead"===n?Tc(t,"caption,colgroup",e):"colgroup"===n?Tc(t,"caption",e):Ke(t,e),e}));return Xe(e),e}(t,e),u=("colgroup"===e?i:o)(n);Je(r,u)},a=function(n){Nn(t,n).each(Qe)},c=function(t,n){t.length>0?u(t,n):a(n)},l=[],f=[],s=[],d=[];return N(n,(function(t){switch(t.section){case"thead":l.push(t);break;case"tbody":f.push(t);break;case"tfoot":s.push(t);break;case"colgroup":d.push(t)}})),c(d,"colgroup"),c(l,"thead"),c(f,"tbody"),c(s,"tfoot"),{newRows:e,newCells:r}},Oc=function(t,n){if(0===t.length)return 0;var e=t[0];return L(t,(function(t){return!n(e.element,t.element)})).getOr(t.length)},Dc=function(t,n,e,r){var o=function(t,n){return t[n]}(t,n),i="colgroup"===o.section;return{colspan:Oc(o.cells.slice(e),r),rowspan:i?1:Oc(function(t,n){return P(t,(function(t){return Ce(t,n)}))}(t.slice(n),e),r)}},Ac=function(t,n){var e=P(t,(function(t){return P(t.cells,b)}));return P(t,(function(r,o){var i=F(r.cells,(function(r,i){if(!1===e[o][i]){var u=Dc(t,o,i,n);return function(t,n,r,o){for(var i=t;i<t+r;i++)for(var u=n;u<n+o;u++)e[i][u]=!0}(o,i,u.rowspan,u.colspan),[Gt(r.element,u.rowspan,u.colspan,r.isNew)]}return[]}));return function(t,n,e,r){return{element:t,cells:n,section:e,isNew:r}}(r.element,i,r.section,r.isNew)}))},Rc=function(t,n,e){var r=[];N(t.colgroups,(function(o){for(var i=[],u=0;u<t.grid.columns;u++){var a=Me.getColumnAt(t,u).map((function(t){return Jt(t.element,e,!1)})).getOrThunk((function(){return Jt(n.colGap(),!0,!1)}));i.push(a)}r.push(Xt(o.element,i,"colgroup",e))}));for(var o=0;o<t.grid.rows;o++){for(var i=[],u=0;u<t.grid.columns;u++){var a=Me.getAt(t,o,u).map((function(t){return Jt(t.element,e,t.isLocked)})).getOrThunk((function(){return Jt(n.gap(),!0,!1)}));i.push(a)}var c=t.all[o],l=Xt(c.element,i,c.section,e);r.push(l)}return r},Pc=function(t){return Ac(t,Pt)},Nc=function(t,n){return q(t.all,(function(t){return B(t.cells,(function(t){return Pt(n,t.element)}))}))},Ec=function(t,n,e){var r=P(n.selection,(function(n){return le(n).bind((function(n){return Nc(t,n)})).filter(e)})),o=Hn(r);return $n(o.length>0,o)},Mc=function(t,n,e,r,o){return function(i,u,a,c,l){var f=Me.fromTable(u),s=S.from(null==l?void 0:l.section).getOrThunk(Cc);return n(f,a).map((function(n){var e=function(t,n){return Rc(t,n,!1)}(f,c),r=t(e,n,Pt,o(c),s),i=Re(r.grid);return{info:n,grid:Pc(r.grid),cursor:r.cursor,lockedColumns:i}})).bind((function(t){var n=kc(u,t.grid),o=S.from(null==l?void 0:l.sizing).getOrThunk((function(){return Xo(u)})),a=S.from(null==l?void 0:l.resize).getOrThunk(Zi);return e(u,t.grid,t.info,{sizing:o,resize:a,section:s}),r(u),oa(i,u),Fn(u,De),t.lockedColumns.length>0&&_n(u,De,t.lockedColumns.join(",")),S.some({cursor:t.cursor,newRows:n.newRows,newCells:n.newCells})}))}},Ic=function(t,n){return Ec(t,n,y).map((function(t){return{cells:t,generators:n.generators,clipboard:n.clipboard}}))},_c=function(t,n){return Ec(t,n,y)},Bc=function(t,n){return Ec(t,n,(function(t){return!t.isLocked}))},Lc=function(t,n){return U(n,(function(n){return function(t,n){return Nc(t,n).exists((function(t){return!t.isLocked}))}(t,n)}))},jc=function(t,n){return function(t,n){return n.mergable}(0,n).filter((function(n){return Lc(t,n.cells)}))},Fc=function(t,n){return function(t,n){return n.unmergable}(0,n).filter((function(n){return Lc(t,n)}))},Uc=function(t,n,e,r){for(var o=ke(t).rows,i=!0,u=0;u<o.length;u++)for(var a=0;a<Te(o[0]);a++){var c=o[u],l=Ce(c,a),f=e(l.element,n);!0===f&&!1===i?we(c,a,Jt(r(),!0,l.isLocked)):!0===f&&(i=!1)}return t},zc=function(t,n,e,r){var o=ke(t).rows;if(n>0&&n<o.length){var i=function(t,n){return _(t,(function(t,e){return A(t,(function(t){return n(t.element,e.element)}))?t:t.concat([e])}),[])}(o[n-1].cells,e);N(i,(function(t){for(var i=S.none(),u=n;u<o.length;u++)for(var a=function(n){var a=o[u],c=Ce(a,n);e(c.element,t.element)&&(i.isNone()&&(i=S.some(r())),i.each((function(t){we(a,n,Jt(t,!0,c.isLocked))})))},c=0;c<Te(o[0]);c++)a(c)}))}return t},Hc=function(t){return{isValue:y,isError:b,getOr:m(t),getOrThunk:m(t),getOrDie:m(t),or:function(n){return Hc(t)},orThunk:function(n){return Hc(t)},fold:function(n,e){return e(t)},map:function(n){return Hc(n(t))},mapError:function(n){return Hc(t)},each:function(n){n(t)},bind:function(n){return n(t)},exists:function(n){return n(t)},forall:function(n){return n(t)},toOptional:function(){return S.some(t)}}},Wc=function(t){return{isValue:b,isError:y,getOr:g,getOrThunk:function(t){return t()},getOrDie:function(){return function(t){return function(){throw new Error(t)}}(String(t))()},or:g,orThunk:function(t){return t()},fold:function(n,e){return n(t)},map:function(n){return Wc(t)},mapError:function(n){return Wc(n(t))},each:d,bind:function(n){return Wc(t)},exists:b,forall:y,toOptional:S.none}},Vc={value:Hc,error:Wc,fromOption:function(t,n){return t.fold((function(){return Wc(n)}),Hc)}},$c=function(t,n){return{rowDelta:0,colDelta:Te(t[0])-Te(n[0])}},qc=function(t,n){return{rowDelta:t.length-n.length,colDelta:0}},Kc=function(t,n,e,r){var o="colgroup"===n.section?e.col:e.cell;return R(t,(function(t){return Jt(o(),!0,r(t))}))},Gc=function(t,n,e,r){var o=t[t.length-1];return t.concat(R(n,(function(){var t="colgroup"===o.section?e.colgroup:e.row,n=Oe(o,t,g),i=Kc(n.cells.length,n,e,(function(t){return Vt(r,t.toString())}));return xe(n,i)})))},Yc=function(t,n,e,r){return P(t,(function(t){var o=Kc(n,t,e,b);return be(t,r,o)}))},Jc=function(t,n,e){var r=n.colDelta<0?Yc:g,o=n.rowDelta<0?Gc:g,i=Re(t),u=Te(t[0]),a=A(i,(function(t){return t===u-1})),c=r(t,Math.abs(n.colDelta),e,a?u-1:u),l=Re(c);return o(c,Math.abs(n.rowDelta),e,z(l,y))},Xc=function(t,n,e,r){var o=h(r,Ce(t[n],e).element),i=t[n];return t.length>1&&Te(i)>1&&(e>0&&o(Se(i,e-1))||e<i.cells.length-1&&o(Se(i,e+1))||n>0&&o(Se(t[n-1],e))||n<t.length-1&&o(Se(t[n+1],e)))},Qc=function(t,n,e){return M(e,(function(e){return e>=t.column&&e<=Te(n[0])+t.column}))},Zc=function(t,n,e,r,o){var i=Re(n),u=function(t,n,e){var r=Te(n[0]),o=ke(n).cols.length+t.row,i=R(r-t.column,(function(n){return n+t.column}));return{row:o,column:B(i,(function(t){return U(e,(function(n){return n!==t}))})).getOr(r-1)}}(t,n,i),a=ke(e).rows,c=Qc(u,a,i);return function(t,n,e){if(t.row>=n.length||t.column>Te(n[0]))return Vc.error("invalid start address out of table bounds, row: "+t.row+", column: "+t.column);var r=n.slice(t.row),o=r[0].cells.slice(t.column),i=Te(e[0]),u=e.length;return Vc.value({rowDelta:r.length-u,colDelta:o.length-i})}(u,n,a).map((function(t){var e=K(K({},t),{colDelta:t.colDelta-c.length}),i=Jc(n,e,r),l=Re(i),f=Qc(u,a,l);return function(t,n,e,r,o,i){for(var u=t.row,a=t.column,c=u+e.length,l=a+Te(e[0])+i.length,f=z(i,y),s=u;s<c;s++)for(var d=0,m=a;m<l;m++)if(f[m])d++;else{Xc(n,s,m,o)&&Uc(n,Se(n[s],m),o,r.cell);var g=m-a-d,p=Ce(e[s-u],g),h=p.element,v=r.replace(h);we(n[s],m,Jt(v,!0,p.isLocked))}return n}(u,i,a,r,o,f)}))},tl=function(t,n,e,r,o){!function(t,n,e,r){n>0&&n<t[0].cells.length&&N(t,(function(t){var o=t.cells[n-1],i=t.cells[n];e(i.element,o.element)&&we(t,n,Jt(r(),!0,i.isLocked))}))}(n,t,o,r.cell);var i=qc(e,n),u=Jc(e,i,r),a=qc(n,u),c=Jc(n,a,r);return P(c,(function(n,e){return be(n,t,u[e].cells)}))},nl=function(t,n,e,r,o){zc(n,t,o,r.cell);var i=Re(n),u=$c(n,e),a=K(K({},u),{colDelta:u.colDelta-i.length}),c=Jc(n,a,r),l=ke(c),f=l.cols,s=l.rows,d=Re(c),m=$c(e,n),g=K(K({},m),{colDelta:m.colDelta+d.length}),p=function(t,n,e){return P(t,(function(t){return _(e,(function(e,r){var o=Kc(1,t,n,y)[0];return ye(e,r,o)}),t)}))}(e,r,d),h=Jc(p,g,r);return f.concat(s.slice(0,t)).concat(h).concat(s.slice(t,s.length))},el=function(t,n,e,r,o){var i=ke(t),u=i.rows,a=i.cols,c=u.slice(0,n),l=u.slice(n),f=function(t,n,e,r){return Oe(t,(function(t){return r(t,e)}),n)}(u[e],(function(t,e){return n>0&&n<u.length&&r(Se(u[n-1],e),Se(u[n],e))?Ce(u[n],e):Jt(o(t.element,r),!0,t.isLocked)}),r,o);return a.concat(c).concat([f]).concat(l)},rl=function(t,n,e,r,o){return P(t,(function(t){var i=n>0&&n<Te(t)&&r(Se(t,n-1),Se(t,n)),u=function(t,n,e,r,o,i,u){if("colgroup"!==e&&r)return Ce(t,n);var a=Ce(t,o);return Jt(u(a.element,i),!0,!1)}(t,n,t.section,i,e,r,o);return ye(t,n,u)}))},ol=function(t,n,e,r){return function(t,n,e,r){return void 0!==Se(t[n],e)&&n>0&&r(Se(t[n-1],e),Se(t[n],e))}(t,n,e,r)||function(t,n,e){return n>0&&e(Se(t,n-1),Se(t,n))}(t[n],e,r)},il=function(t,n,e,r){var o=function(t){return function(t){return"row"===t?re(n):ee(n)}(t)?t+"group":t};return t?cc(n)?o(e):null:r&&cc(n)?o("row"===e?"col":"row"):null},ul=function(t,n,e){return Jt(e(t.element,n),!0,t.isLocked)},al=function(t,n,e,r,o,i,u){var a=function(t){return A(n,(function(n){return e(t.element,n.element)}))};return P(t,(function(t,n){return function(t,n){var e=t.cells,r=P(e,n);return Xt(t.element,r,t.section,t.isNew)}(t,(function(t,c){if(a(t)){var l=u(t,n,c)?o(t,e,r):t;return i(l,n,c).each((function(t){!function(t,n){Bt(n,(function(n,e){n.fold((function(){Fn(t,e)}),(function(n){In(t.dom,e,n)}))}))}(l.element,{scope:S.from(t)})})),l}return t}))}))},cl=function(t,n,e){return F(t,(function(r,o){return ol(t,o,n,e)?[]:[Ce(r,n)]}))},ll=function(t,n,e,r,o){var i=ke(t).rows,u=F(n,(function(t){return cl(i,t,r)})),a=P(t,(function(t){return lc(t.cells)})),c=function(t,n){return U(n,g)&&lc(t)?y:function(t,e,r){return!("th"===Qt(t.element)&&n[e])}}(u,a),l=function(t,n){return function(e,r){return S.some(il(t,e.element,"row",n[r]))}}(e,a);return al(t,u,r,o,ul,l,c)},fl=function(t,n,e,r,o,i,u){var a=ke(t),c=a.cols,l=a.rows,f=l[n[0]],s=F(n,(function(t){return function(t,n,e){var r=t[n];return F(r.cells,(function(r,o){return ol(t,n,o,e)?[]:[r]}))}(l,t,o)})),d=P(f.cells,(function(t,n){return lc(cl(l,n,o))})),m=G([],l,!0);N(n,(function(t){m[t]=u.transformRow(l[t],e)}));var p=c.concat(m),h=function(t,n){return U(n,g)&&lc(t.cells)?y:function(t,e,r){return!("th"===Qt(t.element)&&n[r])}}(f,d),v=function(t,n){return function(e,r,o){return S.some(il(t,e.element,"col",n[o]))}}(r,d);return al(p,s,o,i,u.transformCell,v,h)},sl=function(t,n,e,r){var o=ke(t).rows,i=P(n,(function(t){return Ce(o[t.row],t.column)}));return al(t,i,e,r,ul,S.none,y)},dl=function(t){return _(t,(function(t,n){return A(t,(function(t){return t.column===n.column}))?t:t.concat([n])}),[]).sort((function(t,n){return t.column-n.column}))},ml=an("col"),gl=an("colgroup"),pl=function(t){return"tr"===Qt(t)||gl(t)},hl=function(t){return{element:t,colspan:te(t,"colspan",1),rowspan:te(t,"rowspan",1)}},vl=function(t){return jn(t,"scope").map((function(t){return t.substr(0,3)}))},bl=function(t,n){void 0===n&&(n=hl);var e=function(n){return ml(n.element)?t.col(n):t.cell(n)},r=function(n){return gl(n.element)?t.colgroup(n):t.row(n)},o=function(t){if(pl(t))return r({element:t});var o=e(n(t));return i=S.some({item:t,replacement:o}),o},i=S.none();return{getOrInit:function(t,n){return i.fold((function(){return o(t)}),(function(e){return n(t,e.item)?e.replacement:o(t)}))}}},yl=function(t){return function(n){var e=[],r=function(r){var o="td"===t?{scope:null}:{},i=n.replace(r,t,o);return e.push({item:r,sub:i}),i};return{replaceOrInit:function(t,n){return pl(t)||ml(t)?t:function(t,n){return B(e,(function(e){return n(e.item,t)}))}(t,n).fold((function(){return r(t)}),(function(e){return n(t,e.item)?e.sub:r(t)}))}}}},wl=function(t){return{unmerge:function(n){var e=vl(n);return e.each((function(t){return _n(n,"scope",t)})),function(){var r=t.cell({element:n,colspan:1,rowspan:1});return Zn(r,"width"),Zn(n,"width"),e.each((function(t){return _n(r,"scope",t)})),r}},merge:function(t){return Zn(t[0],"width"),function(){var n=Hn(P(t,vl));if(0===n.length)return S.none();var e=n[0],r=["row","col"];return A(n,(function(t){return t!==e&&D(r,t)}))?S.none():S.from(e)}().fold((function(){return Fn(t[0],"scope")}),(function(n){return _n(t[0],"scope",n+"group")})),m(t[0])}}},xl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Cl=ir(),Sl=function(t){return function(t,n){var e=t.property().name(n);return D(xl,e)}(Cl,t)},Tl=function(t){return function(t,n){var e=t.property().name(n);return D(["ol","ul"],e)}(Cl,t)},kl=function(t){return function(t,n){return D(["br","img","hr","input"],t.property().name(n))}(Cl,t)},Ol=function(t){var n=function(t){return"br"===Qt(t)},e=function(t){return U(t,(function(t){return n(t)||rn(t)&&0===nr(t).trim().length}))},r=function(t){return ui(t).bind((function(e){var r=function(t){return mn(t).map((function(t){return!!Sl(t)||!!kl(t)&&"img"!==Qt(t)})).getOr(!1)}(e);return fn(e).map((function(o){return!0===r||function(t){return"li"===Qt(t)||Rn(t,Tl).isSome()}(o)||n(e)||Sl(o)&&!Pt(t,o)?[]:[Ot.fromTag("br")]}))})).getOr([])},o=function(){var n=F(t,(function(t){var n=gn(t);return e(n)?[]:n.concat(r(t))}));return 0===n.length?[Ot.fromTag("br")]:n}();Xe(t[0]),Je(t[0],o)},Dl=function(t){return $u(t,!0)},Al=function(t){0===fe(t).length&&Qe(t)},Rl=function(t,n){return{grid:t,cursor:n}},Pl=function(t,n,e){var r,o,i=ke(t).rows;return S.from(null===(o=null===(r=i[n])||void 0===r?void 0:r.cells[e])||void 0===o?void 0:o.element).filter(Dl).orThunk((function(){return function(t){return q(t,(function(t){return q(t.cells,(function(t){var n=t.element;return $n(Dl(n),n)}))}))}(i)}))},Nl=function(t,n,e){var r=Pl(t,n,e);return Rl(t,r)},El=function(t){return _(t,(function(t,n){return A(t,(function(t){return t.row===n.row}))?t:t.concat([n])}),[]).sort((function(t,n){return t.row-n.row}))},Ml=function(t,n){return function(e,r,o,i,u){var a=El(r),c=P(a,(function(t){return t.row})),l=fl(e,c,t,n,o,i.replaceOrInit,u);return Nl(l,r[0].row,r[0].column)}},Il=Ml("thead",!0),_l=Ml("tbody",!1),Bl=Ml("tfoot",!1),Ll=function(t,n,e){var r=function(t,n){return pe(t,(function(){return n}))}(t,e.section),o=Me.generate(r);return Rc(o,n,!0)},jl=function(t,n,e,r){return function(t,n,e,r){var o=Me.generate(n),i=r.getWidths(o,r);Vi(o,i,r)}(0,n,0,r.sizing)},Fl=function(t,n,e,r){return function(t,n,e,r,o){var i=Me.generate(n),u=r.getWidths(i,r),a=r.pixelWidth(),c=o.calcRedestributedWidths(u,a,e.pixelDelta,r.isRelative),l=c.newSizes,f=c.delta;Vi(i,l,r),r.adjustTableWidth(f)}(0,n,e,r.sizing,r.resize)},Ul=function(t,n){return A(n,(function(t){return 0===t.column&&t.isLocked}))},zl=function(t,n){return A(n,(function(n){return n.column+n.colspan>=t.grid.columns&&n.isLocked}))},Hl=function(t,n){var e=Hr(t),r=dl(n);return _(r,(function(t,n){return t+e[n.column].map(Fr).getOr(0)}),0)},Wl=function(t){return function(n,e){return _c(n,e).filter((function(e){return!(t?Ul:zl)(n,e)})).map((function(t){return{details:t,pixelDelta:Hl(n,t)}}))}},Vl=function(t){return function(n,e){return Ic(n,e).filter((function(e){return!(t?Ul:zl)(n,e.cells)}))}},$l=yl("th"),ql=yl("td"),Kl=Mc((function(t,n,e,r){var o=n[0].row,i=El(n),u=I(i,(function(t,n){return{grid:el(t.grid,o,n.row+t.delta,e,r.getOrInit),delta:t.delta+1}}),{grid:t,delta:0}).grid;return Nl(u,o,n[0].column)}),_c,d,d,bl),Gl=Mc((function(t,n,e,r){var o=El(n),i=o[o.length-1],u=i.row+i.rowspan,a=I(o,(function(t,n){return el(t,u,n.row,e,r.getOrInit)}),t);return Nl(a,u,n[0].column)}),_c,d,d,bl),Yl=Mc((function(t,n,e,r){var o=n.details,i=dl(o),u=i[0].column,a=I(i,(function(t,n){return{grid:rl(t.grid,u,n.column+t.delta,e,r.getOrInit),delta:t.delta+1}}),{grid:t,delta:0}).grid;return Nl(a,o[0].row,u)}),Wl(!0),Fl,d,bl),Jl=Mc((function(t,n,e,r){var o=n.details,i=o[o.length-1],u=i.column+i.colspan,a=dl(o),c=I(a,(function(t,n){return rl(t,u,n.column,e,r.getOrInit)}),t);return Nl(c,o[0].row,u)}),Wl(!1),Fl,d,bl),Xl=Mc((function(t,n,e,r){var o=dl(n.details),i=function(t,n){return F(t,(function(t){var e=t.cells,r=I(n,(function(t,n){return n>=0&&n<t.length?t.slice(0,n).concat(t.slice(n+1)):t}),e);return r.length>0?[Xt(t.element,r,t.section,t.isNew)]:[]}))}(t,P(o,(function(t){return t.column}))),u=i.length>0?i[0].cells.length-1:0;return Nl(i,o[0].row,Math.min(o[0].column,u))}),(function(t,n){return Bc(t,n).map((function(n){return{details:n,pixelDelta:-Hl(t,n)}}))}),Fl,Al,bl),Ql=Mc((function(t,n,e,r){var o=El(n),i=function(t,n,e){var r=ke(t),o=r.rows;return r.cols.concat(o.slice(0,n)).concat(o.slice(e+1))}(t,o[0].row,o[o.length-1].row),u=i.length>0?i.length-1:0;return Nl(i,Math.min(n[0].row,u),n[0].column)}),_c,d,Al,bl),Zl=Mc((function(t,n,e,r){var o=dl(n),i=P(o,(function(t){return t.column})),u=ll(t,i,!0,e,r.replaceOrInit);return Nl(u,n[0].row,n[0].column)}),Bc,d,d,$l),tf=Mc((function(t,n,e,r){var o=dl(n),i=P(o,(function(t){return t.column})),u=ll(t,i,!1,e,r.replaceOrInit);return Nl(u,n[0].row,n[0].column)}),Bc,d,d,ql),nf=Mc(Il,Bc,d,d,$l),ef=Mc(_l,Bc,d,d,ql),rf=Mc(Bl,Bc,d,d,ql),of=Mc((function(t,n,e,r){var o=sl(t,n,e,r.replaceOrInit);return Nl(o,n[0].row,n[0].column)}),Bc,d,d,$l),uf=Mc((function(t,n,e,r){var o=sl(t,n,e,r.replaceOrInit);return Nl(o,n[0].row,n[0].column)}),Bc,d,d,ql),af=Mc((function(t,n,e,r){var o=n.cells;Ol(o);var i=function(t,n,e,r){var o=ke(t).rows;if(0===o.length)return t;for(var i=n.startRow;i<=n.finishRow;i++)for(var u=n.startCol;u<=n.finishCol;u++){var a=o[i],c=Ce(a,u).isLocked;we(a,u,Jt(r(),!1,c))}return t}(t,n.bounds,0,r.merge(o));return Rl(i,S.from(o[0]))}),jc,jl,d,wl),cf=Mc((function(t,n,e,r){var o=I(n,(function(t,n){return Uc(t,n,e,r.unmerge(n))}),t);return Rl(o,S.from(n[0]))}),Fc,jl,d,wl),lf=Mc((function(t,n,e,r){var o=function(t,n){var e=Me.fromTable(t);return Rc(e,n,!0)}(n.clipboard,n.generators),i=function(t,n){return{row:t,column:n}}(n.row,n.column);return Zc(i,t,o,n.generators,e).fold((function(){return Rl(t,S.some(n.element))}),(function(t){return Nl(t,n.row,n.column)}))}),(function(t,n){return le(n.element).bind((function(e){return Nc(t,e).map((function(t){return K(K({},t),{generators:n.generators,clipboard:n.clipboard})}))}))}),jl,d,bl),ff=Mc((function(t,n,e,r){var o=ke(t).rows,i=n.cells[0].column,u=o[n.cells[0].row],a=Ll(n.clipboard,n.generators,u),c=tl(i,t,a,n.generators,e);return Nl(c,n.cells[0].row,n.cells[0].column)}),Vl(!0),d,d,bl),sf=Mc((function(t,n,e,r){var o=ke(t).rows,i=n.cells[n.cells.length-1].column+n.cells[n.cells.length-1].colspan,u=o[n.cells[0].row],a=Ll(n.clipboard,n.generators,u),c=tl(i,t,a,n.generators,e);return Nl(c,n.cells[0].row,n.cells[0].column)}),Vl(!1),d,d,bl),df=Mc((function(t,n,e,r){var o=ke(t).rows,i=n.cells[0].row,u=o[i],a=Ll(n.clipboard,n.generators,u),c=nl(i,t,a,n.generators,e);return Nl(c,n.cells[0].row,n.cells[0].column)}),Ic,d,d,bl),mf=Mc((function(t,n,e,r){var o=ke(t).rows,i=n.cells[n.cells.length-1].row+n.cells[n.cells.length-1].rowspan,u=o[n.cells[0].row],a=Ll(n.clipboard,n.generators,u),c=nl(i,t,a,n.generators,e);return Nl(c,n.cells[0].row,n.cells[0].column)}),Ic,d,d,bl),gf=function(t,n){var e=Me.fromTable(t);return _c(e,n).bind((function(t){var n=t[t.length-1],r=t[0].column,o=n.column+n.colspan,i=j(P(e.all,(function(t){return M(t.cells,(function(t){return t.column>=r&&t.column<o}))})));return dc(i)})).getOr("")},pf=function(t,n){var e=Me.fromTable(t);return _c(e,n).bind(dc).getOr("")},hf=function(t,n){var e=Me.fromTable(t);return _c(e,n).bind((function(t){var n=t[t.length-1],r=t[0].row,o=n.row+n.rowspan;return function(t){var n=P(t,(function(t){return sc(t).type})),e=D(n,"header"),r=D(n,"footer");if(e||r){var o=D(n,"body");return!e||o||r?e||o||!r?S.none():S.some("footer"):S.some("header")}return S.some("body")}(e.all.slice(r,o))})).getOr("")},vf=function(t,n,e){var r=function(t){return"table"===Qt(yi(t))},o=Ha(t),i=za(t)?d:ac,u=function(n){switch(ja(t)){case"section":return yc();case"sectionCells":return wc();case"cells":return xc();default:return bc(n,"section")}},a=function(e,r){return r.cursor.fold((function(){var r=fe(e);return V(r).filter(Cn).map((function(r){n.clear(e);var o=t.dom.createRng();return o.selectNode(r.dom),t.selection.setRng(o),_n(r,"data-mce-selected","1"),o}))}),(function(r){var o=function(t){return ic(uc,t)}(r),i=t.dom.createRng();return i.setStart(o.element.dom,o.offset),i.setEnd(o.element.dom,o.offset),t.selection.setRng(i),n.clear(e),S.some(i)}))},c=function(n,e,r,i,c){return function(l,f,s){void 0===s&&(s=!1),Ti(l);var d=i(),m=Ot.fromDom(t.getDoc()),g=pi(r,m,o),p={sizing:qa(t,l),resize:za(t)?Qi():Zi(),section:u(l)};return e(l)?n(d,l,f,g,p).bind((function(n){N(n.newRows,(function(n){sa(t,n.dom)})),N(n.newCells,(function(n){da(t,n.dom)}));var e=a(l,n);return Cn(l)&&(Ti(l),s||ma(t,l.dom,c)),e.map((function(t){return{rng:t,effect:c}}))})):S.none()}};return{deleteRow:c(Ql,(function(n){return!1===r(t)||hu(n).rows>1}),d,e,pa),deleteColumn:c(Xl,(function(n){return!1===r(t)||hu(n).columns>1}),d,e,pa),insertRowsBefore:c(Kl,y,d,e,pa),insertRowsAfter:c(Gl,y,d,e,pa),insertColumnsBefore:c(Yl,y,i,e,pa),insertColumnsAfter:c(Jl,y,i,e,pa),mergeCells:c(af,y,d,e,pa),unmergeCells:c(cf,y,d,e,pa),pasteColsBefore:c(ff,y,d,e,pa),pasteColsAfter:c(sf,y,d,e,pa),pasteRowsBefore:c(df,y,d,e,pa),pasteRowsAfter:c(mf,y,d,e,pa),pasteCells:c(lf,y,d,e,ha),makeCellsHeader:c(of,y,d,e,pa),unmakeCellsHeader:c(uf,y,d,e,pa),makeColumnsHeader:c(Zl,y,d,e,pa),unmakeColumnsHeader:c(tf,y,d,e,pa),makeRowsHeader:c(nf,y,d,e,pa),makeRowsBody:c(ef,y,d,e,pa),makeRowsFooter:c(rf,y,d,e,pa),getTableRowType:hf,getTableCellType:pf,getTableColType:gf}},bf={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},yf=function(t){var n=Ot.fromTag("colgroup");return R(t,(function(){return Ke(n,Ot.fromTag("col"))})),n},wf=function(t,n,e,r){return R(t,(function(t){return function(t,n,e,r){for(var o=Ot.fromTag("tr"),i=0;i<t;i++){var u=r<n||i<e?Ot.fromTag("th"):Ot.fromTag("td");i<e&&_n(u,"scope","row"),r<n&&_n(u,"scope","col"),Ke(u,Ot.fromTag("br")),Ke(o,u)}return o}(n,e,r,t)}))},xf=function(t,n){t.selection.select(n.dom,!0),t.selection.collapse(!0)},Cf=function(t){return r(t)&&-1!==t.indexOf("%")},Sf=function(t,n,e,r,o){var i=Da(t),u={styles:i,attributes:Oa(t),colGroups:La(t)};return t.undoManager.ignore((function(){var i=function(t,n,e,r,o,i){void 0===i&&(i=bf);var u=Ot.fromTag("table"),a="cells"!==o;Yn(u,i.styles),Bn(u,i.attributes),i.colGroups&&Ke(u,yf(n));var c=Math.min(t,e);if(a&&e>0){var l=Ot.fromTag("thead");Ke(u,l);var f=wf(e,n,"sectionCells"===o?c:0,r);Je(l,f)}var s=Ot.fromTag("tbody");Ke(u,s);var d=wf(a?t-c:t,n,a?0:e,r);return Je(s,d),u}(e,n,o,r,ja(t),u);_n(i,"data-mce-id","__mce");var a=function(t){var n=Ot.fromTag("div"),e=Ot.fromDom(t.dom.cloneNode(!0));return Ke(n,e),function(t){return t.dom.innerHTML}(n)}(i);t.insertContent(a),t.addVisual()})),En(yi(t),'table[data-mce-id="__mce"]').map((function(n){return _a(t)?Ya(n):Ba(t)?Ja(n):(Ia(t)||Cf(i.width))&&Ga(n),Ti(n),Fn(n,"data-mce-id"),function(t,n){N(Dn(n,"tr"),(function(n){sa(t,n.dom),N(Dn(n,"th,td"),(function(n){da(t,n.dom)}))}))}(t,n),function(t,n){En(n,"td,th").each(h(xf,t))}(t,n),n.dom})).getOr(null)},Tf=function(t,n,e,r,o){void 0===r&&(r={});var i=function(t){return s(t)&&t>0};if(i(n)&&i(e)){var u=r.headerRows||0,a=r.headerColumns||0;return Sf(t,e,n,a,u)}return console.error(o),null},kf=function(t){return function(){return t().fold((function(){return[]}),(function(t){return P(t,(function(t){return t.dom}))}))}},Of=function(t){return function(n){var e=n.length>0?S.some(vi(n)):S.none();t(e)}},Df=function(t){return function(n,e,r){void 0===r&&(r={});var o=Tf(t,e,n,r,"Invalid values for insertTable - rows and columns values are required to insert a table.");return t.undoManager.add(),o}},Af=function(t,n,e){var r=te(t,n,1);1===e||r<=1?Fn(t,n):_n(t,n,Math.min(e,r))},Rf=function(t,n){var e=Me.fromTable(t);return Bc(e,n).map((function(t){var n=t[t.length-1],r=t[0].column,o=n.column+n.colspan,i=function(t,n,e){if(Me.hasColumns(t)){var r=M(Me.justColumns(t),(function(t){return t.column>=n&&t.column<e})),o=P(r,(function(t){var r=Ar(t.element);return Af(r,"span",e-n),r})),i=Ot.fromTag("colgroup");return Je(i,o),[i]}return[]}(e,r,o),u=function(t,n,e){return P(t.all,(function(t){var r=M(t.cells,(function(t){return t.column>=n&&t.column<e})),o=P(r,(function(t){var r=Ar(t.element);return Af(r,"colspan",e-n),r})),i=Ot.fromTag("tr");return Je(i,o),i}))}(e,r,o);return G(G([],i,!0),u,!0)}))},Pf=function(t,n,e){var r=Me.fromTable(t);return _c(r,n).bind((function(t){var n=Rc(r,e,!1),o=ke(n).rows.slice(t[0].row,t[t.length-1].row+t[t.length-1].rowspan),i=F(o,(function(t){var n=M(t.cells,(function(t){return!t.isLocked}));return n.length>0?[K(K({},t),{cells:n})]:[]})),u=Pc(i);return $n(u.length>0,u)})).map((function(t){return function(t){return P(t,(function(t){var n=Dr(t.element);return N(t.cells,(function(t){var e=Ar(t.element);Sc(e,"colspan",t.colspan,1),Sc(e,"rowspan",t.rowspan,1),Ke(n,e)})),n}))}(t)}))},Nf=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ef=function(t,n,e){return function(n,r){for(var o=0;o<r.length;o++){var i=t.getStyle(r[o],e);if(void 0===n&&(n=i),n!==i)return""}return n}(void 0,t.select("td,th",n))},Mf=function(t,n,e){e&&t.formatter.apply("align"+e,{},n)},If=function(t,n){Nf.each("left center right".split(" "),(function(e){t.formatter.remove("align"+e,{},n)}))},_f=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Bf=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Lf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,jf=function(t){return function(t,n){return et(t,n)?function(t,n){return t.substring(n)}(t,n.length):t}(t,"#").toUpperCase()},Ff=function(t){return function(t){return Bf.test(t)||Lf.test(t)}(t)?S.some({value:jf(t)}):S.none()},Uf=function(t){var n=t.toString(16);return(1===n.length?"0"+n:n).toUpperCase()},zf=function(t){return function(t){return{value:t}}(Uf(t.red)+Uf(t.green)+Uf(t.blue))},Hf=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Wf=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Vf=function(t,n,e,r){return{red:t,green:n,blue:e,alpha:r}},$f=function(t,n,e,r){var o=parseInt(t,10),i=parseInt(n,10),u=parseInt(e,10),a=parseFloat(r);return Vf(o,i,u,a)},qf=function(t){return Ff(t).orThunk((function(){return function(t){if("transparent"===t)return S.some(Vf(0,0,0,0));var n=Hf.exec(t);if(null!==n)return S.some($f(n[1],n[2],n[3],"1"));var e=Wf.exec(t);return null!==e?S.some($f(e[1],e[2],e[3],e[4])):S.none()}(t).map(zf)})).getOrThunk((function(){var n=document.createElement("canvas");n.height=1,n.width=1;var e=n.getContext("2d");e.clearRect(0,0,n.width,n.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1);var r=e.getImageData(0,0,1,1).data,o=r[0],i=r[1],u=r[2],a=r[3];return zf(Vf(o,i,u,a))}))},Kf=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},Gf=function(t){var n=Kf(S.none()),e=function(){return n.get().each(t)};return{clear:function(){e(),n.set(S.none())},isSet:function(){return n.get().isSome()},get:function(){return n.get()},set:function(t){e(),n.set(S.some(t))}}},Yf=function(){var t=Gf(d);return K(K({},t),{on:function(n){return t.get().each(n)}})},Jf=function(t,n,e,r){return function(o){var i=Gf((function(t){return t.unbind()})),u=function(t){return!it(t)}(r),a=function(){var a=Li(n),c=function(n){return t.formatter.match(e,{value:r},n.dom,u)};u?(o.setActive(!A(a,c)),i.set(t.formatter.formatChanged(e,(function(t){return o.setActive(!t)}),!0))):(o.setActive(U(a,c)),i.set(t.formatter.formatChanged(e,o.setActive,!1,{value:r})))};return t.initialized?a():t.on("init",a),i.clear}},Xf=function(t){return $t(t,"menu")},Qf=function(t){return P(t,(function(t){var n=t.text||t.title;return Xf(t)?{text:n,items:Qf(t.menu)}:{text:n,value:t.value}}))},Zf=function(t,n,e,r,o){return P(e,(function(e){var i=e.text||e.title;return Xf(e)?{type:"nestedmenuitem",text:i,getSubmenuItems:function(){return Zf(t,n,e.menu,r,o)}}:{text:i,type:"togglemenuitem",onAction:function(){return o(e.value)},onSetup:Jf(t,n,r,e.value)}}))},ts=function(t,n){return function(e){var r;t.execCommand("mceTableApplyCellStyle",!1,((r={})[n]=e,r))}},ns=function(t){return F(t,(function(t){return Xf(t)?[K(K({},t),{menu:ns(t.menu)})]:it(t.value)?[t]:[]}))},es=function(t,n,e,r,o){return function(i){return i(Zf(t,n,e,r,o))}},rs=function(t,n,e){var r=P(n,(function(t){return{text:t.title,value:"#"+qf(t.value).value,type:"choiceitem"}}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:r.length>0?r:void 0,allowCustomColors:!1},onAction:function(n){var r,o="remove"===n.value?"":n.value;t.execCommand("mceTableApplyCellStyle",!1,((r={})[e]=o,r))}}]},os=function(t){return function(){var n="header"===t.queryCommandValue("mceTableRowType")?"body":"header";t.execCommand("mceTableRowType",!1,{type:n})}},is=function(t){return function(){var n="th"===t.queryCommandValue("mceTableColType")?"td":"th";t.execCommand("mceTableColType",!1,{type:n})}},us=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:_f}],as=function(t){return us.concat(function(t){var n=Qf(Ea(t));return n.length>0?S.some({name:"class",type:"listbox",label:"Class",items:n}):S.none()}(t).toArray())},cs=function(t,n){var e=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(Qf(ka(t)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===n?[{name:"borderwidth",type:"input",label:"Border width"}].concat(e):e}},ls=function(t){return function(n,e){var r=n.dom;return{setAttrib:function(n,o){t&&!o||r.setAttrib(e,n,o)},setStyle:function(n,o){t&&!o||r.setStyle(e,n,o)},setFormat:function(r,o){t&&!o||(""===o?n.formatter.remove(r,{value:null},e,!0):n.formatter.apply(r,{value:o},e))}}}},fs={normal:ls(!1),ifTruthy:ls(!0)},ss=function(t){return function(n){return et(n,"rgb")?t.toHex(n):n}},ds=function(t,n){var e=Ot.fromDom(n);return{borderwidth:Qn(e,"border-width").getOr(""),borderstyle:Qn(e,"border-style").getOr(""),bordercolor:Qn(e,"border-color").map(ss(t)).getOr(""),backgroundcolor:Qn(e,"background-color").map(ss(t)).getOr("")}},ms=function(t){var n=t[0],e=t.slice(1);return N(e,(function(t){N(It(n),(function(e){Bt(t,(function(t,r){var o=n[e];""!==o&&e===r&&o!==t&&(n[e]="")}))}))})),n},gs=function(t,n,e,r){return B(t,(function(t){return!c(e.formatter.matchNode(r,n+t))})).getOr("")},ps=h(gs,["left","center","right"],"align"),hs=h(gs,["top","middle","bottom"],"valign"),vs=function(t){return de(Ot.fromDom(t)).map((function(n){var e={selection:vi(t.cells)};return hf(n,e)})).getOr("")},bs=function(t,n){var e=Me.fromTable(t),r=Me.justCells(e),o=M(r,(function(t){return A(n,(function(n){return Pt(t.element,n)}))}));return P(o,(function(t){return{element:t.element.dom,column:Me.getColumnAt(e,t.column).map((function(t){return t.element.dom}))}}))},ys=function(t,n,e){var r=1===n.length;N(n,(function(n){var o=n.element,i=r?fs.normal(t,o):fs.ifTruthy(t,o);(function(t,n,e){t.setAttrib("scope",e.scope),t.setAttrib("class",e.class),t.setStyle("height",Si(e.height)),n.setStyle("width",Si(e.width))})(i,n.column.map((function(n){return r?fs.normal(t,n):fs.ifTruthy(t,n)})).getOr(i),e),Aa(t)&&function(t,n){t.setFormat("tablecellbackgroundcolor",n.backgroundcolor),t.setFormat("tablecellbordercolor",n.bordercolor),t.setFormat("tablecellborderstyle",n.borderstyle),t.setFormat("tablecellborderwidth",Si(n.borderwidth))}(i,e),r&&(If(t,o),function(t,n){Nf.each("top middle bottom".split(" "),(function(e){t.formatter.remove("valign"+e,{},n)}))}(t,o)),e.halign&&Mf(t,o,e.halign),e.valign&&function(t,n,e){e&&t.formatter.apply("valign"+e,{},n)}(t,o,e.valign)}))},ws=function(t,n,e,r){var o=r.getData();r.close(),t.undoManager.transact((function(){(function(t,n,e,r){var o=Ft(r,(function(t,n){return e[n]!==t}));Ht(o)>0&&n.length>=1&&de(n[0]).each((function(e){var i=bs(e,n),u=Ht(Ft(o,(function(t,n){return"scope"!==n&&"celltype"!==n})))>0,a=Vt(o,"celltype");(u||Vt(o,"scope"))&&ys(t,i,r),a&&function(t,n){t.execCommand("mceTableCellType",!1,{type:n.celltype,no_events:!0})}(t,r),ma(t,e.dom,{structure:a,style:u})}))})(t,n,e,o),t.focus()}))},xs=function(t,n){var e=de(n[0]).map((function(e){return P(bs(e,n),(function(n){return function(t,n,e,r){var o=t.dom,i=r.getOr(n),u=function(t,n){return o.getStyle(t,n)||o.getAttrib(t,n)};return K({width:u(i,"width"),height:u(n,"height"),scope:o.getAttrib(n,"scope"),celltype:bi(n),class:o.getAttrib(n,"class",""),halign:ps(t,n),valign:hs(t,n)},e?ds(o,n):{})}(t,n.element,Aa(t),n.column)}))}));return ms(e.getOrDie())},Cs=function(t,n){var e=Li(n);if(0!==e.length){var r=xs(t,e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:as(t)},cs(t,"cell")]},i={type:"panel",items:[{type:"grid",columns:2,items:as(t)}]};t.windowManager.open({title:"Cell Properties",size:"normal",body:Aa(t)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:h(ws,t,e,r)})}},Ss=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Ts=function(t){return Ss.concat(function(t){var n=Qf(function(t){return t.getParam("table_row_class_list",[],"array")}(t));return n.length>0?S.some({name:"class",type:"listbox",label:"Class",items:n}):S.none()}(t).toArray())},ks=function(t,n,e,r){var o=1===n.length;N(n,(function(n){var i=o?fs.normal(t,n):fs.ifTruthy(t,n);(function(t,n){t.setAttrib("class",n.class),t.setStyle("height",Si(n.height))})(i,e),Ra(t)&&function(t,n){t.setStyle("background-color",n.backgroundcolor),t.setStyle("border-color",n.bordercolor),t.setStyle("border-style",n.borderstyle)}(i,e),e.align!==r.align&&(If(t,n),Mf(t,n,e.align))}))},Os=function(t,n,e,r){var o=r.getData();r.close(),t.undoManager.transact((function(){(function(t,n,e,r){var o=Ft(r,(function(t,n){return e[n]!==t}));if(Ht(o)>0){var i=Vt(o,"type"),u=!i||Ht(o)>1;u&&ks(t,n,r,e),i&&function(t,n){t.execCommand("mceTableRowType",!1,{type:n.type,no_events:!0})}(t,r),de(Ot.fromDom(n[0])).each((function(n){return ma(t,n.dom,{structure:i,style:u})}))}})(t,n,e,o),t.focus()}))},Ds=function(t){var n=function(t,n){var e=Bi(t),r=e.bind((function(t){return de(t)})).map((function(t){return me(t)}));return Wn(e,r,(function(t,e){return M(e,(function(e){return A(vi(e.dom.cells),(function(e){return"1"===Ln(e,n)||Pt(e,t)}))}))})).getOr([])}(ki(t),Ei.selected);if(0!==n.length){var e=P(n,(function(n){return function(t,n,e){var r=t.dom;return K({height:r.getStyle(n,"height")||r.getAttrib(n,"height"),class:r.getAttrib(n,"class",""),type:vs(n),align:ps(t,n)},e?ds(r,n):{})}(t,n.dom,Ra(t))})),r=ms(e),o={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ts(t)},cs(t,"row")]},i={type:"panel",items:[{type:"grid",columns:2,items:Ts(t)}]};t.windowManager.open({title:"Row Properties",size:"normal",body:Ra(t)?o:i,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onSubmit:h(Os,t,P(n,(function(t){return t.dom})),r)})}},As=function(t,n,e){var r=e?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],o=function(t){return t.getParam("table_appearance_options",!0,"boolean")}(t)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],i=n.length>0?[{type:"listbox",name:"class",label:"Class",items:n}]:[];return r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(o).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(i)},Rs=function(t,n,e,o){if("TD"===n.tagName||"TH"===n.tagName)r(e)?t.setStyle(n,e,o):t.setStyle(n,e);else if(n.children)for(var i=0;i<n.children.length;i++)Rs(t,n.children[i],e,o)},Ps=function(t,n,e,r){var o=t.dom,i=r.getData(),u=Ft(i,(function(t,n){return e[n]!==t}));r.close(),""===i.class&&delete i.class,t.undoManager.transact((function(){if(!n){var e=parseInt(i.cols,10)||1,r=parseInt(i.rows,10)||1;n=Sf(t,e,r,0,0)}if(Ht(u)>0){!function(t,n,e){var r=t.dom,o={},i={};if(o.class=e.class,i.height=Si(e.height),r.getAttrib(n,"width")&&!Na(t)?o.width=function(t){return t?t.replace(/px$/,""):""}(e.width):i.width=Si(e.width),Na(t)?(i["border-width"]=Si(e.border),i["border-spacing"]=Si(e.cellspacing)):(o.border=e.border,o.cellpadding=e.cellpadding,o.cellspacing=e.cellspacing),Na(t)&&n.children)for(var u=0;u<n.children.length;u++)Rs(r,n.children[u],{"border-width":Si(e.border),padding:Si(e.cellpadding)}),Pa(t)&&Rs(r,n.children[u],{"border-color":e.bordercolor});Pa(t)&&(i["background-color"]=e.backgroundcolor,i["border-color"]=e.bordercolor,i["border-style"]=e.borderstyle),o.style=r.serializeStyle(K(K({},Da(t)),i)),r.setAttribs(n,K(K({},Oa(t)),o))}(t,n,i);var a=o.select("caption",n)[0];(a&&!i.caption||!a&&i.caption)&&t.execCommand("mceTableToggleCaption"),""===i.align?If(t,n):Mf(t,n,i.align)}if(t.focus(),t.addVisual(),Ht(u)>0){var c=Vt(u,"caption"),l=!c||Ht(u)>1;ma(t,n,{structure:c,style:l})}}))},Ns=function(t,n){var e,r=t.dom,o=function(t,n){var e=Da(t),r=Oa(t),o=n?function(t){return{borderstyle:Wt(e,"border-style").getOr(""),bordercolor:ss(t)(Wt(e,"border-color").getOr("")),backgroundcolor:ss(t)(Wt(e,"background-color").getOr(""))}}(t.dom):{};return K(K(K(K(K(K({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),e),r),o),function(){var n=e["border-width"];return Na(t)&&n?{border:n}:Wt(r,"border").fold((function(){return{}}),(function(t){return{border:t}}))}()),function(){var t=Wt(e,"border-spacing").or(Wt(r,"cellspacing")).fold((function(){return{}}),(function(t){return{cellspacing:t}})),n=Wt(e,"border-padding").or(Wt(r,"cellpadding")).fold((function(){return{}}),(function(t){return{cellpadding:t}}));return K(K({},t),n)}())}(t,Pa(t));!1===n?(e=r.getParent(t.selection.getStart(),"table",t.getBody()))?o=function(t,n,e){var r=t.dom,o=Na(t)?r.getStyle(n,"border-spacing")||r.getAttrib(n,"cellspacing"):r.getAttrib(n,"cellspacing")||r.getStyle(n,"border-spacing"),i=Na(t)?Ef(r,n,"padding")||r.getAttrib(n,"cellpadding"):r.getAttrib(n,"cellpadding")||Ef(r,n,"padding");return K({width:r.getStyle(n,"width")||r.getAttrib(n,"width"),height:r.getStyle(n,"height")||r.getAttrib(n,"height"),cellspacing:o,cellpadding:i,border:function(n,e){var r=Qn(Ot.fromDom(e),"border-width");return Na(t)&&r.isSome()?r.getOr(""):n.getAttrib(e,"border")||Ef(t.dom,e,"border-width")||Ef(t.dom,e,"border")}(r,n),caption:!!r.select("caption",n)[0],class:r.getAttrib(n,"class",""),align:ps(t,n)},e?ds(r,n):{})}(t,e,Pa(t)):Pa(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""):(o.cols="1",o.rows="1",Pa(t)&&(o.borderstyle="",o.bordercolor="",o.backgroundcolor=""));var i=Qf(Ma(t));i.length>0&&o.class&&(o.class=o.class.replace(/\s*mce\-item\-table\s*/g,""));var u={type:"grid",columns:2,items:As(t,i,n)},a=Pa(t)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[u]},cs(t,"table")]}:{type:"panel",items:[u]};t.windowManager.open({title:"Table Properties",size:"normal",body:a,onSubmit:h(Ps,t,e,o),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:o})},Es=function(t){return _i(ki(t),Ci(t))},Ms=function(t,n,e,i,u){var a=Ci(t),c=function(n){return Es(t).each((function(e){Ba(t)||_a(t)||Ia(t)||de(e,a).each((function(e){"relative"!==n||mu(e)?"fixed"!==n||gu(e)?"responsive"!==n||pu(e)||Ja(e):Ya(e):Ga(e),Ti(e),ma(t,e.dom,pa)}))}))},l=function(t){return de(t,a)},f=function(n){return function(t){return Bi(ki(t),Ci(t))}(t).bind((function(t){return l(t).map((function(e){return n(e,t)}))}))},s=function(n){t.focus()},m=function(t,n){return void 0===n&&(n=!1),f((function(e,r){var o=Mi(i,e,r);t(e,o,n).each(s)}))},g=function(){return f((function(n,e){var r=Mi(i,n,e),o=pi(d,Ot.fromDom(t.getDoc()),S.none());return Pf(n,r,o)}))},p=function(){return f((function(t,n){var e=Mi(i,t,n);return Rf(t,e)}))},b=function(n,e){return e().each((function(e){var r=P(e,(function(t){return Ar(t)}));f((function(e,o){var u=hi(Ot.fromDom(t.getDoc())),a=function(t,n,e,r){return{selection:Oi(t),clipboard:e,generators:r}}(i,0,r,u);n(e,a).each(s)}))}))},y=function(t){return function(n,e){return Wt(e,"type").each((function(n){m(t(n),e.no_events)}))}};Bt({mceTableSplitCells:function(){return m(n.unmergeCells)},mceTableMergeCells:function(){return m(n.mergeCells)},mceTableInsertRowBefore:function(){return m(n.insertRowsBefore)},mceTableInsertRowAfter:function(){return m(n.insertRowsAfter)},mceTableInsertColBefore:function(){return m(n.insertColumnsBefore)},mceTableInsertColAfter:function(){return m(n.insertColumnsAfter)},mceTableDeleteCol:function(){return m(n.deleteColumn)},mceTableDeleteRow:function(){return m(n.deleteRow)},mceTableCutCol:function(){return p().each((function(t){u.setColumns(t),m(n.deleteColumn)}))},mceTableCutRow:function(){return g().each((function(t){u.setRows(t),m(n.deleteRow)}))},mceTableCopyCol:function(){return p().each((function(t){return u.setColumns(t)}))},mceTableCopyRow:function(){return g().each((function(t){return u.setRows(t)}))},mceTablePasteColBefore:function(){return b(n.pasteColsBefore,u.getColumns)},mceTablePasteColAfter:function(){return b(n.pasteColsAfter,u.getColumns)},mceTablePasteRowBefore:function(){return b(n.pasteRowsBefore,u.getRows)},mceTablePasteRowAfter:function(){return b(n.pasteRowsAfter,u.getRows)},mceTableDelete:function(){return Es(t).each((function(n){de(n,a).filter(v(a)).each((function(n){var e=Ot.fromText("");if($e(n,e),Qe(n),t.dom.isEmpty(t.getBody()))t.setContent(""),t.selection.setCursorLocation();else{var r=t.dom.createRng();r.setStart(e.dom,0),r.setEnd(e.dom,0),t.selection.setRng(r),t.nodeChanged()}}))}))},mceTableCellToggleClass:function(n,e){f((function(n){var r=Li(i),o=U(r,(function(n){return t.formatter.match("tablecellclass",{value:e},n.dom)}))?t.formatter.remove:t.formatter.apply;N(r,(function(t){return o("tablecellclass",{value:e},t.dom)})),ma(t,n.dom,ga)}))},mceTableToggleClass:function(n,e){f((function(n){t.formatter.toggle("tableclass",{value:e},n.dom),ma(t,n.dom,ga)}))},mceTableToggleCaption:function(){Es(t).each((function(n){de(n,a).each((function(e){Nn(e,"caption").fold((function(){var n=Ot.fromTag("caption");Ke(n,Ot.fromText("Caption")),function(t,n,e){pn(t,e).fold((function(){Ke(t,n)}),(function(t){Ve(t,n)}))}(e,n,0),t.selection.setCursorLocation(n.dom,0)}),(function(r){an("caption")(n)&&Rt("td",e).each((function(n){return t.selection.setCursorLocation(n.dom,0)})),Qe(r)})),ma(t,e.dom,pa)}))}))},mceTableSizingMode:function(t,n){return c(n)},mceTableCellType:y((function(t){return"th"===t?n.makeCellsHeader:n.unmakeCellsHeader})),mceTableColType:y((function(t){return"th"===t?n.makeColumnsHeader:n.unmakeColumnsHeader})),mceTableRowType:y((function(t){switch(t){case"header":return n.makeRowsHeader;case"footer":return n.makeRowsFooter;default:return n.makeRowsBody}}))},(function(n,e){return t.addCommand(e,n)})),Bt({mceTableProps:h(Ns,t,!1),mceTableRowProps:h(Ds,t),mceTableCellProps:h(Cs,t,i)},(function(n,e){return t.addCommand(e,(function(){return n()}))})),t.addCommand("mceInsertTable",(function(n,e){o(e)&&It(e).length>0?Tf(t,e.rows,e.columns,e.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):Ns(t,!0)})),t.addCommand("mceTableApplyCellStyle",(function(n,e){var u=function(t){return"tablecell"+t.toLowerCase().replace("-","")};if(o(e)){var a=Li(i);if(0!==a.length){var c=Ft(e,(function(n,e){return t.formatter.has(u(e))&&r(n)}));(function(t){for(var n in t)if(_t.call(t,n))return!1;return!0})(c)||(Bt(c,(function(n,e){N(a,(function(r){fs.normal(t,r.dom).setFormat(u(e),n)}))})),l(a[0]).each((function(n){return ma(t,n.dom,ga)})))}}}))},Is={remove_similar:!0,inherit:!1},_s=K({selector:"td,th"},Is),Bs={tablecellbackgroundcolor:K({styles:{backgroundColor:"%value"}},_s),tablecellverticalalign:K({styles:{"vertical-align":"%value"}},_s),tablecellbordercolor:K({styles:{borderColor:"%value"}},_s),tablecellclass:K({classes:["%value"]},_s),tableclass:K({selector:"table",classes:["%value"]},Is),tablecellborderstyle:K({styles:{borderStyle:"%value"}},_s),tablecellborderwidth:K({styles:{borderWidth:"%value"}},_s)},Ls=yr([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),js=K(K({},Ls),{none:function(t){return void 0===t&&(t=void 0),Ls.none(t)}}),Fs=function(t,n,e,r,o){void 0===o&&(o=y);var i=1===r;if(!i&&e<=0)return js.first(t[0]);if(i&&e>=t.length-1)return js.last(t[t.length-1]);var u=e+r,a=t[u];return o(a)?js.middle(n,a):Fs(t,n,u,r,o)},Us=function(t,n){return de(t,n).bind((function(n){var e=fe(n);return L(e,(function(n){return Pt(t,n)})).map((function(t){return{index:t,all:e}}))}))},zs=function(t,n,e,r){return{start:t,soffset:n,finish:e,foffset:r}},Hs=yr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ws={before:Hs.before,on:Hs.on,after:Hs.after,cata:function(t,n,e,r){return t.fold(n,e,r)},getStart:function(t){return t.fold(g,g,g)}},Vs=yr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),$s={domRange:Vs.domRange,relative:Vs.relative,exact:Vs.exact,exactFromRange:function(t){return Vs.exact(t.start,t.soffset,t.finish,t.foffset)},getWin:function(t){return function(t){return Ot.fromDom(ln(t).dom.defaultView)}(function(t){return t.match({domRange:function(t){return Ot.fromDom(t.startContainer)},relative:function(t,n){return Ws.getStart(t)},exact:function(t,n,e,r){return t}})}(t))},range:zs},qs=function(t,n){var e=t.document.createRange();return e.selectNode(n.dom),e},Ks=function(t,n){var e=t.document.createRange();return Gs(e,n),e},Gs=function(t,n){return t.selectNodeContents(n.dom)},Ys=function(t,n,e){var r=t.document.createRange();return function(t,n){n.fold((function(n){t.setStartBefore(n.dom)}),(function(n,e){t.setStart(n.dom,e)}),(function(n){t.setStartAfter(n.dom)}))}(r,n),function(t,n){n.fold((function(n){t.setEndBefore(n.dom)}),(function(n,e){t.setEnd(n.dom,e)}),(function(n){t.setEndAfter(n.dom)}))}(r,e),r},Js=function(t,n,e,r,o){var i=t.document.createRange();return i.setStart(n.dom,e),i.setEnd(r.dom,o),i},Xs=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}},Qs=yr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Zs=function(t,n,e){return n(Ot.fromDom(e.startContainer),e.startOffset,Ot.fromDom(e.endContainer),e.endOffset)},td=function(t,n){return function(t,n){var e=n.ltr();return e.collapsed?n.rtl().filter((function(t){return!1===t.collapsed})).map((function(t){return Qs.rtl(Ot.fromDom(t.endContainer),t.endOffset,Ot.fromDom(t.startContainer),t.startOffset)})).getOrThunk((function(){return Zs(0,Qs.ltr,e)})):Zs(0,Qs.ltr,e)}(0,function(t,n){return n.match({domRange:function(t){return{ltr:m(t),rtl:S.none}},relative:function(n,e){return{ltr:Y((function(){return Ys(t,n,e)})),rtl:Y((function(){return S.some(Ys(t,e,n))}))}},exact:function(n,e,r,o){return{ltr:Y((function(){return Js(t,n,e,r,o)})),rtl:Y((function(){return S.some(Js(t,r,o,n,e))}))}}})}(t,n))},nd=function(t,n){return td(t,n).match({ltr:function(n,e,r,o){var i=t.document.createRange();return i.setStart(n.dom,e),i.setEnd(r.dom,o),i},rtl:function(n,e,r,o){var i=t.document.createRange();return i.setStart(r.dom,o),i.setEnd(n.dom,e),i}})};Qs.ltr,Qs.rtl;var ed=function(t,n,e){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom},rd=function(t,n,e,r,o){var i=function(e){var r=t.dom.createRange();return r.setStart(n.dom,e),r.collapse(!0),r},u=nr(n).length,a=function(t,n,e,r,o){if(0===o)return 0;if(n===r)return o-1;for(var i=r,u=1;u<o;u++){var a=t(u),c=Math.abs(n-a.left);if(e<=a.bottom){if(e<a.top||c>i)return u-1;i=c}}return 0}((function(t){return i(t).getBoundingClientRect()}),e,r,o.right,u);return i(a)},od=function(t,n,e,r){return rn(n)?function(t,n,e,r){var o=t.dom.createRange();o.selectNode(n.dom);var i=o.getClientRects();return q(i,(function(t){return ed(t,e,r)?S.some(t):S.none()})).map((function(o){return rd(t,n,e,r,o)}))}(t,n,e,r):function(t,n,e,r){var o=t.dom.createRange(),i=gn(n);return q(i,(function(n){return o.selectNode(n.dom),ed(o.getBoundingClientRect(),e,r)?od(t,n,e,r):S.none()}))}(t,n,e,r)},id=function(t,n){return n-t.left<t.right-n},ud=function(t,n,e){var r=t.dom.createRange();return r.selectNode(n.dom),r.collapse(e),r},ad=function(t,n,e){var r=t.dom.createRange();r.selectNode(n.dom);var o=r.getBoundingClientRect(),i=id(o,e);return(!0===i?ii:ui)(n).map((function(n){return ud(t,n,i)}))},cd=function(t,n,e){var r=n.dom.getBoundingClientRect(),o=id(r,e);return S.some(ud(t,n,o))},ld=function(t,n,e){var r,o;return S.from(null===(o=(r=t.dom).caretPositionFromPoint)||void 0===o?void 0:o.call(r,n,e)).bind((function(n){if(null===n.offsetNode)return S.none();var e=t.dom.createRange();return e.setStart(n.offsetNode,n.offset),e.collapse(),S.some(e)}))},fd=function(t,n,e){var r,o;return S.from(null===(o=(r=t.dom).caretRangeFromPoint)||void 0===o?void 0:o.call(r,n,e))},sd=function(t,n,e,r){var o=t.dom.createRange();o.selectNode(n.dom);var i=o.getBoundingClientRect();return function(t,n,e,r){var o=t.dom.createRange();o.selectNode(n.dom);var i=o.getBoundingClientRect(),u=Math.max(i.left,Math.min(i.right,e)),a=Math.max(i.top,Math.min(i.bottom,r));return od(t,n,u,a)}(t,n,Math.max(i.left,Math.min(i.right,e)),Math.max(i.top,Math.min(i.bottom,r)))},dd=function(t,n,e){return Ot.fromPoint(t,n,e).bind((function(r){var o=function(){return function(t,n,e){return(0===gn(n).length?cd:ad)(t,n,e)}(t,r,n)};return 0===gn(r).length?o():sd(t,r,n,e).orThunk(o)}))},md=document.caretPositionFromPoint?ld:document.caretRangeFromPoint?fd:dd,gd=function(t,n){var e=Qt(t);return"input"===e?Ws.after(t):D(["br","img"],e)?0===n?Ws.before(t):Ws.after(t):Ws.on(t,n)},pd=function(t,n){var e=t.fold(Ws.before,gd,Ws.after),r=n.fold(Ws.before,gd,Ws.after);return $s.relative(e,r)},hd=function(t,n,e,r){var o=gd(t,n),i=gd(e,r);return $s.relative(o,i)},vd=function(t,n,e,r){var o=function(t,n,e,r){var o=cn(t).dom.createRange();return o.setStart(t.dom,n),o.setEnd(e.dom,r),o}(t,n,e,r),i=Pt(t,e)&&n===r;return o.collapsed&&!i},bd=function(t){return S.from(t.getSelection())},yd=function(t,n){bd(t).each((function(t){t.removeAllRanges(),t.addRange(n)}))},wd=function(t,n,e,r,o){var i=Js(t,n,e,r,o);yd(t,i)},xd=function(t,n){return td(t,n).match({ltr:function(n,e,r,o){wd(t,n,e,r,o)},rtl:function(n,e,r,o){bd(t).each((function(i){if(i.setBaseAndExtent)i.setBaseAndExtent(n.dom,e,r.dom,o);else if(i.extend)try{!function(t,n,e,r,o,i){n.collapse(e.dom,r),n.extend(o.dom,i)}(0,i,n,e,r,o)}catch(i){wd(t,r,o,n,e)}else wd(t,r,o,n,e)}))}})},Cd=function(t,n,e,r,o){var i=hd(n,e,r,o);xd(t,i)},Sd=function(t,n,e){var r=pd(n,e);xd(t,r)},Td=function(t){var n=$s.getWin(t).dom,e=function(t,e,r,o){return Js(n,t,e,r,o)},r=function(t){return t.match({domRange:function(t){var n=Ot.fromDom(t.startContainer),e=Ot.fromDom(t.endContainer);return hd(n,t.startOffset,e,t.endOffset)},relative:pd,exact:hd})}(t);return td(n,r).match({ltr:e,rtl:e})},kd=function(t){if(t.rangeCount>0){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1);return S.some(zs(Ot.fromDom(n.startContainer),n.startOffset,Ot.fromDom(e.endContainer),e.endOffset))}return S.none()},Od=function(t){if(null===t.anchorNode||null===t.focusNode)return kd(t);var n=Ot.fromDom(t.anchorNode),e=Ot.fromDom(t.focusNode);return vd(n,t.anchorOffset,e,t.focusOffset)?S.some(zs(n,t.anchorOffset,e,t.focusOffset)):kd(t)},Dd=function(t,n,e){void 0===e&&(e=!0);var r=(e?Ks:qs)(t,n);yd(t,r)},Ad=function(t){return function(t){return bd(t).filter((function(t){return t.rangeCount>0})).bind(Od)}(t).map((function(t){return $s.exact(t.start,t.soffset,t.finish,t.foffset)}))},Rd=function(t,n){return function(t){var n=t.getClientRects(),e=n.length>0?n[0]:t.getBoundingClientRect();return e.width>0||e.height>0?S.some(e).map(Xs):S.none()}(nd(t,n))},Pd=function(t,n,e){return function(t,n,e){var r=Ot.fromDom(t.document);return md(r,n,e).map((function(t){return zs(Ot.fromDom(t.startContainer),t.startOffset,Ot.fromDom(t.endContainer),t.endOffset)}))}(t,n,e)},Nd=tinymce.util.Tools.resolve("tinymce.util.VK"),Ed=function(t,n,e){return Id(t,n,function(t,n,e){return Us(t,e).fold((function(){return js.none(t)}),(function(e){return Fs(e.all,t,e.index,1,n)}))}(e,$u))},Md=function(t,n,e){return Id(t,n,function(t,n,e){return Us(t,e).fold((function(){return js.none()}),(function(e){return Fs(e.all,t,e.index,-1,n)}))}(e,$u))},Id=function(t,n,e){return e.fold(S.none,S.none,(function(t,n){return ii(n).map((function(t){return function(t,n){var e=$s.exact(n,0,n,0);return Td(e)}(0,t)}))}),(function(e){return t.execCommand("mceTableInsertRowAfter"),Ed(t,n,e)}))},_d=["table","li","dl"],Bd=function(t,n){return{selection:t,kill:n}},Ld=function(t,n,e,r){return{start:Ws.on(t,n),finish:Ws.on(e,r)}},jd=function(t,n){var e=nd(t,n);return zs(Ot.fromDom(e.startContainer),e.startOffset,Ot.fromDom(e.endContainer),e.endOffset)},Fd=Ld,Ud=function(t,n,e,r,o){return Pt(e,r)?S.none():mr(e,r,n).bind((function(n){var r=n.boxes.getOr([]);return r.length>1?(o(t,r,n.start,n.finish),S.some(Bd(S.some(Fd(e,0,e,ei(e))),!0))):S.none()}))},zd=function(t,n){return{item:t,mode:n}},Hd=function(t,n,e,r){return void 0===r&&(r=Wd),t.property().parent(n).map((function(t){return zd(t,r)}))},Wd=function(t,n,e,r){return void 0===r&&(r=Vd),e.sibling(t,n).map((function(t){return zd(t,r)}))},Vd=function(t,n,e,r){void 0===r&&(r=Vd);var o=t.property().children(n);return e.first(o).map((function(t){return zd(t,r)}))},$d=[{current:Hd,next:Wd,fallback:S.none()},{current:Wd,next:Vd,fallback:S.some(Hd)},{current:Vd,next:Vd,fallback:S.some(Wd)}],qd=function(t,n,e,r,o){return void 0===o&&(o=$d),B(o,(function(t){return t.current===e})).bind((function(e){return e.current(t,n,r,e.next).orThunk((function(){return e.fallback.bind((function(e){return qd(t,n,e,r)}))}))}))},Kd=function(){return{sibling:function(t,n){return t.query().prevSibling(n)},first:function(t){return t.length>0?S.some(t[t.length-1]):S.none()}}},Gd=function(){return{sibling:function(t,n){return t.query().nextSibling(n)},first:function(t){return t.length>0?S.some(t[0]):S.none()}}},Yd=function(t,n,e,r,o,i){return qd(t,n,r,o).bind((function(n){return i(n.item)?S.none():e(n.item)?S.some(n.item):Yd(t,n.item,e,n.mode,o,i)}))},Jd=function(t){return function(n){return 0===t.property().children(n).length}},Xd=function(t,n,e,r){return Yd(t,n,e,Wd,Kd(),r)},Qd=function(t,n,e,r){return Yd(t,n,e,Wd,Gd(),r)},Zd=ir(),tm=function(t,n){return function(t,n,e){return Xd(t,n,Jd(t),e)}(Zd,t,n)},nm=function(t,n){return function(t,n,e){return Qd(t,n,Jd(t),e)}(Zd,t,n)},em=yr([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),rm=function(t){return Mn(t,"tr")},om=K(K({},em),{verify:function(t,n,e,r,o,i,u){return Mn(r,"td,th",u).bind((function(e){return Mn(n,"td,th",u).map((function(n){return Pt(e,n)?Pt(r,e)&&ei(e)===o?i(n):em.none("in same cell"):sr(rm,[e,n]).fold((function(){return function(t,n,e){var r=t.getRect(n),o=t.getRect(e);return o.right>r.left&&o.left<r.right}(t,n,e)?em.success():i(n)}),(function(t){return i(n)}))}))})).getOr(em.none("default"))},cata:function(t,n,e,r,o){return t.fold(n,e,r,o)}}),im=function(t,n){return L(t,h(Pt,n))},um=function(t){return"br"===Qt(t)},am=function(t,n,e){return n(t,e).bind((function(t){return rn(t)&&0===nr(t).trim().length?am(t,n,e):S.some(t)}))},cm=function(t,n,e,r){return function(t,n){return pn(t,n).filter(um).orThunk((function(){return pn(t,n-1).filter(um)}))}(n,e).bind((function(n){return r.traverse(n).fold((function(){return am(n,r.gather,t).map(r.relative)}),(function(t){return function(t){return fn(t).bind((function(n){var e=gn(n);return im(e,t).map((function(r){return function(t,n,e,r){return{parent:t,children:n,element:e,index:r}}(n,e,t,r)}))}))}(t).map((function(t){return Ws.on(t.parent,t.index)}))}))}))},lm=function(t,n,e,r){return(um(n)?function(t,n,e){return e.traverse(n).orThunk((function(){return am(n,e.gather,t)})).map(e.relative)}(t,n,r):cm(t,n,e,r)).map((function(t){return{start:t,finish:t}}))},fm=function(t,n){return{left:t.left,top:t.top+n,right:t.right,bottom:t.bottom+n}},sm=function(t,n){return{left:t.left,top:t.top-n,right:t.right,bottom:t.bottom-n}},dm=function(t,n,e){return{left:t.left+n,top:t.top+e,right:t.right+n,bottom:t.bottom+e}},mm=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}},gm=function(t,n){return S.some(t.getRect(n))},pm=function(t,n,e){return en(n)?gm(t,n).map(mm):rn(n)?function(t,n,e){return e>=0&&e<ei(n)?t.getRangedRect(n,e,n,e+1):e>0?t.getRangedRect(n,e-1,n,e):S.none()}(t,n,e).map(mm):S.none()},hm=function(t,n){return en(n)?gm(t,n).map(mm):rn(n)?t.getRangedRect(n,0,n,ei(n)).map(mm):S.none()},vm=yr([{none:[]},{retry:["caret"]}]),bm=function(t,n,e){return function(t,n,e){return An((function(t,n){return n(t)}),Rn,t,n,e)}(n,Sl).fold(b,(function(n){return hm(t,n).exists((function(t){return function(t,n){return t.left<n.left||Math.abs(n.right-t.left)<1||t.left>n.right}(e,t)}))}))},ym={point:function(t){return t.bottom},adjuster:function(t,n,e,r,o){var i=fm(o,5);return Math.abs(e.bottom-r.bottom)<1||e.top>o.bottom?vm.retry(i):e.top===o.bottom?vm.retry(fm(o,1)):bm(t,n,o)?vm.retry(dm(i,5,0)):vm.none()},move:fm,gather:nm},wm=function(t,n,e,r,o){return 0===o?S.some(r):function(t,n,e){return t.elementFromPoint(n,e).filter((function(t){return"table"===Qt(t)})).isSome()}(t,r.left,n.point(r))?function(t,n,e,r,o){return wm(t,n,e,n.move(r,5),o)}(t,n,e,r,o-1):t.situsFromPoint(r.left,n.point(r)).bind((function(i){return i.start.fold(S.none,(function(i){return hm(t,i).bind((function(u){return n.adjuster(t,i,u,e,r).fold(S.none,(function(r){return wm(t,n,e,r,o-1)}))})).orThunk((function(){return S.some(r)}))}),S.none)}))},xm=function(t,n,e){var r=t.move(e,5),o=wm(n,t,e,r,100).getOr(r);return function(t,n,e){return t.point(n)>e.getInnerHeight()?S.some(t.point(n)-e.getInnerHeight()):t.point(n)<0?S.some(-t.point(n)):S.none()}(t,o,n).fold((function(){return n.situsFromPoint(o.left,t.point(o))}),(function(e){return n.scrollBy(0,e),n.situsFromPoint(o.left,t.point(o)-e)}))},Cm={tryUp:h(xm,{point:function(t){return t.top},adjuster:function(t,n,e,r,o){var i=sm(o,5);return Math.abs(e.top-r.top)<1||e.bottom<o.top?vm.retry(i):e.bottom===o.top?vm.retry(sm(o,1)):bm(t,n,o)?vm.retry(dm(i,5,0)):vm.none()},move:sm,gather:tm}),tryDown:h(xm,ym),ieTryUp:function(t,n){return t.situsFromPoint(n.left,n.top-5)},ieTryDown:function(t,n){return t.situsFromPoint(n.left,n.bottom+5)},getJumpSize:m(5)},Sm=function(t,n,e){return t.getSelection().bind((function(r){return lm(n,r.finish,r.foffset,e).fold((function(){return S.some(nc(r.finish,r.foffset))}),(function(o){var i=t.fromSitus(o);return function(t){return om.cata(t,(function(t){return S.none()}),(function(){return S.none()}),(function(t){return S.some(nc(t,0))}),(function(t){return S.some(nc(t,ei(t)))}))}(om.verify(t,r.finish,r.foffset,i.finish,i.foffset,e.failure,n))}))}))},Tm=function(t,n,e,r,o,i){return 0===i?S.none():Dm(t,n,e,r,o).bind((function(u){var a=t.fromSitus(u),c=om.verify(t,e,r,a.finish,a.foffset,o.failure,n);return om.cata(c,(function(){return S.none()}),(function(){return S.some(u)}),(function(u){return Pt(e,u)&&0===r?km(t,e,r,sm,o):Tm(t,n,u,0,o,i-1)}),(function(u){return Pt(e,u)&&r===ei(u)?km(t,e,r,fm,o):Tm(t,n,u,ei(u),o,i-1)}))}))},km=function(t,n,e,r,o){return pm(t,n,e).bind((function(n){return Om(t,o,r(n,Cm.getJumpSize()))}))},Om=function(t,n,e){var r=Tt().browser;return r.isChrome()||r.isSafari()||r.isFirefox()||r.isEdge()?n.otherRetry(t,e):r.isIE()?n.ieRetry(t,e):S.none()},Dm=function(t,n,e,r,o){return pm(t,e,r).bind((function(n){return Om(t,o,n)}))},Am=function(t,n){return function(t,n,e){return Rn(t,n,e).isSome()}(t,(function(t){return fn(t).exists((function(t){return Pt(t,n)}))}))},Rm=function(t,n,e,r,o){return Mn(r,"td,th",n).bind((function(r){return Mn(r,"table",n).bind((function(i){return Am(o,i)?function(t,n,e){return Sm(t,n,e).bind((function(r){return Tm(t,n,r.element,r.offset,e,20).map(t.fromSitus)}))}(t,n,e).bind((function(t){return Mn(t.finish,"td,th",n).map((function(n){return{start:r,finish:n,range:t}}))})):S.none()}))}))},Pm=function(t,n,e,r,o,i){return Tt().browser.isIE()?S.none():i(r,n).orThunk((function(){return Rm(t,n,e,r,o).map((function(t){var n=t.range;return Bd(S.some(Fd(n.start,n.soffset,n.finish,n.foffset)),!0)}))}))},Nm=function(t,n){return Mn(t,"tr",n).bind((function(t){return Mn(t,"table",n).bind((function(e){var r=Dn(e,"tr");return Pt(t,r[0])?function(t,n,e){return Xd(Zd,t,n,e)}(e,(function(t){return ui(t).isSome()}),n).map((function(t){var n=ei(t);return Bd(S.some(Fd(t,n,t,n)),!0)})):S.none()}))}))},Em=function(t,n){return Mn(t,"tr",n).bind((function(t){return Mn(t,"table",n).bind((function(e){var r=Dn(e,"tr");return Pt(t,r[r.length-1])?function(t,n,e){return Qd(Zd,t,n,e)}(e,(function(t){return ii(t).isSome()}),n).map((function(t){return Bd(S.some(Fd(t,0,t,0)),!0)})):S.none()}))}))},Mm=function(t,n,e,r,o,i,u){return Rm(t,e,r,o,i).bind((function(t){return Ud(n,e,t.start,t.finish,u)}))},Im=function(t,n){return Mn(t,"td,th",n)},_m={traverse:mn,gather:nm,relative:Ws.before,otherRetry:Cm.tryDown,ieRetry:Cm.ieTryDown,failure:om.failedDown},Bm={traverse:dn,gather:tm,relative:Ws.before,otherRetry:Cm.tryUp,ieRetry:Cm.ieTryUp,failure:om.failedUp},Lm=function(t){return function(n){return n===t}},jm=Lm(38),Fm=Lm(40),Um=function(t){return t>=37&&t<=40},zm={isBackward:Lm(37),isForward:Lm(39)},Hm={isBackward:Lm(39),isForward:Lm(37)},Wm=function(t){return{elementFromPoint:function(n,e){return Ot.fromPoint(Ot.fromDom(t.document),n,e)},getRect:function(t){return t.dom.getBoundingClientRect()},getRangedRect:function(n,e,r,o){var i=$s.exact(n,e,r,o);return Rd(t,i)},getSelection:function(){return Ad(t).map((function(n){return jd(t,n)}))},fromSitus:function(n){var e=$s.relative(n.start,n.finish);return jd(t,e)},situsFromPoint:function(n,e){return Pd(t,n,e).map((function(t){return Ld(t.start,t.soffset,t.finish,t.foffset)}))},clearSelection:function(){!function(t){bd(t).each((function(t){return t.removeAllRanges()}))}(t)},collapseSelection:function(n){void 0===n&&(n=!1),Ad(t).each((function(e){return e.fold((function(t){return t.collapse(n)}),(function(e,r){var o=n?e:r;Sd(t,o,o)}),(function(e,r,o,i){var u=n?e:o,a=n?r:i;Cd(t,u,a,u,a)}))}))},setSelection:function(n){Cd(t,n.start,n.soffset,n.finish,n.foffset)},setRelativeSelection:function(n,e){Sd(t,n,e)},selectNode:function(n){Dd(t,n,!1)},selectContents:function(n){Dd(t,n)},getInnerHeight:function(){return t.innerHeight},getScrollY:function(){return function(t){var n=void 0!==t?t.dom:document,e=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return Zr(e,r)}(Ot.fromDom(t.document)).top},scrollBy:function(n,e){!function(t,n,e){var r=(void 0!==e?e.dom:document).defaultView;r&&r.scrollBy(t,n)}(n,e,Ot.fromDom(t.document))}}},Vm=function(t,n){return{rows:t,cols:n}},$m=function(t,n,e,r){var o=function(t,n,e,r){var o=Yf(),i=o.clear,u=function(i){o.on((function(o){r.clearBeforeUpdate(n),Im(i.target,e).each((function(u){mr(o,u,e).each((function(e){var o=e.boxes.getOr([]);if(1===o.length){var a=o[0],c="false"===qu(a),l=zn(Vu(i.target),a,Pt);c&&l&&(r.selectRange(n,o,a,a),t.selectContents(a))}else o.length>1&&(r.selectRange(n,o,e.start,e.finish),t.selectContents(u))}))}))}))};return{clearstate:i,mousedown:function(t){r.clear(n),Im(t.target,e).each(o.set)},mouseover:function(t){u(t)},mouseup:function(t){u(t),i()}}}(Wm(t),n,e,r);return{clearstate:o.clearstate,mousedown:o.mousedown,mouseover:o.mouseover,mouseup:o.mouseup}},qm=function(t,n,e,r){var o=Wm(t),i=function(){return r.clear(n),S.none()};return{keydown:function(t,u,a,c,l,f){var s=t.raw,d=s.which,m=!0===s.shiftKey;return gr(n,r.selectedSelector).fold((function(){return Um(d)&&!m&&r.clearBeforeUpdate(n),Fm(d)&&m?h(Mm,o,n,e,_m,c,u,r.selectRange):jm(d)&&m?h(Mm,o,n,e,Bm,c,u,r.selectRange):Fm(d)?h(Pm,o,e,_m,c,u,Em):jm(d)?h(Pm,o,e,Bm,c,u,Nm):S.none}),(function(t){var e=function(e){return function(){return q(e,(function(e){return function(t,n,e,r,o){return hr(r,t,n,o.firstSelectedSelector,o.lastSelectedSelector).map((function(t){return o.clearBeforeUpdate(e),o.selectRange(e,t.boxes,t.start,t.finish),t.boxes}))}(e.rows,e.cols,n,t,r)})).fold((function(){return pr(n,r.firstSelectedSelector,r.lastSelectedSelector).map((function(t){var e=Fm(d)||f.isForward(d)?Ws.after:Ws.before;return o.setRelativeSelection(Ws.on(t.first,0),e(t.table)),r.clear(n),Bd(S.none(),!0)}))}),(function(t){return S.some(Bd(S.none(),!0))}))}};return Fm(d)&&m?e([Vm(1,0)]):jm(d)&&m?e([Vm(-1,0)]):f.isBackward(d)&&m?e([Vm(0,-1),Vm(-1,0)]):f.isForward(d)&&m?e([Vm(0,1),Vm(1,0)]):Um(d)&&!m?i:S.none}))()},keyup:function(t,o,i,u,a){return gr(n,r.selectedSelector).fold((function(){var c=t.raw,l=c.which;return!0===c.shiftKey&&Um(l)?function(t,n,e,r,o,i,u){return Pt(e,o)&&r===i?S.none():Mn(e,"td,th",n).bind((function(e){return Mn(o,"td,th",n).bind((function(r){return Ud(t,n,e,r,u)}))}))}(n,e,o,i,u,a,r.selectRange):S.none()}),S.none)}}},Km=function(t,n,e){var r=function(n){Fn(n,t.selected),Fn(n,t.firstSelected),Fn(n,t.lastSelected)},o=function(n){_n(n,t.selected,"1")},i=function(t){u(t),e()},u=function(n){var e=Dn(n,t.selectedSelector+","+t.firstSelectedSelector+","+t.lastSelectedSelector);N(e,r)};return{clearBeforeUpdate:u,clear:i,selectRange:function(e,r,u,a){i(e),N(r,o),_n(u,t.firstSelected,"1"),_n(a,t.lastSelected,"1"),n(r,u,a)},selectedSelector:t.selectedSelector,firstSelectedSelector:t.firstSelectedSelector,lastSelectedSelector:t.lastSelectedSelector}},Gm=function(t,n,e){var r=Me.fromTable(t);return _c(r,n).map((function(t){var n=Rc(r,e,!1);return{upOrLeftCells:function(t,n){var e=t.slice(0,n[n.length-1].row+1),r=Pc(e);return F(r,(function(t){var e=t.cells.slice(0,n[n.length-1].column+1);return P(e,(function(t){return t.element}))}))}(n,t),downOrRightCells:function(t,n){var e=t.slice(n[0].row+n[0].rowspan-1,t.length),r=Pc(e);return F(r,(function(t){var e=t.cells.slice(n[0].column+n[0].colspan-1,t.cells.length);return P(e,(function(t){return t.element}))}))}(n,t)}}))},Ym=tinymce.util.Tools.resolve("tinymce.Env"),Jm=function(t){return!1===ju(Ot.fromDom(t.target),"ephox-snooker-resizer-bar")};function Xm(t,n,e){var r=Km(Ei,(function(n,r,o){e.targets().each((function(e){de(r).each((function(i){var u=Ha(t),a=pi(d,Ot.fromDom(t.getDoc()),u),c=Gm(i,e,a);!function(t,n,e,r,o){t.fire("TableSelectionChange",{cells:n,start:e,finish:r,otherCells:o})}(t,n,r,o,c)}))}))}),(function(){return function(t){t.fire("TableSelectionClear")}(t)}));return t.on("init",(function(e){var o=t.getWin(),i=yi(t),u=Ci(t),a=$m(o,i,u,r),c=qm(o,i,u,r),l=function(t,n,e,r){var o=Wm(t);return function(t,i){r.clearBeforeUpdate(n),mr(t,i,e).each((function(t){var e=t.boxes.getOr([]);r.selectRange(n,e,t.start,t.finish),o.selectContents(i),o.collapseSelection()}))}}(o,i,u,r);t.on("TableSelectorChange",(function(t){return l(t.start,t.finish)}));var f=function(n,e){(function(t){return!0===t.raw.shiftKey})(n)&&(e.kill&&n.kill(),e.selection.each((function(n){var e=$s.relative(n.start,n.finish),r=nd(o,e);t.selection.setRng(r)})))},s=function(t){return 0===t.button},m=function(){var t=Kf(Ot.fromDom(i)),n=Kf(0);return{touchEnd:function(e){var r=Ot.fromDom(e.target);if("td"===Qt(r)||"th"===Qt(r)){var o=t.get(),i=n.get();Pt(o,r)&&e.timeStamp-i<300&&(e.preventDefault(),l(r,r))}t.set(r),n.set(e.timeStamp)}}}();t.on("dragstart",(function(t){a.clearstate()})),t.on("mousedown",(function(t){s(t)&&Jm(t)&&a.mousedown(Mu(t))})),t.on("mouseover",(function(t){(function(t){return void 0===t.buttons||!(!Ym.browser.isEdge()||0!==t.buttons)||0!=(1&t.buttons)})(t)&&Jm(t)&&a.mouseover(Mu(t))})),t.on("mouseup",(function(t){s(t)&&Jm(t)&&a.mouseup(Mu(t))})),t.on("touchend",m.touchEnd),t.on("keyup",(function(n){var e=Mu(n);if(e.raw.shiftKey&&Um(e.raw.which)){var r=t.selection.getRng(),o=Ot.fromDom(r.startContainer),i=Ot.fromDom(r.endContainer);c.keyup(e,o,r.startOffset,i,r.endOffset).each((function(t){f(e,t)}))}})),t.on("keydown",(function(e){var r=Mu(e);n().each((function(t){return t.hideBars()}));var o=t.selection.getRng(),i=Ot.fromDom(o.startContainer),u=Ot.fromDom(o.endContainer),a=qr(zm,Hm)(Ot.fromDom(t.selection.getStart()));c.keydown(r,i,o.startOffset,u,o.endOffset,a).each((function(t){f(r,t)})),n().each((function(t){return t.showBars()}))})),t.on("NodeChange",(function(){var n=t.selection,e=Ot.fromDom(n.getStart()),o=Ot.fromDom(n.getEnd());sr(de,[e,o]).fold((function(){return r.clear(i)}),d)}))})),{clear:r.clear}}var Qm=function(t,n){var e=Kf(S.none()),r=Kf([]),o=S.none(),i=an("caption"),u=function(t){return o.forall((function(n){return!n[t]}))},a=function(){return _i(function(t){return Ot.fromDom(t.selection.getEnd())}(t),Ci(t))},c=function(){return _i(ki(t),Ci(t)).bind((function(t){return Vn(Wn(de(t),a().bind(de),(function(e,r){return Pt(e,r)?i(t)?S.some(function(t){return{element:t,mergable:S.none(),unmergable:S.none(),selection:[t]}}(t)):S.some(Mi(n,e,t)):S.none()})))}))},l=function(t){return de(t.element).map((function(n){var e=Me.fromTable(n),r=_c(e,t).getOr([]),o=_(r,(function(t,n){return n.isLocked&&(t.onAny=!0,0===n.column?t.onFirst=!0:n.column+n.colspan>=e.grid.columns&&(t.onLast=!0)),t}),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:jc(e,t).isSome(),unmergeable:Fc(e,t).isSome(),locked:o}}))},f=function(){e.set(Y(c)()),o=e.get().bind(l),N(r.get(),(function(t){return t()}))},s=function(t){return t(),r.set(r.get().concat([t])),function(){r.set(M(r.get(),(function(n){return n!==t})))}},d=function(t,n){return s((function(){return e.get().fold((function(){t.setDisabled(!0)}),(function(e){t.setDisabled(n(e))}))}))},m=function(t,n,r){return s((function(){return e.get().fold((function(){t.setDisabled(!0),t.setActive(!1)}),(function(e){t.setDisabled(n(e)),t.setActive(r(e))}))}))},g=function(t){return o.exists((function(n){return n.locked[t]}))},p=function(n,e){return function(r){return m(r,(function(t){return i(t.element)}),(function(){return t.queryCommandValue(n)===e}))}},h=p("mceTableRowType","header"),v=p("mceTableColType","th");return t.on("NodeChange ExecCommand TableSelectorChange",f),{onSetupTable:function(t){return d(t,(function(t){return!1}))},onSetupCellOrRow:function(t){return d(t,(function(t){return i(t.element)}))},onSetupColumn:function(t){return function(n){return d(n,(function(n){return i(n.element)||g(t)}))}},onSetupPasteable:function(t){return function(n){return d(n,(function(n){return i(n.element)||t().isNone()}))}},onSetupPasteableColumn:function(t,n){return function(e){return d(e,(function(e){return i(e.element)||t().isNone()||g(n)}))}},onSetupMergeable:function(t){return d(t,(function(t){return u("mergeable")}))},onSetupUnmergeable:function(t){return d(t,(function(t){return u("unmergeable")}))},resetTargets:f,onSetupTableWithCaption:function(n){return m(n,b,(function(n){return de(n.element,Ci(t)).exists((function(t){return function(t,n){return Nn(t,n).isSome()}(t,"caption")}))}))},onSetupTableRowHeaders:h,onSetupTableColumnHeaders:v,targets:e.get}},Zm=function(t){var n=function(t,n,e){return{get:function(){return vr(t(),e).fold((function(){return n().fold(Cr,Tr)}),(function(t){return Sr(t)}))}}}((function(){return yi(t)}),(function(){return Bi(ki(t),Ci(t))}),Ei.selectedSelector),e=Qm(t,n),r=tc(t),o=Xm(t,r.lazyResize,e),i=vf(t,o,r.lazyWire),u=function(){var t=Yf(),n=Yf();return{getRows:t.get,setRows:function(e){e.fold(t.clear,t.set),n.clear()},clearRows:t.clear,getColumns:n.get,setColumns:function(e){e.fold(n.clear,n.set),t.clear()},clearColumns:n.clear}}();return Ms(t,i,0,n,u),function(t,n,e){var r=Ci(t),o=function(n){return Bi(ki(t)).bind((function(t){return de(t,r).map((function(r){var o=Mi(e,r,t);return n(r,o)}))})).getOr("")};Bt({mceTableRowType:function(){return o(n.getTableRowType)},mceTableCellType:function(){return o(n.getTableCellType)},mceTableColType:function(){return o(n.getTableColType)}},(function(n,e){return t.addQueryValueHandler(e,n)}))}(t,i,n),ji(t,n,i),function(t,n,e,r){var o=function(n){return function(){return t.execCommand(n)}},i=function(n){t.execCommand("mceInsertTable",!1,{rows:n.numRows,columns:n.numColumns})},u={text:"Table properties",onSetup:e.onSetupTable,onAction:o("mceTableProps")},a={text:"Delete table",icon:"table-delete-table",onSetup:e.onSetupTable,onAction:o("mceTableDelete")};t.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:o("mceTableInsertRowBefore"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:o("mceTableInsertRowAfter"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:o("mceTableDeleteRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:o("mceTableRowProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),t.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)});var c={type:"nestedmenuitem",text:"Row",getSubmenuItems:m("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};t.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:o("mceTableInsertColBefore"),onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:o("mceTableInsertColAfter"),onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:o("mceTableDeleteCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),t.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")});var l={type:"nestedmenuitem",text:"Column",getSubmenuItems:m("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};t.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:o("mceTableCellProps"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:o("mceTableMergeCells"),onSetup:e.onSetupMergeable}),t.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:o("mceTableSplitCells"),onSetup:e.onSetupUnmergeable});var f={type:"nestedmenuitem",text:"Cell",getSubmenuItems:m("tablecellprops tablemergecells tablesplitcells")};!1===function(t){return t.getParam("table_grid",!0,"boolean")}(t)?t.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:o("mceInsertTable")}):t.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:i}]}}),t.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:o("mceInsertTable")}),t.ui.registry.addMenuItem("tableprops",u),t.ui.registry.addMenuItem("deletetable",a),t.ui.registry.addNestedMenuItem("row",c),t.ui.registry.addNestedMenuItem("column",l),t.ui.registry.addNestedMenuItem("cell",f),t.ui.registry.addContextMenu("table",{update:function(){return e.resetTargets(),e.targets().fold(m(""),(function(t){return"caption"===Qt(t.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"}))}});var s=ns(Ma(t));0!==s.length&&t.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Zf(t,n,s,"tableclass",(function(n){return t.execCommand("mceTableToggleClass",!1,n)}))},onSetup:e.onSetupTable});var d=ns(Ea(t));0!==d.length&&t.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Zf(t,n,d,"tablecellclass",(function(n){return t.execCommand("mceTableCellToggleClass",!1,n)}))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Zf(t,n,_f,"tablecellverticalalign",ts(t,"vertical-align"))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Zf(t,n,Ta(t),"tablecellborderwidth",ts(t,"border-width"))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Zf(t,n,ka(t),"tablecellborderstyle",ts(t,"border-style"))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:o("mceTableToggleCaption"),onSetup:e.onSetupTableWithCaption}),t.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return rs(t,Va(t),"background-color")},onSetup:e.onSetupCellOrRow}),t.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return rs(t,$a(t),"border-color")},onSetup:e.onSetupCellOrRow}),t.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:os(t),onSetup:e.onSetupTableRowHeaders}),t.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:is(t),onSetup:e.onSetupTableColumnHeaders})}(t,n,e,u),function(t,n,e,r){t.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(t){return t("inserttable | cell row column | advtablesort | tableprops deletetable")}});var o=function(n){return function(){return t.execCommand(n)}};t.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:o("mceTableProps"),icon:"table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:o("mceTableDelete"),icon:"table-delete-table",onSetup:e.onSetupTable}),t.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:o("mceTableCellProps"),icon:"table-cell-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:o("mceTableMergeCells"),icon:"table-merge-cells",onSetup:e.onSetupMergeable}),t.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:o("mceTableSplitCells"),icon:"table-split-cells",onSetup:e.onSetupUnmergeable}),t.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:o("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:o("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:o("mceTableDeleteRow"),icon:"table-delete-row",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:o("mceTableRowProps"),icon:"table-row-properties",onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:o("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:e.onSetupColumn("onFirst")}),t.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:o("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:e.onSetupColumn("onLast")}),t.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:o("mceTableDeleteCol"),icon:"table-delete-column",onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:o("mceTableCutRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:o("mceTableCopyRow"),onSetup:e.onSetupCellOrRow}),t.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:o("mceTablePasteRowBefore"),onSetup:e.onSetupPasteable(r.getRows)}),t.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:o("mceTablePasteRowAfter"),onSetup:e.onSetupPasteable(r.getRows)}),t.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:o("mceTableCutCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:o("mceTableCopyCol"),onSetup:e.onSetupColumn("onAny")}),t.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:o("mceTablePasteColBefore"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onFirst")}),t.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:o("mceTablePasteColAfter"),onSetup:e.onSetupPasteableColumn(r.getColumns,"onLast")}),t.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:o("mceInsertTable"),icon:"table"});var i=ns(Ma(t));0!==i.length&&t.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:es(t,n,i,"tableclass",(function(n){return t.execCommand("mceTableToggleClass",!1,n)})),onSetup:e.onSetupTable});var u=ns(Ea(t));0!==u.length&&t.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:es(t,n,u,"tablecellclass",(function(n){return t.execCommand("mceTableCellToggleClass",!1,n)})),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:es(t,n,_f,"tablecellverticalalign",ts(t,"vertical-align")),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:es(t,n,Ta(t),"tablecellborderwidth",ts(t,"border-width")),onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:es(t,n,ka(t),"tablecellborderstyle",ts(t,"border-style")),onSetup:e.onSetupCellOrRow}),t.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:o("mceTableToggleCaption"),icon:"table-caption",onSetup:e.onSetupTableWithCaption}),t.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(n){return n(rs(t,Va(t),"background-color"))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(n){return n(rs(t,$a(t),"border-color"))},onSetup:e.onSetupCellOrRow}),t.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:os(t),onSetup:e.onSetupTableRowHeaders}),t.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:is(t),onSetup:e.onSetupTableColumnHeaders})}(t,n,e,u),function(t){var n=function(t){return t.getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")}(t);n.length>0&&t.ui.registry.addContextToolbar("table",{predicate:function(n){return t.dom.is(n,"table")&&t.getBody().contains(n)},items:n,scope:"node",position:"node"})}(t),t.on("PreInit",(function(){t.serializer.addTempAttr(Ei.firstSelected),t.serializer.addTempAttr(Ei.lastSelected),function(t){t.formatter.register(Bs)}(t)})),function(t){return t.getParam("table_tab_navigation",!0,"boolean")}(t)&&t.on("keydown",(function(n){!function(t,n,e){if(t.keyCode===Nd.TAB){var r=yi(n),o=function(t){var n=Qt(t);return Pt(t,r)||D(_d,n)},i=n.selection.getRng(),u=Ot.fromDom(t.shiftKey?i.startContainer:i.endContainer);le(u,o).each((function(r){t.preventDefault(),de(r,o).each(e.clear),n.selection.collapse(t.shiftKey),(t.shiftKey?Md:Ed)(n,o,r).each((function(t){n.selection.setRng(t)}))}))}}(n,t,o)})),t.on("remove",(function(){r.destroy()})),function(t,n,e,r){return{insertTable:Df(t),setClipboardRows:Of(n.setRows),getClipboardRows:kf(n.getRows),setClipboardCols:Of(n.setColumns),getClipboardCols:kf(n.getColumns),resizeHandler:e,selectionTargets:r}}(t,u,r,e)};kr.add("table",Zm)}()},"9dd9":function(t,n,e){(function(t){!function(){"use strict";var n=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}},e=tinymce.util.Tools.resolve("tinymce.PluginManager"),r=tinymce.util.Tools.resolve("tinymce.util.Tools"),o=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}("array"),i=function(t){return!function(t){return null==t}(t)},u=function(t){return function(n){return typeof n===t}}("function"),a=function(){},c=function(t){return function(){return t}},l=function(t){return t},f=c(!1),s=c(!0),d=function(){return m},m=function(){var t=function(t){return t()},n=l;return{fold:function(t,n){return t()},isSome:f,isNone:s,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:c(null),getOrUndefined:c(void 0),or:n,orThunk:t,map:d,each:a,bind:d,exists:f,forall:s,filter:function(){return d()},toArray:function(){return[]},toString:c("none()")}}(),g=function(t){var n=c(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:s,isNone:f,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return g(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:m},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},p={some:g,none:d,from:function(t){return null==t?m:g(t)}},h={},v={exports:h};!function(n,e,r,o){!function(t,n){"object"==typeof e&&void 0!==r?r.exports=n():(t="undefined"!=typeof globalThis?globalThis:t||self).EphoxContactWrapper=n()}(this,(function(){var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e={exports:{}};!function(t){!function(n){var e=setTimeout;function r(){}function o(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}function i(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,o._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void a(n.promise,t)}u(n.promise,r)}else(1===t._state?u:a)(n.promise,t._value)}))):t._deferreds.push(n)}function u(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof o)return t._state=3,t._value=n,void c(t);if("function"==typeof e)return void f(function(t,n){return function(){t.apply(n,arguments)}}(e,n),t)}t._state=1,t._value=n,c(t)}catch(n){a(t,n)}}function a(t,n){t._state=2,t._value=n,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&o._immediateFn((function(){t._handled||o._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)i(t,t._deferreds[n]);t._deferreds=null}function l(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function f(t,n){var e=!1;try{t((function(t){e||(e=!0,u(n,t))}),(function(t){e||(e=!0,a(n,t))}))}catch(t){if(e)return;e=!0,a(n,t)}}o.prototype.catch=function(t){return this.then(null,t)},o.prototype.then=function(t,n){var e=new this.constructor(r);return i(this,new l(t,n,e)),e},o.all=function(t){var n=Array.prototype.slice.call(t);return new o((function(t,e){if(0===n.length)return t([]);var r=n.length;function o(i,u){try{if(u&&("object"==typeof u||"function"==typeof u)){var a=u.then;if("function"==typeof a)return void a.call(u,(function(t){o(i,t)}),e)}n[i]=u,0==--r&&t(n)}catch(t){e(t)}}for(var i=0;i<n.length;i++)o(i,n[i])}))},o.resolve=function(t){return t&&"object"==typeof t&&t.constructor===o?t:new o((function(n){n(t)}))},o.reject=function(t){return new o((function(n,e){e(t)}))},o.race=function(t){return new o((function(n,e){for(var r=0,o=t.length;r<o;r++)t[r].then(n,e)}))},o._immediateFn="function"==typeof setImmediate?function(t){setImmediate(t)}:function(t){e(t,0)},o._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},o._setImmediateFn=function(t){o._immediateFn=t},o._setUnhandledRejectionFn=function(t){o._unhandledRejectionFn=t},t.exports?t.exports=o:n.Promise||(n.Promise=o)}(n)}(e);var r=e.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||r}}))}(0,h,v);var b=v.exports.boltExport,y=function(t,n){return C(document.createElement("canvas"),t,n)},w=function(t){var n=y(t.width,t.height);return x(n).drawImage(t,0,0),n},x=function(t){return t.getContext("2d")},C=function(t,n,e){return t.width=n,t.height=e,t},S=function(t){return new b((function(n,e){var r=URL.createObjectURL(t),o=new Image,i=function(){o.removeEventListener("load",u),o.removeEventListener("error",a)},u=function(){i(),n(o)},a=function(){i(),e("Unable to load data of type "+t.type+": "+r)};o.addEventListener("load",u),o.addEventListener("error",a),o.src=r,o.complete&&setTimeout(u,0)}))},T=function(t){return new b((function(n,e){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=function(){200===this.status&&n(this.response)},r.onerror=function(){var t=this;e(0===this.status?function(){var t=new Error("No access to download image");return t.code=18,t.name="SecurityError",t}():new Error("Error "+t.status+" downloading image"))},r.send()}))},k=function(t){return new b((function(n,e){(function(t){var n=t.split(","),e=/data:([^;]+)/.exec(n[0]);if(!e)return p.none();for(var r=e[1],o=n[1],i=1024,u=atob(o),a=u.length,c=Math.ceil(a/i),l=new Array(c),f=0;f<c;++f){for(var s=f*i,d=Math.min(s+i,a),m=new Array(d-s),g=s,h=0;g<d;++h,++g)m[h]=u[g].charCodeAt(0);l[f]=new Uint8Array(m)}return p.some(new Blob(l,{type:r}))})(t).fold((function(){e("uri is not base64: "+t)}),n)}))},O=function(t,n,e){return n=n||"image/png",u(HTMLCanvasElement.prototype.toBlob)?new b((function(r,o){t.toBlob((function(t){t?r(t):o()}),n,e)})):k(t.toDataURL(n,e))},D=function(t){URL.revokeObjectURL(t.src)},A=function(t){return function(t){var n=t.src;return 0===n.indexOf("data:")?k(n):T(n)}(t)},R=Array.prototype.indexOf,P=function(t,n){return function(t,n){return R.call(t,n)}(t,n)>-1},N=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},E=function(t,n){return function(t,n,e){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(n(i,r))return p.some(i);if(e(i,r))break}return p.none()}(t,n,f)},M=function(t,n){for(var e=0,r=t.length;e<r;++e){if(!0!==n(t[e],e))return!1}return!0},I=Object.keys;(function(t){if(!o(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");var n=[],e={};N(t,(function(r,i){var u=I(r);if(1!==u.length)throw new Error("one and only one name per case");var a=u[0],c=r[a];if(void 0!==e[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!o(c))throw new Error("case arguments must be an array");n.push(a),e[a]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var o=e.length;if(o!==c.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+c.length+" ("+c+"), got "+o);var u=function(t){var r=I(t);if(n.length!==r.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+"\nActual: "+r.join(","));if(!M(n,(function(t){return P(r,t)})))throw new Error("Not all branches were specified when using match. Specified: "+r.join(", ")+"\nRequired: "+n.join(", "));return t[a].apply(null,e)};return{fold:function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(n.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+n.length);var o=n[i];return o.apply(null,e)},match:u,log:function(t){console.log(t,{constructors:n,constructor:a,params:e})}}}}))})([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var _=function(t,n,e){var r=n.type,o=c(r),i=c(e),u=function(n,e){return t.then((function(t){return function(t,n,e){return n=n||"image/png",t.toDataURL(n,e)}(t,n,e)}))};return{getType:o,toBlob:function(){return b.resolve(n)},toDataURL:i,toBase64:function(){return e.split(",")[1]},toAdjustedBlob:function(n,e){return t.then((function(t){return O(t,n,e)}))},toAdjustedDataURL:u,toAdjustedBase64:function(t,n){return u(t,n).then((function(t){return t.split(",")[1]}))},toCanvas:function(){return t.then(w)}}},B=function(t){return function(t){return new b((function(n){var e=new FileReader;e.onloadend=function(){n(e.result)},e.readAsDataURL(t)}))}(t).then((function(n){return _(function(t){return S(t).then((function(t){D(t);var n=y(function(t){return t.naturalWidth||t.width}(t),function(t){return t.naturalHeight||t.height}(t));return x(n).drawImage(t,0,0),n}))}(t),t,n)}))},L=function(t,n){return O(t,n).then((function(n){return _(b.resolve(t),n,t.toDataURL())}))},j=function(t,n){void 0===n&&(n=2);var e=Math.pow(10,n),r=Math.round(t*e);return Math.ceil(r/e)},F=function(t,n,e){var r=(e<0?360+e:e)*Math.PI/180,o=t.width,i=t.height,u=Math.sin(r),a=Math.cos(r),c=j(Math.abs(o*a)+Math.abs(i*u)),l=j(Math.abs(o*u)+Math.abs(i*a)),f=y(c,l),s=x(f);return s.translate(c/2,l/2),s.rotate(r),s.drawImage(t,-o/2,-i/2),L(f,n)},U=function(t,n,e){var r=y(t.width,t.height),o=x(r);return"v"===e?(o.scale(1,-1),o.drawImage(t,0,-r.height)):(o.scale(-1,1),o.drawImage(t,-r.width,0)),L(r,n)},z=function(t,n){return function(t,n){return t.toCanvas().then((function(e){return U(e,t.getType(),n)}))}(t,n)},H=function(t,n){return function(t,n){return t.toCanvas().then((function(e){return F(e,t.getType(),n)}))}(t,n)},W=function(t,n,e){return void 0===e&&(e=!1),new b((function(r){var o=new XMLHttpRequest;o.onreadystatechange=function(){4===o.readyState&&r({status:o.status,blob:o.response})},o.open("GET",t,!0),o.withCredentials=e,function(t,n){for(var e=I(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}}(n,(function(t,n){o.setRequestHeader(n,t)})),o.responseType="blob",o.send()}))},V=[{code:404,message:"Could not find Image Proxy"},{code:403,message:"Rejected request"},{code:0,message:"Incorrect Image Proxy URL"}],$=[{type:"not_found",message:"Failed to load image."},{type:"key_missing",message:"The request did not include an api key."},{type:"key_not_found",message:"The provided api key could not be found."},{type:"domain_not_trusted",message:"The api key is not valid for the request origins."}],q=function(t,n){var e=function(t,n,e){return N(t,(function(t,r){e=n(e,t,r)})),e}(n,(function(t,n){return i(t)?t[n]:void 0}),t);return p.from(e)},K=function(t){var n=function(t){return"ImageProxy HTTP error: "+E(V,(function(n){return t===n.code})).fold(c("Unknown ImageProxy error"),(function(t){return t.message}))}(t);return b.reject(n)},G=function(t){return E($,(function(n){return n.type===t})).fold(c("Unknown service error"),(function(t){return t.message}))},Y=function(t){return"ImageProxy Service error: "+function(t){try{return p.some(JSON.parse(t))}catch(t){return p.none()}}(t).bind((function(t){return q(t,["error","type"]).map(G)})).getOr("Invalid JSON in service error message")},J=function(t){return function(t){return new b((function(n,e){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=function(t){e(t)},r.readAsText(t)}))}(t).then((function(t){var n=Y(t);return b.reject(n)}))},X=function(t){return t<200||t>=300},Q=function(t,n){var e={"Content-Type":"application/json;charset=UTF-8","tiny-api-key":n};return W(function(t,n){var e=-1===t.indexOf("?")?"?":"&";return/[?&]apiKey=/.test(t)?t:t+e+"apiKey="+encodeURIComponent(n)}(t,n),e).then((function(t){return X(t.status)?function(t,n){return function(t,n){return"application/json"===(null==n?void 0:n.type)&&(400===t||403===t||404===t||500===t)}(t,n)?J(n):K(t)}(t.status,t.blob):b.resolve(t.blob)}))},Z=function(t,n,e){return void 0===e&&(e=!1),n?Q(t,n):function(t,n){return W(t,{},n).then((function(t){return X(t.status)?K(t.status):b.resolve(t.blob)}))}(t,e)},tt=function(t){return B(t)},nt=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},et={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return nt(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return nt(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return nt(e)},fromDom:nt,fromPoint:function(t,n,e){return p.from(t.dom.elementFromPoint(n,e)).map(nt)}};"undefined"!=typeof window?window:Function("return this;")();var rt=function(t,n){return function(t,n){return E(t.dom.childNodes,(function(t){return n(et.fromDom(t))})).map(et.fromDom)}(t,(function(t){return function(t,n){var e=t.dom;if(1!==e.nodeType)return!1;var r=e;if(void 0!==r.matches)return r.matches(n);if(void 0!==r.msMatchesSelector)return r.msMatchesSelector(n);if(void 0!==r.webkitMatchesSelector)return r.webkitMatchesSelector(n);if(void 0!==r.mozMatchesSelector)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}(t,n)}))},ot=tinymce.util.Tools.resolve("tinymce.util.Delay"),it=tinymce.util.Tools.resolve("tinymce.util.Promise"),ut=tinymce.util.Tools.resolve("tinymce.util.URI"),at=function(t){return t.getParam("imagetools_toolbar","rotateleft rotateright flipv fliph editimage imageoptions")},ct=function(t){return t.getParam("imagetools_proxy")},lt=function(t){var n,e,r=function(t){return/^[0-9\.]+px$/.test(t)};return n=t.style.width,e=t.style.height,n||e?r(n)&&r(e)?{w:parseInt(n,10),h:parseInt(e,10)}:null:(n=t.width,e=t.height,n&&e?{w:parseInt(n,10),h:parseInt(e,10)}:null)},ft=function(t){return{w:t.naturalWidth,h:t.naturalHeight}},st=0,dt=function(t){return rt(et.fromDom(t),"img")},mt=function(t,n){return t.dom.is(n,"figure")},gt=function(t,n){return t.dom.is(n,"img:not([data-mce-object],[data-mce-placeholder])")},pt=function(t,n){var e=function(n){return gt(t,n)&&(yt(t,n)||wt(t,n)||i(ct(t)))};return mt(t,n)?dt(n).bind((function(t){return e(t.dom)?p.some(t.dom):p.none()})):e(n)?p.some(n):p.none()},ht=function(t,n){t.notificationManager.open({text:n,type:"error"})},vt=function(t){var n=t.selection.getNode(),e=t.dom.getParent(n,"figure.image");return null!==e&&mt(t,e)?dt(e):gt(t,n)?p.some(et.fromDom(n)):p.none()},bt=function(t,n,e){var r=n.match(/(?:\/|^)(([^\/\?]+)\.(?:[a-z0-9.]+))(?:\?|$)/i);return i(r)?t.dom.encode(r[e]):null},yt=function(t,n){var e=n.src;return 0===e.indexOf("data:")||0===e.indexOf("blob:")||new ut(e).host===t.documentBaseURI.host},wt=function(t,n){return-1!==r.inArray(function(t){return t.getParam("imagetools_cors_hosts",[],"string[]")}(t),new ut(n.src).host)},xt=function(t,n){return-1!==r.inArray(function(t){return t.getParam("imagetools_credentials_hosts",[],"string[]")}(t),new ut(n.src).host)},Ct=function(t,n){return function(t){return p.from(t.getParam("imagetools_fetch_image",null,"function"))}(t).fold((function(){return function(t,n){if(wt(t,n))return Z(n.src,null,xt(t,n));if(!yt(t,n)){var e=ct(t),r=e+(-1===e.indexOf("?")?"?":"&")+"url="+encodeURIComponent(n.src),o=function(t){return t.getParam("api_key",t.getParam("imagetools_api_key","","string"),"string")}(t);return Z(r,o,!1)}return A(n)}(t,n)}),(function(t){return t(n)}))},St=function(t,n){var e=t.editorUpload.blobCache.getByUri(n.src);return e?it.resolve(e.blob()):Ct(t,n)},Tt=function(t){ot.clearTimeout(t.get())},kt=function(t,n,e,r,o,u,a){return e.toBlob().then((function(c){var l,f,s,d,m=t.editorUpload.blobCache;l=u.src;var g=n.type===c.type;return function(t){return t.getParam("images_reuse_filename",!1,"boolean")}(t)&&(d=m.getByUri(l),i(d)?(l=d.uri(),f=d.name(),s=d.filename()):(f=bt(t,l,2),s=bt(t,l,1))),d=m.create({id:"imagetools"+st++,blob:c,base64:e.toBase64(),uri:l,name:f,filename:g?s:void 0}),m.add(d),t.undoManager.transact((function(){var n=function(){t.$(u).off("load",n),t.nodeChanged(),r?t.editorUpload.uploadImagesAuto():(Tt(o),function(t,n){var e=ot.setEditorTimeout(t,(function(){t.editorUpload.uploadImagesAuto()}),function(t){return t.getParam("images_upload_timeout",3e4,"number")}(t));n.set(e)}(t,o))};t.$(u).on("load",n),a&&t.$(u).attr({width:a.w,height:a.h}),t.$(u).attr({src:d.blobUri()}).removeAttr("data-mce-src")})),d}))},Ot=function(t,n,e,r){return function(){return vt(t).fold((function(){ht(t,"Could not find selected image")}),(function(o){return t._scanForImages().then((function(){return St(t,o.dom)})).then((function(i){return tt(i).then(e).then((function(e){return kt(t,i,e,!1,n,o.dom,r)}))})).catch((function(n){ht(t,n)}))}))}},Dt=function(t,n,e){return function(){var r=vt(t).map((function(t){var n=lt(t.dom);return n?{w:n.h,h:n.w}:null})).getOrNull();return Ot(t,n,(function(t){return H(t,e)}),r)()}},At=function(t,n,e){return function(){return Ot(t,n,(function(t){return z(t,e)}))()}},Rt=function(t,n,e,r,o){return function(t){return S(t)}(o).then((function(t){var n=ft(t);return r.w===n.w&&r.h===n.h||lt(e)&&function(t,n){var e,r;n&&(e=t.style.width,r=t.style.height,(e||r)&&(t.style.width=n.w+"px",t.style.height=n.h+"px",t.removeAttribute("data-mce-style")),e=t.width,r=t.height,(e||r)&&(t.setAttribute("width",String(n.w)),t.setAttribute("height",String(n.h))))}(e,n),URL.revokeObjectURL(t.src),o})).then(tt).then((function(r){return kt(t,o,r,!0,n,e)}))},Pt=function(t,n){return function(){var e=function(e){return{title:"Edit Image",size:"large",body:{type:"panel",items:[{type:"imagetools",name:"imagetools",label:"Edit Image",currentState:e}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0,disabled:!0}],onSubmit:function(e){var i=e.getData().imagetools.blob;r.each((function(e){o.each((function(r){Rt(t,n,e.dom,r,i)}))})),e.close()},onCancel:a,onAction:function(t,n){switch(n.name){case"save-state":n.value?t.enable("save"):t.disable("save");break;case"disable":t.disable("save"),t.disable("cancel");break;case"enable":t.enable("cancel")}}}},r=vt(t),o=r.map((function(t){return ft(t.dom)}));r.each((function(n){pt(t,n.dom).each((function(r){St(t,n.dom).then((function(n){var r=function(t){return{blob:t,url:URL.createObjectURL(t)}}(n);t.windowManager.open(e(r))}))}))}))}},Nt=function(t,n){r.each({mceImageRotateLeft:Dt(t,n,-90),mceImageRotateRight:Dt(t,n,90),mceImageFlipVertical:At(t,n,"v"),mceImageFlipHorizontal:At(t,n,"h"),mceEditImage:Pt(t,n)},(function(n,e){t.addCommand(e,n)}))};e.add("imagetools",(function(t){var e=n(0),r=n(null);Nt(t,e),function(t){var n=[],e=function(n){return function(){return t.execCommand(n)}},r=function(){return vt(t).exists((function(n){return pt(t,n.dom).isSome()}))},o=function(t){var e=function(n){return t.setDisabled(!n)};return e(r()),n=n.concat([e]),function(){n=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e}(n,(function(t){return t!==e}))}};t.on("NodeChange",(function(){var t=r();N(n,(function(n){return n(t)}))})),t.ui.registry.addButton("rotateleft",{tooltip:"Rotate counterclockwise",icon:"rotate-left",onAction:e("mceImageRotateLeft"),onSetup:o}),t.ui.registry.addButton("rotateright",{tooltip:"Rotate clockwise",icon:"rotate-right",onAction:e("mceImageRotateRight"),onSetup:o}),t.ui.registry.addButton("flipv",{tooltip:"Flip vertically",icon:"flip-vertically",onAction:e("mceImageFlipVertical"),onSetup:o}),t.ui.registry.addButton("fliph",{tooltip:"Flip horizontally",icon:"flip-horizontally",onAction:e("mceImageFlipHorizontal"),onSetup:o}),t.ui.registry.addButton("editimage",{tooltip:"Edit image",icon:"edit-image",onAction:e("mceEditImage"),onSetup:o}),t.ui.registry.addButton("imageoptions",{tooltip:"Image options",icon:"image",onAction:e("mceImage")}),t.ui.registry.addContextMenu("imagetools",{update:function(n){return pt(t,n).map((function(t){return{text:"Edit image",icon:"edit-image",onAction:e("mceEditImage")}})).toArray()}})}(t),function(t){t.ui.registry.addContextToolbar("imagetools",{items:at(t),predicate:function(n){return pt(t,n).isSome()},position:"node",scope:"node"})}(t),function(t,n,e){t.on("NodeChange",(function(r){var o=e.get(),i=pt(t,r.element);o&&!i.exists((function(t){return o.src===t.src}))&&(Tt(n),t.editorUpload.uploadImagesAuto(),e.set(null)),i.each(e.set)}))}(t,e,r)}))}()}).call(this,e("c8ba"))},a376:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return t.getParam("insertdatetime_timeformat",t.translate("%H:%M:%S"))},e=function(t){return t.getParam("insertdatetime_formats",["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"])},r=function(t){var r=e(t);return r.length>0?r[0]:n(t)},o="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),i="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),u="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),a="January February March April May June July August September October November December".split(" "),c=function(t,n){if((t=""+t).length<n)for(var e=0;e<n-t.length;e++)t="0"+t;return t},l=function(t,n,e){return void 0===e&&(e=new Date),n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace("%D","%m/%d/%Y")).replace("%r","%I:%M:%S %p")).replace("%Y",""+e.getFullYear())).replace("%y",""+e.getYear())).replace("%m",c(e.getMonth()+1,2))).replace("%d",c(e.getDate(),2))).replace("%H",""+c(e.getHours(),2))).replace("%M",""+c(e.getMinutes(),2))).replace("%S",""+c(e.getSeconds(),2))).replace("%I",""+((e.getHours()+11)%12+1))).replace("%p",e.getHours()<12?"AM":"PM")).replace("%B",""+t.translate(a[e.getMonth()]))).replace("%b",""+t.translate(u[e.getMonth()]))).replace("%A",""+t.translate(i[e.getDay()]))).replace("%a",""+t.translate(o[e.getDay()]))).replace("%%","%")},f=function(t,n){if(function(t){return t.getParam("insertdatetime_element",!1)}(t)){var e,r=l(t,n);e=/%[HMSIp]/.test(n)?l(t,"%Y-%m-%dT%H:%M"):l(t,"%Y-%m-%d");var o=t.dom.getParent(t.selection.getStart(),"time");o?function(t,n,e,r){var o=t.dom.create("time",{datetime:e},r);n.parentNode.insertBefore(o,n),t.dom.remove(n),t.selection.select(o,!0),t.selection.collapse(!1)}(t,o,e,r):t.insertContent('<time datetime="'+e+'">'+r+"</time>")}else t.insertContent(l(t,n))},s=tinymce.util.Tools.resolve("tinymce.util.Tools");t.add("insertdatetime",(function(t){(function(t){t.addCommand("mceInsertDate",(function(n,e){f(t,null!=e?e:function(t){return t.getParam("insertdatetime_dateformat",t.translate("%Y-%m-%d"))}(t))})),t.addCommand("mceInsertTime",(function(e,r){f(t,null!=r?r:n(t))}))})(t),function(t){var n=e(t),o=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}}(r(t)),i=function(n){return t.execCommand("mceInsertDate",!1,n)};t.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:function(t){return t===o.get()},fetch:function(e){e(s.map(n,(function(n){return{type:"choiceitem",text:l(t,n),value:n}})))},onAction:function(t){i(o.get())},onItemAction:function(t,n){o.set(n),i(n)}});var u=function(t){return function(){o.set(t),i(t)}};t.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:function(){return s.map(n,(function(n){return{type:"menuitem",text:l(t,n),onAction:u(n)}}))}})}(t)}))}()},bc54:function(t,n,e){e("7c4f")},be7f:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=tinymce.util.Tools.resolve("tinymce.util.VK"),e=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},r=function(t){return function(n){return typeof n===t}},o=e("string"),i=e("array"),u=function(t){return function(n){return t===n}}(null),a=r("boolean"),c=r("function"),l=function(){},f=function(t){return function(){return t}},s=function(t){return t},d=function(t,n){return t===n},m=f(!1),g=f(!0),p=function(){return h},h=function(){var t=function(t){return t()},n=s;return{fold:function(t,n){return t()},isSome:m,isNone:g,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:f(null),getOrUndefined:f(void 0),or:n,orThunk:t,map:p,each:l,bind:p,exists:m,forall:g,filter:function(){return p()},toArray:function(){return[]},toString:f("none()")}}(),v=function(t){var n=f(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:g,isNone:m,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return v(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:h},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},b={some:v,none:p,from:function(t){return null==t?h:v(t)}},y=Array.prototype.indexOf,w=Array.prototype.push,x=function(t,n){return function(t,n){return y.call(t,n)}(t,n)>-1},C=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!i(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);w.apply(n,t[e])}return n},S=function(t,n){return C(function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n))},T=function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return b.none()},k=function(t,n,e){return void 0===e&&(e=d),t.exists((function(t){return e(t,n)}))},O=function(t){for(var n=[],e=function(t){n.push(t)},r=0;r<t.length;r++)t[r].each(e);return n},D=function(t,n){return t?b.some(n):b.none()},A=function(t){var n=t.getParam("link_assume_external_targets",!1);return a(n)&&n?1:!o(n)||"http"!==n&&"https"!==n?0:n},R=function(t){return t.getParam("default_link_target")},P=function(t){return t.getParam("target_list",!0)},N=function(t){return t.getParam("rel_list",[],"array")},E=function(t){return t.getParam("link_title",!0,"boolean")},M=function(t){return t.getParam("allow_unsafe_link_target",!1,"boolean")},I=function(t){return t.getParam("link_default_protocol","http","string")},_=tinymce.util.Tools.resolve("tinymce.util.Tools"),B=function(t){return o(t.value)?t.value:""},L=function(t,n){var e=[];return _.each(t,(function(t){var r=function(t){return o(t.text)?t.text:o(t.title)?t.title:""}(t);if(void 0!==t.menu){var i=L(t.menu,n);e.push({text:r,items:i})}else{var u=n(t);e.push({text:r,value:u})}})),e},j=function(t){return void 0===t&&(t=B),function(n){return b.from(n).map((function(n){return L(n,t)}))}},F={sanitize:function(t){return j(B)(t)},sanitizeWith:j,createUi:function(t,n){return function(e){return{name:t,type:"listbox",label:n,items:e}}},getValue:B},U=function(){return(U=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},z=Object.keys,H=Object.hasOwnProperty,W=function(t,n,e,r){return function(t,n){for(var e=z(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}}(t,(function(t,o){(n(t,o)?e:r)(t,o)})),{}},V=function(t,n){return H.call(t,n)},$=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),q=tinymce.util.Tools.resolve("tinymce.util.URI"),K=function(t){return t&&"a"===t.nodeName.toLowerCase()},G=function(t){return K(t)&&!!X(t)},Y=function(t,n){if(t.collapsed)return[];var e=t.cloneContents(),r=new $(e.firstChild,e),o=[],i=e.firstChild;do{n(i)&&o.push(i)}while(i=r.next());return o},J=function(t){return/^\w+:/i.test(t)},X=function(t){return t.getAttribute("data-mce-href")||t.getAttribute("href")},Q=function(t,n){var e=["noopener"],r=t?t.split(/\s+/):[],o=function(t){return t.filter((function(t){return-1===_.inArray(e,t)}))},i=n?function(t){return(t=o(t)).length>0?t.concat(e):e}(r):o(r);return i.length>0?function(t){return _.trim(t.sort().join(" "))}(i):""},Z=function(t,n){return n=n||t.selection.getNode(),rt(n)?t.dom.select("a[href]",n)[0]:t.dom.getParent(n,"a[href]")},tt=function(t,n){return function(t){return t.replace(/\uFEFF/g,"")}(n?n.innerText||n.textContent:t.getContent({format:"text"}))},nt=function(t){return _.grep(t,G).length>0},et=function(t){var n=t.schema.getTextInlineElements();return 0===Y(t.selection.getRng(),(function(t){return 1===t.nodeType&&!K(t)&&!V(n,t.nodeName.toLowerCase())})).length},rt=function(t){return t&&"FIGURE"===t.nodeName&&/\bimage\b/i.test(t.className)},ot=function(t,n){var e=U({},n);if(!(N(t).length>0)&&!1===M(t)){var r=Q(e.rel,"_blank"===e.target);e.rel=r||null}return b.from(e.target).isNone()&&!1===P(t)&&(e.target=R(t)),e.href=function(t,n){return"http"!==n&&"https"!==n||J(t)?t:n+"://"+t}(e.href,A(t)),e},it=function(t,n,e){var r=t.selection.getNode(),o=Z(t,r),i=ot(t,function(t){return function(t,n,e){return function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}}(t,(function(t,r){e=n(e,t,r)})),e}(["title","rel","class","target"],(function(n,e){return t[e].each((function(t){n[e]=t.length>0?t:null})),n}),{href:t.href})}(e));t.undoManager.transact((function(){e.href===n.href&&n.attach(),o?(t.focus(),function(t,n,e,r){e.each((function(t){V(n,"innerText")?n.innerText=t:n.textContent=t})),t.dom.setAttribs(n,r),t.selection.select(n)}(t,o,e.text,i)):function(t,n,e,r){rt(n)?ft(t,n,r):e.fold((function(){t.execCommand("mceInsertLink",!1,r)}),(function(n){t.insertContent(t.dom.createHTML("a",r,t.dom.encode(n)))}))}(t,r,e.text,i)}))},ut=function(t){var n=t.class,e=t.href,r=t.rel,o=t.target,i=t.text,a=t.title;return function(t,n){var e={};return W(t,n,function(t){return function(n,e){t[e]=n}}(e),l),e}({class:n.getOrNull(),href:e,rel:r.getOrNull(),target:o.getOrNull(),text:i.getOrNull(),title:a.getOrNull()},(function(t,n){return!1===u(t)}))},at=function(t,n,e){var r=function(t,n){var e=n.href;return U(U({},n),{href:q.isDomSafe(e,"a",t.settings)?e:""})}(t,e);t.hasPlugin("rtc",!0)?t.execCommand("createlink",!1,ut(r)):it(t,n,r)},ct=function(t){t.hasPlugin("rtc",!0)?t.execCommand("unlink"):function(t){t.undoManager.transact((function(){var n=t.selection.getNode();rt(n)?lt(t,n):function(t){var n=t.dom,e=t.selection,r=e.getBookmark(),o=e.getRng().cloneRange(),i=n.getParent(o.startContainer,"a[href]",t.getBody()),u=n.getParent(o.endContainer,"a[href]",t.getBody());i&&o.setStartBefore(i),u&&o.setEndAfter(u),e.setRng(o),t.execCommand("unlink"),e.moveToBookmark(r)}(t),t.focus()}))}(t)},lt=function(t,n){var e=t.dom.select("img",n)[0];if(e){var r=t.dom.getParents(e,"a[href]",n)[0];r&&(r.parentNode.insertBefore(e,r),t.dom.remove(r))}},ft=function(t,n,e){var r=t.dom.select("img",n)[0];if(r){var o=t.dom.create("a",e);r.parentNode.insertBefore(o,r),o.appendChild(r)}},st=function(t){return function(t,n){return V(t,n)&&void 0!==t[n]&&null!==t[n]}(t,"items")},dt=function(t,n){return T(n,(function(n){return st(n)?dt(t,n.items):D(n.value===t,n)}))},mt=function(t,n,e,r){var o=r[n],i=t.length>0;return void 0!==o?dt(o,e).map((function(n){return{url:{value:n.value,meta:{text:i?t:n.text,attach:l}},text:i?t:n.text}})):b.none()},gt=function(t,n){var e={text:t.text,title:t.title},r=function(t){return D(e.title.length<=0,b.from(t.meta.title).getOr(""))},o=function(t){return D(e.text.length<=0,b.from(t.meta.text).getOr(t.value))},i=function(t){var n=o(t.url),e=r(t.url);return n.isSome()||e.isSome()?b.some(U(U({},n.map((function(t){return{text:t}})).getOr({})),e.map((function(t){return{title:t}})).getOr({}))):b.none()},u=function(t,r){var o=function(t,n){return"link"===n?t.link:"anchor"===n?t.anchor:b.none()}(n,r.name).getOr([]);return mt(e.text,r.name,o,t)};return{onChange:function(t,n){var r=n.name;return"url"===r?i(t()):x(["anchor","link"],r)?u(t(),n):"text"===r||"title"===r?(e[r]=t()[r],b.none()):b.none()}}},pt=tinymce.util.Tools.resolve("tinymce.util.Delay"),ht=tinymce.util.Tools.resolve("tinymce.util.Promise"),vt=function(t){var n=t.href;return n.indexOf("@")>0&&-1===n.indexOf("/")&&-1===n.indexOf("mailto:")?b.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(t){return U(U({},t),{href:"mailto:"+n})}}):b.none()},bt=function(t,n){return function(e){var r=e.href;return 1===t&&!J(r)||0===t&&/^\s*www(\.|\d\.)/i.test(r)?b.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+n+":// prefix?",preprocess:function(t){return U(U({},t),{href:n+"://"+r})}}):b.none()}},yt=function(t,n){return T([vt,bt(A(t),I(t))],(function(t){return t(n)})).fold((function(){return ht.resolve(n)}),(function(e){return new ht((function(r){!function(t,n,e){var r=t.selection.getRng();pt.setEditorTimeout(t,(function(){t.windowManager.confirm(n,(function(n){t.selection.setRng(r),e(n)}))}))}(t,e.message,(function(t){r(t?e.preprocess(n):n)}))}))}))},wt=function(t){var n=t.dom.select("a:not([href])"),e=S(n,(function(t){var n=t.name||t.id;return n?[{text:n,value:"#"+n}]:[]}));return e.length>0?b.some([{text:"None",value:""}].concat(e)):b.none()},xt=function(t){var n=function(t){return t.getParam("link_class_list",[],"array")}(t);return n.length>0?F.sanitize(n):b.none()},Ct=tinymce.util.Tools.resolve("tinymce.util.XHR"),St=function(t){var n=function(n){return t.convertURL(n.value||n.url,"href")},e=function(t){return t.getParam("link_list")}(t);return new ht((function(t){o(e)?Ct.send({url:e,success:function(n){return t(function(t){try{return b.some(JSON.parse(t))}catch(t){return b.none()}}(n))},error:function(n){return t(b.none())}}):c(e)?e((function(n){return t(b.some(n))})):t(b.from(e))})).then((function(t){return t.bind(F.sanitizeWith(n)).map((function(t){if(t.length>0){return[{text:"None",value:""}].concat(t)}return t}))}))},Tt=function(t,n){var e=N(t);if(e.length>0){var r=k(n,"_blank");return(!1===M(t)?F.sanitizeWith((function(t){return Q(F.getValue(t),r)})):F.sanitize)(e)}return b.none()},kt=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Ot=function(t){var n=P(t);return i(n)?F.sanitize(n).orThunk((function(){return b.some(kt)})):!1===n?b.none():b.some(kt)},Dt=function(t,n,e){var r=t.getAttrib(n,e);return null!==r&&r.length>0?b.some(r):b.none()},At=function(t,n){return St(t).then((function(e){var r=function(t,n){var e=t.dom,r=et(t)?b.some(tt(t.selection,n)):b.none(),o=n?b.some(e.getAttrib(n,"href")):b.none(),i=n?b.from(e.getAttrib(n,"target")):b.none(),u=Dt(e,n,"rel"),a=Dt(e,n,"class");return{url:o,text:r,title:Dt(e,n,"title"),target:i,rel:u,linkClass:a}}(t,n);return{anchor:r,catalogs:{targets:Ot(t),rels:Tt(t,r.target),classes:xt(t),anchor:wt(t),link:e},optNode:b.from(n),flags:{titleEnabled:E(t)}}}))},Rt=function(t){(function(t){var n=Z(t);return At(t,n)})(t).then((function(n){return function(t,n,e){var r=t.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),o=t.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=function(t,n){var e=t.anchor,r=e.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:e.text.getOr(""),title:e.title.getOr(""),anchor:r,link:r,rel:e.rel.getOr(""),target:e.target.or(n).getOr(""),linkClass:e.linkClass.getOr("")}}(t,b.from(R(e))),u=t.catalogs,a=gt(i,u);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:C([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],r,o,O([u.anchor.map(F.createUi("anchor","Anchors")),u.rels.map(F.createUi("rel","Rel")),u.targets.map(F.createUi("target","Open link in...")),u.link.map(F.createUi("link","Link list")),u.classes.map(F.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onChange:function(t,n){var e=n.name;a.onChange(t.getData,{name:e}).each((function(n){t.setData(n)}))},onSubmit:n}}(n,function(t,n){return function(e){var r=e.getData();if(!r.url.value)return ct(t),void e.close();var o=function(t){return b.from(r[t]).filter((function(e){return!k(n.anchor[t],e)}))},i={href:r.url.value,text:o("text"),target:o("target"),rel:o("rel"),class:o("linkClass"),title:o("title")},u={href:r.url.value,attach:void 0!==r.url.meta&&r.url.meta.attach?r.url.meta.attach:l};yt(t,i).then((function(n){at(t,u,n)})),e.close()}}(t,n),t)})).then((function(n){t.windowManager.open(n)}))},Pt=function(t){var n=document.createElement("a");n.target="_blank",n.href=t,n.rel="noreferrer noopener";var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function(t,n){document.body.appendChild(t),t.dispatchEvent(n),document.body.removeChild(t)}(n,e)},Nt=function(t,n){return t.dom.getParent(n,"a[href]")},Et=function(t){return Nt(t,t.selection.getStart())},Mt=function(t,n){if(n){var e=X(n);if(/^#/.test(e)){var r=t.$(e);r.length&&t.selection.scrollIntoView(r[0],!0)}else Pt(n.href)}},It=function(t){return function(){Rt(t)}},_t=function(t){return function(){Mt(t,Et(t))}},Bt=function(t,n){return t.on("NodeChange",n),function(){return t.off("NodeChange",n)}},Lt=function(t){return function(n){var e=function(){return n.setActive(!t.mode.isReadOnly()&&null!==Z(t,t.selection.getNode()))};return e(),Bt(t,e)}},jt=function(t){return function(n){var e=function(){return n.setDisabled(null===Z(t,t.selection.getNode()))};return e(),Bt(t,e)}},Ft=function(t){return function(n){var e=function(n){return nt(n)||function(t){return Y(t,G).length>0}(t.selection.getRng())},r=t.dom.getParents(t.selection.getStart());return n.setDisabled(!e(r)),Bt(t,(function(t){return n.setDisabled(!e(t.parents))}))}},Ut=function(t){var n=function(n){var e=t.selection.getNode();return n.setDisabled(!Z(t,e)),l};t.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Lt(t)},label:"Link",predicate:function(n){return!!Z(t,n)&&function(t){return t.getParam("link_context_toolbar",!1,"boolean")}(t)},initValue:function(){var n=Z(t);return n?X(n):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(n){var e=t.selection.getNode();return n.setActive(!!Z(t,e)),Lt(t)(n)},onAction:function(n){var e=n.getValue(),r=function(n){var e=Z(t),r=et(t);if(!e&&r){var o=tt(t.selection,e);return b.some(o.length>0?o:n)}return b.none()}(e);at(t,{href:e,attach:l},{href:e,text:r,title:b.none(),rel:b.none(),target:b.none(),class:b.none()}),function(t){t.selection.collapse(!1)}(t),n.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:n,onAction:function(n){ct(t),n.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:n,onAction:function(n){_t(t)(),n.hide()}}]})};t.add("link",(function(t){(function(t){t.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:It(t),onSetup:Lt(t)}),t.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:_t(t),onSetup:jt(t)}),t.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return ct(t)},onSetup:Ft(t)})})(t),function(t){t.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:_t(t),onSetup:jt(t)}),t.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:It(t)}),t.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return ct(t)},onSetup:Ft(t)})}(t),function(t){t.ui.registry.addContextMenu("link",{update:function(n){return nt(t.dom.getParents(n,"a"))?"link unlink openlink":"link"}})}(t),Ut(t),function(t){t.on("click",(function(e){var r=Nt(t,e.target);r&&n.metaKeyPressed(e)&&(e.preventDefault(),Mt(t,r))})),t.on("keydown",(function(n){var e=Et(t);e&&13===n.keyCode&&function(t){return!0===t.altKey&&!1===t.shiftKey&&!1===t.ctrlKey&&!1===t.metaKey}(n)&&(n.preventDefault(),Mt(t,e))}))}(t),function(t){t.addCommand("mceLink",(function(){!function(t){return t.getParam("link_quicklink",!1,"boolean")}(t)?It(t)():t.fire("contexttoolbar-show",{toolbarKey:"quicklink"})}))}(t),function(t){t.addShortcut("Meta+K","",(function(){t.execCommand("mceLink")}))}(t)}))}()},c361:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t,n){for(var e="",r=0;r<n;r++)e+=t;return e},e=function(t,e){var r=function(t){return t.getParam("nonbreaking_wrap",!0,"boolean")}(t)||t.plugins.visualchars?'<span class="'+(function(t){return!!t.plugins.visualchars&&t.plugins.visualchars.isEnabled()}(t)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+n("&nbsp;",e)+"</span>":n("&nbsp;",e);t.undoManager.transact((function(){return t.insertContent(r)}))},r=tinymce.util.Tools.resolve("tinymce.util.VK");t.add("nonbreaking",(function(t){(function(t){t.addCommand("mceNonBreaking",(function(){e(t,1)}))})(t),function(t){var n=function(){return t.execCommand("mceNonBreaking")};t.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:n}),t.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:n})}(t),function(t){var n=function(t){var n=t.getParam("nonbreaking_force_tab",0);return"boolean"==typeof n?!0===n?3:0:n}(t);n>0&&t.on("keydown",(function(o){if(o.keyCode===r.TAB&&!o.isDefaultPrevented()){if(o.shiftKey)return;o.preventDefault(),o.stopImmediatePropagation(),e(t,n)}}))}(t)}))}()},cdd9:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(){return(n=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},e=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},r=function(t){return function(n){return typeof n===t}},o=e("string"),i=e("object"),u=e("array"),a=function(t){return function(n){return t===n}}(null),c=r("boolean"),l=function(t){return!function(t){return null==t}(t)},f=r("function"),s=r("number"),d=function(){},m=function(t){return function(){return t}},g=function(t){return t},p=m(!1),h=m(!0),v=function(){return b},b=function(){var t=function(t){return t()},n=g;return{fold:function(t,n){return t()},isSome:p,isNone:h,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:m(null),getOrUndefined:m(void 0),or:n,orThunk:t,map:v,each:d,bind:v,exists:p,forall:h,filter:function(){return v()},toArray:function(){return[]},toString:m("none()")}}(),y=function(t){var n=m(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:h,isNone:p,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return y(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:b},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},w={some:y,none:v,from:function(t){return null==t?b:y(t)}},x=Object.keys,C=Object.hasOwnProperty,S=function(t,n,e,r){return function(t,n){for(var e=x(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}}(t,(function(t,o){(n(t,o)?e:r)(t,o)})),{}},T=function(t,n){return C.call(t,n)},k=Array.prototype.push,O=function(t){for(var n=[],e=0,r=t.length;e<r;++e){if(!u(t[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+t);k.apply(n,t[e])}return n},D=function(t){return function(t,n){return n>=0&&n<t.length?w.some(t[n]):w.none()}(t,0)};"undefined"!=typeof window?window:Function("return this;")();var A=function(t,n,e){!function(t,n,e){if(!(o(e)||c(e)||s(e)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",e,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,e+"")}(t.dom,n,e)},R=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},P={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return R(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return R(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return R(e)},fromDom:R,fromPoint:function(t,n,e){return w.from(t.dom.elementFromPoint(n,e)).map(R)}},N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),E=tinymce.util.Tools.resolve("tinymce.util.Promise"),M=tinymce.util.Tools.resolve("tinymce.util.URI"),I=tinymce.util.Tools.resolve("tinymce.util.XHR"),_=function(t){return t.getParam("image_dimensions",!0,"boolean")},B=function(t){return l(t.getParam("images_upload_url"))},L=function(t){return l(t.getParam("images_upload_handler"))},j=function(t,n){return Math.max(parseInt(t,10),parseInt(n,10))},F=function(t){return t&&(t=t.replace(/px$/,"")),t},U=function(t){return t.length>0&&/^[0-9]+$/.test(t)&&(t+="px"),t},z=function(t){if(t.margin){var n=String(t.margin).split(" ");switch(n.length){case 1:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[0],t["margin-bottom"]=t["margin-bottom"]||n[0],t["margin-left"]=t["margin-left"]||n[0];break;case 2:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[0],t["margin-left"]=t["margin-left"]||n[1];break;case 3:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[2],t["margin-left"]=t["margin-left"]||n[1];break;case 4:t["margin-top"]=t["margin-top"]||n[0],t["margin-right"]=t["margin-right"]||n[1],t["margin-bottom"]=t["margin-bottom"]||n[2],t["margin-left"]=t["margin-left"]||n[3]}delete t.margin}return t},H=function(t,n){var e=function(t){return t.getParam("image_list",!1)}(t);o(e)?I.send({url:e,success:function(t){n(JSON.parse(t))}}):f(e)?e(n):n(e)},W=function(t){return"IMG"===t.nodeName&&(t.hasAttribute("data-mce-object")||t.hasAttribute("data-mce-placeholder"))},V=function(t,n){return M.isDomSafe(n,"img",t.settings)},$=N.DOM,q=function(t){return t.style.marginLeft&&t.style.marginRight&&t.style.marginLeft===t.style.marginRight?F(t.style.marginLeft):""},K=function(t){return t.style.marginTop&&t.style.marginBottom&&t.style.marginTop===t.style.marginBottom?F(t.style.marginTop):""},G=function(t){return t.style.borderWidth?F(t.style.borderWidth):""},Y=function(t,n){return t.hasAttribute(n)?t.getAttribute(n):""},J=function(t,n){return t.style[n]?t.style[n]:""},X=function(t){return null!==t.parentNode&&"FIGURE"===t.parentNode.nodeName},Q=function(t,n,e){""===e?t.removeAttribute(n):t.setAttribute(n,e)},Z=function(t){X(t)?function(t){var n=t.parentNode;$.insertAfter(t,n),$.remove(n)}(t):function(t){var n=$.create("figure",{class:"image"});$.insertAfter(n,t),n.appendChild(t),n.appendChild($.create("figcaption",{contentEditable:"true"},"Caption")),n.contentEditable="false"}(t)},tt=function(t,n){var e=t.getAttribute("style"),r=n(null!==e?e:"");r.length>0?(t.setAttribute("style",r),t.setAttribute("data-mce-style",r)):t.removeAttribute("style")},nt=function(t,n){return function(t,e,r){t.style[e]?(t.style[e]=U(r),tt(t,n)):Q(t,e,r)}},et=function(t,n){return t.style[n]?F(t.style[n]):Y(t,n)},rt=function(t,n){var e=U(n);t.style.marginLeft=e,t.style.marginRight=e},ot=function(t,n){var e=U(n);t.style.marginTop=e,t.style.marginBottom=e},it=function(t,n){var e=U(n);t.style.borderWidth=e},ut=function(t,n){t.style.borderStyle=n},at=function(t){return"FIGURE"===t.nodeName},ct=function(t){return 0===$.getAttrib(t,"alt").length&&"presentation"===$.getAttrib(t,"role")},lt=function(t){return ct(t)?"":Y(t,"alt")},ft=function(t,n){var e=document.createElement("img");return Q(e,"style",n.style),(q(e)||""!==n.hspace)&&rt(e,n.hspace),(K(e)||""!==n.vspace)&&ot(e,n.vspace),(G(e)||""!==n.border)&&it(e,n.border),(function(t){return J(t,"borderStyle")}(e)||""!==n.borderStyle)&&ut(e,n.borderStyle),t(e.getAttribute("style"))},st=function(t,e){var r=document.createElement("img");if(ht(t,n(n({},e),{caption:!1}),r),gt(r,e.alt,e.isDecorative),e.caption){var o=$.create("figure",{class:"image"});return o.appendChild(r),o.appendChild($.create("figcaption",{contentEditable:"true"},"Caption")),o.contentEditable="false",o}return r},dt=function(t,n){return{src:Y(n,"src"),alt:lt(n),title:Y(n,"title"),width:et(n,"width"),height:et(n,"height"),class:Y(n,"class"),style:t(Y(n,"style")),caption:X(n),hspace:q(n),vspace:K(n),border:G(n),borderStyle:J(n,"borderStyle"),isDecorative:ct(n)}},mt=function(t,n,e,r,o){e[r]!==n[r]&&o(t,r,e[r])},gt=function(t,n,e){if(e){$.setAttrib(t,"role","presentation");var r=P.fromDom(t);A(r,"alt","")}else a(n)?function(t,n){t.dom.removeAttribute(n)}(r=P.fromDom(t),"alt"):(r=P.fromDom(t),A(r,"alt",n)),"presentation"===$.getAttrib(t,"role")&&$.setAttrib(t,"role","")},pt=function(t,n){return function(e,r,o){t(e,o),tt(e,n)}},ht=function(t,n,e){var r=dt(t,e);mt(e,r,n,"caption",(function(t,n,e){return Z(t)})),mt(e,r,n,"src",Q),mt(e,r,n,"title",Q),mt(e,r,n,"width",nt(0,t)),mt(e,r,n,"height",nt(0,t)),mt(e,r,n,"class",Q),mt(e,r,n,"style",pt((function(t,n){return Q(t,"style",n)}),t)),mt(e,r,n,"hspace",pt(rt,t)),mt(e,r,n,"vspace",pt(ot,t)),mt(e,r,n,"border",pt(it,t)),mt(e,r,n,"borderStyle",pt(ut,t)),function(t,n,e){e.alt===n.alt&&e.isDecorative===n.isDecorative||gt(t,e.alt,e.isDecorative)}(e,r,n)},vt=function(t,n){var e=t.dom.styles.parse(n),r=z(e),o=t.dom.styles.parse(t.dom.styles.serialize(r));return t.dom.styles.serialize(o)},bt=function(t){var n=t.selection.getNode(),e=t.dom.getParent(n,"figure.image");return e?t.dom.select("img",e)[0]:n&&("IMG"!==n.nodeName||W(n))?null:n},yt=function(t,n){var e=t.dom,r=function(t,n){var e={};return S(t,n,function(t){return function(n,e){t[e]=n}}(e),d),e}(t.schema.getTextBlockElements(),(function(n,e){return!t.schema.isValidChild(e,"figure")})),o=e.getParent(n.parentNode,(function(t){return function(t,n){return T(t,n)&&void 0!==t[n]&&null!==t[n]}(r,t.nodeName)}),t.getBody());return o?e.split(o,n):n},wt=function(t,n){var e=bt(t);if(ht((function(n){return vt(t,n)}),n,e),function(t,n){t.dom.setAttrib(n,"src",n.getAttribute("src"))}(t,e),at(e.parentNode)){var r=e.parentNode;yt(t,r),t.selection.select(e.parentNode)}else t.selection.select(e),function(t,n,e){var r=function(){e.onload=e.onerror=null,t.selection&&(t.selection.select(e),t.nodeChanged())};e.onload=function(){n.width||n.height||!_(t)||t.dom.setAttribs(e,{width:String(e.clientWidth),height:String(e.clientHeight)}),r()},e.onerror=r}(t,n,e)},xt=function(t,e){var r=bt(t);if(r){var o=dt((function(n){return vt(t,n)}),r),i=n(n({},o),e),u=function(t,e){var r=e.src;return n(n({},e),{src:V(t,r)?r:""})}(t,i);i.src?wt(t,u):function(t,n){if(n){var e=t.dom.is(n.parentNode,"figure.image")?n.parentNode:n;t.dom.remove(e),t.focus(),t.nodeChanged(),t.dom.isEmpty(t.getBody())&&(t.setContent(""),t.selection.setCursorLocation())}}(t,r)}else e.src&&function(t,n){var e=st((function(n){return vt(t,n)}),n);t.dom.setAttrib(e,"data-mce-id","__mcenew"),t.focus(),t.selection.setContent(e.outerHTML);var r=t.dom.select('*[data-mce-id="__mcenew"]')[0];if(t.dom.setAttrib(r,"data-mce-id",null),at(r)){var o=yt(t,r);t.selection.select(o)}else t.selection.select(r)}(t,n(n({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),e))},Ct=function(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];if(0===n.length)throw new Error("Can't merge zero objects");for(var r={},o=0;o<n.length;o++){var i=n[o];for(var u in i)T(i,u)&&(r[u]=t(r[u],i[u]))}return r}}((function(t,n){return i(t)&&i(n)?Ct(t,n):n})),St=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Tt=tinymce.util.Tools.resolve("tinymce.util.Tools"),kt=function(t){return o(t.value)?t.value:""},Ot=function(t,n){var e=[];return Tt.each(t,(function(t){var r=function(t){return o(t.text)?t.text:o(t.title)?t.title:""}(t);if(void 0!==t.menu){var i=Ot(t.menu,n);e.push({text:r,items:i})}else{var u=n(t);e.push({text:r,value:u})}})),e},Dt=function(t){return void 0===t&&(t=kt),function(n){return n?w.from(n).map((function(n){return Ot(n,t)})):w.none()}},At=function(t,n){return function(t,n){for(var e=0;e<t.length;e++){var r=n(t[e],e);if(r.isSome())return r}return w.none()}(t,(function(t){return function(t){return T(t,"items")}(t)?At(t.items,n):t.value===n?w.some(t):w.none()}))},Rt=Dt,Pt=function(t){return Dt(kt)(t)},Nt=function(t,n){return t.bind((function(t){return At(t,n)}))},Et=function(t){return{title:"Advanced",name:"advanced",items:[{type:"input",label:"Style",name:"style"},{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},Mt=function(t){var n=Rt((function(n){return t.convertURL(n.value||n.url,"src")})),e=new E((function(e){H(t,(function(t){e(n(t).map((function(t){return O([[{text:"None",value:""}],t])})))}))})),r=Pt(function(t){return t.getParam("image_class_list")}(t)),i=function(t){return t.getParam("image_advtab",!1,"boolean")}(t),u=function(t){return t.getParam("image_uploadtab",!0,"boolean")}(t),a=B(t),c=L(t),l=function(t){var n=bt(t);return n?dt((function(n){return vt(t,n)}),n):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}(t),f=function(t){return t.getParam("image_description",!0,"boolean")}(t),s=function(t){return t.getParam("image_title",!1,"boolean")}(t),d=_(t),m=function(t){return t.getParam("image_caption",!1,"boolean")}(t),g=function(t){return t.getParam("a11y_advanced_options",!1,"boolean")}(t),p=function(t){return t.getParam("automatic_uploads",!0,"boolean")}(t),h=w.some(function(t){return t.getParam("image_prepend_url","","string")}(t)).filter((function(t){return o(t)&&t.length>0}));return e.then((function(t){return{image:l,imageList:t,classList:r,hasAdvTab:i,hasUploadTab:u,hasUploadUrl:a,hasUploadHandler:c,hasDescription:f,hasImageTitle:s,hasDimensions:d,hasImageCaption:m,prependURL:h,hasAccessibilityOptions:g,automaticUploads:p}}))},It=function(t){var e=t.imageList.map((function(t){return{name:"images",type:"listbox",label:"Image list",items:t}})),r={name:"alt",type:"input",label:"Alternative description",disabled:t.hasAccessibilityOptions&&t.image.isDecorative},o=t.classList.map((function(t){return{name:"classes",type:"listbox",label:"Class",items:t}}));return O([[{name:"src",type:"urlinput",filetype:"image",label:"Source"}],e.toArray(),t.hasAccessibilityOptions&&t.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],t.hasDescription?[r]:[],t.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],t.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[n(n({},function(t){return t?{type:"grid",columns:2}:{type:"panel"}}(t.classList.isSome()&&t.hasImageCaption)),{items:O([o.toArray(),t.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]])},_t=function(t){return{title:"General",name:"general",items:It(t)}},Bt=It,Lt=function(t){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},jt=function(t){return{src:{value:t.src,meta:{}},images:t.src,alt:t.alt,title:t.title,dimensions:{width:t.width,height:t.height},classes:t.class,caption:t.caption,style:t.style,vspace:t.vspace,border:t.border,hspace:t.hspace,borderstyle:t.borderStyle,fileinput:[],isDecorative:t.isDecorative}},Ft=function(t,n){return{src:t.src.value,alt:0===t.alt.length&&n?null:t.alt,title:t.title,width:t.dimensions.width,height:t.dimensions.height,class:t.classes,style:t.style,caption:t.caption,hspace:t.hspace,vspace:t.vspace,border:t.border,borderStyle:t.borderstyle,isDecorative:t.isDecorative}},Ut=function(t,n){var e=n.getData();(function(t,n){return/^(?:[a-zA-Z]+:)?\/\//.test(n)?w.none():t.prependURL.bind((function(t){return n.substring(0,t.length)!==t?w.some(t+n):w.none()}))})(t,e.src.value).each((function(t){n.setData({src:{value:t,meta:e.src.meta}})}))},zt=function(t,n){var e=n.getData(),r=e.src.meta;if(void 0!==r){var i=Ct({},e);(function(t,n,e){t.hasDescription&&o(e.alt)&&(n.alt=e.alt),t.hasAccessibilityOptions&&(n.isDecorative=e.isDecorative||n.isDecorative||!1),t.hasImageTitle&&o(e.title)&&(n.title=e.title),t.hasDimensions&&(o(e.width)&&(n.dimensions.width=e.width),o(e.height)&&(n.dimensions.height=e.height)),o(e.class)&&Nt(t.classList,e.class).each((function(t){n.classes=t.value})),t.hasImageCaption&&c(e.caption)&&(n.caption=e.caption),t.hasAdvTab&&(o(e.style)&&(n.style=e.style),o(e.vspace)&&(n.vspace=e.vspace),o(e.border)&&(n.border=e.border),o(e.hspace)&&(n.hspace=e.hspace),o(e.borderstyle)&&(n.borderstyle=e.borderstyle))})(t,i,r),n.setData(i)}},Ht=function(t,n,e,r){Ut(n,r),zt(n,r),function(t,n,e,r){var o=r.getData(),i=o.src.value,u=o.src.meta||{};u.width||u.height||!n.hasDimensions||(function(t){return t.length>0}(i)?t.imageSize(i).then((function(t){e.open&&r.setData({dimensions:t})})).catch((function(t){return console.error(t)})):r.setData({dimensions:{width:"",height:""}}))}(t,n,e,r),function(t,n,e){var r=e.getData(),o=Nt(t.imageList,r.src.value);n.prevImage=o,e.setData({images:o.map((function(t){return t.value})).getOr("")})}(n,e,r)},Wt=function(t,n,e){var r=z(t(e.style)),o=Ct({},e);return o.vspace=function(t){return t["margin-top"]&&t["margin-bottom"]&&t["margin-top"]===t["margin-bottom"]?F(String(t["margin-top"])):""}(r),o.hspace=function(t){return t["margin-right"]&&t["margin-left"]&&t["margin-right"]===t["margin-left"]?F(String(t["margin-right"])):""}(r),o.border=function(t){return t["border-width"]?F(String(t["border-width"])):""}(r),o.borderstyle=function(t){return t["border-style"]?String(t["border-style"]):""}(r),o.style=function(t,n,e){return n(t(n(e)))}(t,n,r),o},Vt=function(t,n,e,r){var o=r.getData();r.block("Uploading image"),D(o.fileinput).fold((function(){r.unblock()}),(function(o){var i=URL.createObjectURL(o),u=function(){r.unblock(),URL.revokeObjectURL(i)},a=function(o){r.setData({src:{value:o,meta:{}}}),r.showTab("general"),Ht(t,n,e,r)};(function(t){return new E((function(n,e){var r=new FileReader;r.onload=function(){n(r.result)},r.onerror=function(){e(r.error.message)},r.readAsDataURL(t)}))})(o).then((function(e){var c=t.createBlobCache(o,i,e);n.automaticUploads?t.uploadImage(c).then((function(t){a(t.url),u()})).catch((function(n){u(),t.alertErr(n)})):(t.addToBlobCache(c),a(c.blobUri()),r.unblock())}))}))},$t=function(t,n,e){return function(r,o){"src"===o.name?Ht(t,n,e,r):"images"===o.name?function(t,n,e,r){var o=r.getData(),i=Nt(n.imageList,o.images);i.each((function(t){""===o.alt||e.prevImage.map((function(t){return t.text===o.alt})).getOr(!1)?""===t.value?r.setData({src:t,alt:e.prevAlt}):r.setData({src:t,alt:t.text}):r.setData({src:t})})),e.prevImage=i,Ht(t,n,e,r)}(t,n,e,r):"alt"===o.name?e.prevAlt=r.getData().alt:"style"===o.name?function(t,n){var e=n.getData(),r=Wt(t.parseStyle,t.serializeStyle,e);n.setData(r)}(t,r):"vspace"===o.name||"hspace"===o.name||"border"===o.name||"borderstyle"===o.name?function(t,n,e){var r=Ct(jt(n.image),e.getData()),o=ft(t.normalizeCss,Ft(r,!1));e.setData({style:o})}(t,n,r):"fileinput"===o.name?Vt(t,n,e,r):"isDecorative"===o.name&&(r.getData().isDecorative?r.disable("alt"):r.enable("alt"))}},qt=function(t){return function(){t.open=!1}},Kt=function(t){return t.hasAdvTab||t.hasUploadUrl||t.hasUploadHandler?{type:"tabpanel",tabs:O([[_t(t)],t.hasAdvTab?[Et(t)]:[],t.hasUploadTab&&(t.hasUploadUrl||t.hasUploadHandler)?[Lt(t)]:[]])}:{type:"panel",items:Bt(t)}},Gt=function(t){return function(n){var e=function(t){return{prevImage:Nt(t.imageList,t.image.src),prevAlt:t.image.alt,open:!0}}(n);return{title:"Insert/Edit Image",size:"normal",body:Kt(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:jt(n.image),onSubmit:t.onSubmit(n),onChange:$t(t,n,e),onClose:qt(e)}}},Yt=function(t){return function(n){return function(e){var r=Ct(jt(n.image),e.getData());t.execCommand("mceUpdateImage",!1,Ft(r,n.hasAccessibilityOptions)),t.editorUpload.uploadImagesAuto(),e.close()}}},Jt=function(t){return function(n){return V(t,n)?function(t){return new E((function(n){var e=document.createElement("img"),r=function(t){e.onload=e.onerror=null,e.parentNode&&e.parentNode.removeChild(e),n(t)};e.onload=function(){var t={width:j(e.width,e.clientWidth),height:j(e.height,e.clientHeight)};r(E.resolve(t))},e.onerror=function(){r(E.reject("Failed to get image dimensions for: "+t))};var o=e.style;o.visibility="hidden",o.position="fixed",o.bottom=o.left="0px",o.width=o.height="auto",document.body.appendChild(e),e.src=t}))}(t.documentBaseURI.toAbsolute(n)).then((function(t){return{width:String(t.width),height:String(t.height)}})):E.resolve({width:"",height:""})}},Xt=function(t){return function(n,e,r){return t.editorUpload.blobCache.create({blob:n,blobUri:e,name:n.name?n.name.replace(/\.[^\.]+$/,""):null,filename:n.name,base64:r.split(",")[1]})}},Qt=function(t){return function(n){t.editorUpload.blobCache.add(n)}},Zt=function(t){return function(n){t.windowManager.alert(n)}},tn=function(t){return function(n){return vt(t,n)}},nn=function(t){return function(n){return t.dom.parseStyle(n)}},en=function(t){return function(n,e){return t.dom.serializeStyle(n,e)}},rn=function(t){return function(n){return St(t).upload([n],!1).then((function(t){return 0===t.length?E.reject("Failed to upload image"):!1===t[0].status?E.reject(t[0].error.message):t[0]}))}},on=function(t){var n={onSubmit:Yt(t),imageSize:Jt(t),addToBlobCache:Qt(t),createBlobCache:Xt(t),alertErr:Zt(t),normalizeCss:tn(t),parseStyle:nn(t),serializeStyle:en(t),uploadImage:rn(t)};return{open:function(){Mt(t).then(Gt(n)).then(t.windowManager.open)}}},un=function(t){var n=t.attr("class");return n&&/\bimage\b/.test(n)},an=function(t){return function(n){for(var e=n.length,r=function(n){n.attr("contenteditable",t?"true":null)};e--;){var o=n[e];un(o)&&(o.attr("contenteditable",t?"false":null),Tt.each(o.getAll("figcaption"),r))}}};t.add("image",(function(t){(function(t){t.on("PreInit",(function(){t.parser.addNodeFilter("figure",an(!0)),t.serializer.addNodeFilter("figure",an(!1))}))})(t),function(t){t.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:on(t).open,onSetup:function(n){return n.setActive(l(bt(t))),t.selection.selectorChangedWithUnbind("img:not([data-mce-object],[data-mce-placeholder]),figure.image",n.setActive).unbind}}),t.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:on(t).open}),t.ui.registry.addContextMenu("image",{update:function(t){return at(t)||function(t){return"IMG"===t.nodeName}(t)&&!W(t)?["image"]:[]}})}(t),function(t){t.addCommand("mceImage",on(t).open),t.addCommand("mceUpdateImage",(function(n,e){t.undoManager.transact((function(){return xt(t,e)}))}))}(t)}))}()},cf08:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return function(n){return typeof n===t}},e=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}}("string"),r=n("boolean"),o=n("number"),i=function(){},u=function(t){return function(){return t}},a=function(t){return t},c=u(!1),l=u(!0),f=function(){return s},s=function(){var t=function(t){return t()},n=a;return{fold:function(t,n){return t()},isSome:c,isNone:l,getOr:n,getOrThunk:t,getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:u(null),getOrUndefined:u(void 0),or:n,orThunk:t,map:f,each:i,bind:f,exists:c,forall:l,filter:function(){return f()},toArray:function(){return[]},toString:u("none()")}}(),d=function(t){var n=u(t),e=function(){return o},r=function(n){return n(t)},o={fold:function(n,e){return e(t)},isSome:l,isNone:c,getOr:n,getOrThunk:n,getOrDie:n,getOrNull:n,getOrUndefined:n,or:e,orThunk:e,map:function(n){return d(n(t))},each:function(n){n(t)},bind:r,exists:r,forall:r,filter:function(n){return n(t)?o:s},toArray:function(){return[t]},toString:function(){return"some("+t+")"}};return o},m=function(t){return null==t?s:d(t)},g=function(t,n){for(var e=0,r=t.length;e<r;e++){n(t[e],e)}},p=Object.keys,h=function(t,n){for(var e=p(t),r=0,o=e.length;r<o;r++){var i=e[r];n(t[i],i)}};"undefined"!=typeof window?window:Function("return this;")();var v=function(t){return t.dom.nodeValue},b=function(t){return function(n){return function(t){return t.dom.nodeType}(n)===t}}(3),y=function(t,n,i){!function(t,n,i){if(!(e(i)||r(i)||o(i)))throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",i,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(n,i+"")}(t.dom,n,i)},w=function(t,n){t.dom.removeAttribute(n)},x=function(t,n){var e=function(t,n){var e=t.dom.getAttribute(n);return null===e?void 0:e}(t,n);return void 0===e||""===e?[]:e.split(" ")},C=function(t){return void 0!==t.dom.classList},S=function(t,n){return function(t,n,e){var r=x(t,n).concat([e]);return y(t,n,r.join(" ")),!0}(t,"class",n)},T=function(t,n){return function(t,n,e){var r=function(t,n){for(var e=[],r=0,o=t.length;r<o;r++){var i=t[r];n(i,r)&&e.push(i)}return e}(x(t,n),(function(t){return t!==e}));return r.length>0?y(t,n,r.join(" ")):w(t,n),!1}(t,"class",n)},k=function(t){0===(C(t)?t.dom.classList:function(t){return x(t,"class")}(t)).length&&w(t,"class")},O=function(t){if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},D={fromHtml:function(t,n){var e=(n||document).createElement("div");if(e.innerHTML=t,!e.hasChildNodes()||e.childNodes.length>1)throw console.error("HTML does not have a single root node",t),new Error("HTML must have a single root node");return O(e.childNodes[0])},fromTag:function(t,n){var e=(n||document).createElement(t);return O(e)},fromText:function(t,n){var e=(n||document).createTextNode(t);return O(e)},fromDom:O,fromPoint:function(t,n,e){return m(t.dom.elementFromPoint(n,e)).map(O)}},A={" ":"nbsp","­":"shy"},R=function(t,n){var e="";return h(t,(function(t,n){e+=n})),new RegExp("["+e+"]",n?"g":"")},P=R(A),N=R(A,!0),E=function(t){var n="";return h(t,(function(t){n&&(n+=","),n+="span.mce-"+t})),n}(A),M="mce-nbsp",I=function(t){return'<span data-mce-bogus="1" class="mce-'+A[t]+'">'+t+"</span>"},_=function(t){var n=v(t);return b(t)&&void 0!==n&&P.test(n)},B=function(t,n){var e=[],r=function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t.dom.childNodes,D.fromDom);return g(r,(function(t){n(t)&&(e=e.concat([t])),e=e.concat(B(t,n))})),e},L=function(t){return"span"===t.nodeName.toLowerCase()&&t.classList.contains("mce-nbsp-wrap")},j=function(t,n){var e=B(D.fromDom(n),_);g(e,(function(n){var e=n.dom.parentNode;if(L(e))!function(t,n){C(t)?t.dom.classList.add(n):S(t,n)}(D.fromDom(e),M);else{for(var r=function(t){return t.replace(N,I)}(t.dom.encode(v(n))),o=t.dom.create("div",null,r),i=void 0;i=o.lastChild;)t.dom.insertAfter(i,n.dom);t.dom.remove(n.dom)}}))},F=function(t,n){var e=t.dom.select(E,n);g(e,(function(n){L(n)?function(t,n){C(t)?t.dom.classList.remove(n):T(t,n);k(t)}(D.fromDom(n),M):t.dom.remove(n,!0)}))},U=function(t){var n=t.getBody(),e=t.selection.getBookmark(),r=function(t,n){for(;t.parentNode;){if(t.parentNode===n)return t;t=t.parentNode}}(t.selection.getNode(),n);F(t,r=void 0!==r?r:n),j(t,r),t.selection.moveToBookmark(e)},z=function(t,n){!function(t,n){t.fire("VisualChars",{state:n})}(t,n.get());var e=t.getBody();!0===n.get()?j(t,e):F(t,e)},H=function(t,n){t.addCommand("mceVisualChars",(function(){!function(t,n){n.set(!n.get());var e=t.selection.getBookmark();z(t,n),t.selection.moveToBookmark(e)}(t,n)}))},W=tinymce.util.Tools.resolve("tinymce.util.Delay"),V=function(t,n){return function(e){e.setActive(n.get());var r=function(t){return e.setActive(t.state)};return t.on("VisualChars",r),function(){return t.off("VisualChars",r)}}};t.add("visualchars",(function(t){var n=function(t){var n=t;return{get:function(){return n},set:function(t){n=t}}}(function(t){return t.getParam("visualchars_default_state",!1)}(t));return H(t,n),function(t,n){var e=function(){return t.execCommand("mceVisualChars")};t.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:V(t,n)}),t.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:e,onSetup:V(t,n)})}(t,n),function(t,n){var e=W.debounce((function(){U(t)}),300);(function(t){return!1!==t.getParam("forced_root_block")})(t)&&t.on("keydown",(function(r){!0===n.get()&&(13===r.keyCode?U(t):e())})),t.on("remove",e.stop)}(t,n),function(t,n){t.on("init",(function(){z(t,n)}))}(t,n),function(t){return{isEnabled:function(){return t.get()}}}(n)}))}()},dbbc:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager");t.add("hr",(function(t){(function(t){t.addCommand("InsertHorizontalRule",(function(){t.execCommand("mceInsertContent",!1,"<hr />")}))})(t),function(t){var n=function(){return t.execCommand("InsertHorizontalRule")};t.ui.registry.addButton("hr",{icon:"horizontal-rule",tooltip:"Horizontal line",onAction:n}),t.ui.registry.addMenuItem("hr",{icon:"horizontal-rule",text:"Horizontal line",onAction:n})}(t)}))}()},e8b0:function(t,n){!function(){"use strict";var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),n=function(t){return t},e=function(){return(e=Object.assign||function(t){for(var n,e=1,r=arguments.length;e<r;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},r=function(t){return t.replace(/\uFEFF/g,"")},o="[-'\\.‘’․﹒＇．]",i="[:··״‧︓﹕：]",u="[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",a="[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",c="\\r",l="\\n",f="[\v\f\u2028\u2029]",s="[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",d="[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\ufeff￹-￻]",m="[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",g="[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",p="[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]",h=0,v=1,b=2,y=3,w=4,x=5,C=6,S=7,T=8,k=9,O=10,D=11,A=12,R=13,P=[new RegExp("[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),new RegExp(o),new RegExp(i),new RegExp(u),new RegExp(a),new RegExp(c),new RegExp(l),new RegExp(f),new RegExp(s),new RegExp(d),new RegExp(m),new RegExp(g),new RegExp("@")],N=new RegExp("^"+p+"$"),E=P,M=R,I=function(t){for(var n=M,e=E.length,r=0;r<e;++r){var o=E[r];if(o&&o.test(t)){n=r;break}}return n},_=function(t){var n=function(t){var n={};return function(e){if(n[e])return n[e];var r=t(e);return n[e]=r,r}}(I);return function(t,n){for(var e=t.length,r=new Array(e),o=0;o<e;o++){var i=t[o];r[o]=n(i,o)}return r}(t,n)},B=function(t,n){var e=t[n],r=t[n+1];if(n<0||n>t.length-1&&0!==n)return!1;if(e===h&&r===h)return!1;var o=t[n+2];if(e===h&&(r===b||r===v||r===A)&&o===h)return!1;var i=t[n-1];return(e!==b&&e!==v&&r!==A||r!==h||i!==h)&&(e!==w&&e!==h||r!==w&&r!==h)&&(e!==y&&e!==v||r!==w||i!==w)&&(e!==w||r!==y&&r!==v||o!==w)&&e!==T&&e!==k&&i!==T&&i!==k&&r!==T&&r!==k&&(e!==x||r!==C)&&(e===S||e===x||e===C||r===S||r===x||r===C||(e!==O||r!==O)&&(r!==D||e!==h&&e!==w&&e!==O&&e!==D)&&(e!==D||r!==h&&r!==w&&r!==O)&&e!==A)},L=/^\s+$/,j=N,F=function(t){return"http"===t||"https"===t},U=function(t,n){var e=function(t,n){var e;for(e=n;e<t.length&&!L.test(t[e]);e++);return e}(t,n+1);return"://"===t.slice(n+1,e).join("").substr(0,3)?e:n},z=function(t,n,r){r=e(e({},{includeWhitespace:!1,includePunctuation:!1}),r);for(var o=[],i=[],u=0;u<t.length;u++){var a=n(t[u]);"\ufeff"!==a&&(o.push(t[u]),i.push(a))}return function(t,n,e,r){for(var o=[],i=[],u=0;u<e.length;++u)if(i.push(t[u]),B(e,u)){var a=n[u];if((r.includeWhitespace||!L.test(a))&&(r.includePunctuation||!j.test(a))){var c=u-i.length+1,l=u+1,f=n.slice(c,l).join("");if(F(f)){var s=U(n,u),d=t.slice(l,s);Array.prototype.push.apply(i,d),u=s}o.push(i)}i=[]}return o}(o,i,_(i),r)},H=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),W=function(t,n){for(var e=n.getBlockElements(),o=n.getShortEndedElements(),i=function(t){return e[t.nodeName]||o[t.nodeName]},u=[],a="",c=new H(t,t);t=c.next();)3===t.nodeType?a+=r(t.data):i(t)&&a.length&&(u.push(a),a="");return a.length&&u.push(a),u},V=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length},$=function(t,e){var r=function(t){return t.replace(/\u200B/g,"")}(W(t,e).join("\n"));return z(r.split(""),n).length},q=function(t,n){var e=W(t,n).join("");return V(e)},K=function(t,n){var e=W(t,n).join("").replace(/\s/g,"");return V(e)},G=function(t,n){return function(){return n(t.getBody(),t.schema)}},Y=function(t,n){return function(){return n(t.selection.getRng().cloneContents(),t.schema)}},J=function(t){return G(t,$)},X=function(t,n){t.addCommand("mceWordCount",(function(){return function(t,n){t.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(n.body.getWordCount()),String(n.selection.getWordCount())],["Characters (no spaces)",String(n.body.getCharacterCountWithoutSpaces()),String(n.selection.getCharacterCountWithoutSpaces())],["Characters",String(n.body.getCharacterCount()),String(n.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})}(t,n)}))},Q=tinymce.util.Tools.resolve("tinymce.util.Delay"),Z=function(t,n){!function(t,n){t.fire("wordCountUpdate",{wordCount:{words:n.body.getWordCount(),characters:n.body.getCharacterCount(),charactersWithoutSpaces:n.body.getCharacterCountWithoutSpaces()}})}(t,n)};!function(n){void 0===n&&(n=300),t.add("wordcount",(function(t){var e=function(t){return{body:{getWordCount:J(t),getCharacterCount:G(t,q),getCharacterCountWithoutSpaces:G(t,K)},selection:{getWordCount:Y(t,$),getCharacterCount:Y(t,q),getCharacterCountWithoutSpaces:Y(t,K)},getCount:J(t)}}(t);return X(t,e),function(t){var n=function(){return t.execCommand("mceWordCount")};t.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:n}),t.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:n})}(t),function(t,n,e){var r=Q.debounce((function(){return Z(t,n)}),e);t.on("init",(function(){Z(t,n),Q.setEditorTimeout(t,(function(){t.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",r)}),0)}))}(t,e,n),e}))}()}()},ebac:function(t,n,e){e("080b")},eda9:function(t,n,e){e("c361")}}]);